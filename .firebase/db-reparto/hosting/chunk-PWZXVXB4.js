var $N=Object.defineProperty,HN=Object.defineProperties;var zN=Object.getOwnPropertyDescriptors;var nu=Object.getOwnPropertySymbols;var FI=Object.prototype.hasOwnProperty,VI=Object.prototype.propertyIsEnumerable;var LI=(n,e,t)=>e in n?$N(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,N=(n,e)=>{for(var t in e||={})FI.call(e,t)&&LI(n,t,e[t]);if(nu)for(var t of nu(e))VI.call(e,t)&&LI(n,t,e[t]);return n},Z=(n,e)=>HN(n,zN(e));var ru=(n,e)=>{var t={};for(var r in n)FI.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&nu)for(var r of nu(n))e.indexOf(r)<0&&VI.call(n,r)&&(t[r]=n[r]);return t};var Xe=null,iu=!1,Rf=1,qN=null,ct=Symbol("SIGNAL");function X(n){let e=Xe;return Xe=n,e}function su(){return Xe}var qs={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Gs(n){if(iu)throw new Error("");if(Xe===null)return;Xe.consumerOnSignalRead(n);let e=Xe.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=Xe.recomputing;if(r&&(t=e!==void 0?e.nextProducer:Xe.producers,t!==void 0&&t.producer===n)){Xe.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===Xe&&(!r||WN(i,Xe)))return;let o=eo(Xe),s={producer:n,consumer:Xe,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};Xe.producersTail=s,e!==void 0?e.nextProducer=s:Xe.producers=s,o&&$I(n,s)}function jI(){Rf++}function Nf(n){if(!(eo(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Rf)){if(!n.producerMustRecompute(n)&&!cu(n)){Af(n);return}n.producerRecomputeValue(n),Af(n)}}function Mf(n){if(n.consumers===void 0)return;let e=iu;iu=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||GN(r)}}finally{iu=e}}function Pf(){return Xe?.consumerAllowSignalWrites!==!1}function GN(n){n.dirty=!0,Mf(n),n.consumerMarkedDirty?.(n)}function Af(n){n.dirty=!1,n.lastCleanEpoch=Rf}function Ws(n){return n&&UI(n),X(n)}function UI(n){n.producersTail=void 0,n.recomputing=!0}function au(n,e){X(e),n&&BI(n)}function BI(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(eo(n))do t=kf(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function cu(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(Nf(t),r!==t.version))return!0}return!1}function Ks(n){if(eo(n)){let e=n.producers;for(;e!==void 0;)e=kf(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function $I(n,e){let t=n.consumersTail,r=eo(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)$I(i.producer,i)}function kf(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!eo(e)){let o=e.producers;for(;o!==void 0;)o=kf(o)}return t}function eo(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function xf(n){qN?.(n)}function WN(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function Of(n,e){return Object.is(n,e)}function uu(n,e){let t=Object.create(KN);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(Nf(t),Gs(t),t.value===ou)throw t.error;return t.value};return r[ct]=t,xf(t),r}var Cf=Symbol("UNSET"),Sf=Symbol("COMPUTING"),ou=Symbol("ERRORED"),KN=Z(N({},qs),{value:Cf,dirty:!0,error:null,equal:Of,kind:"computed",producerMustRecompute(n){return n.value===Cf||n.value===Sf},producerRecomputeValue(n){if(n.value===Sf)throw new Error("");let e=n.value;n.value=Sf;let t=Ws(n),r,i=!1;try{r=n.computation(),X(null),i=e!==Cf&&e!==ou&&r!==ou&&n.equal(e,r)}catch(o){r=ou,n.error=o}finally{au(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function QN(){throw new Error}var HI=QN;function zI(n){HI(n)}function Lf(n){HI=n}var YN=null;function Ff(n,e){let t=Object.create(lu);t.value=n,e!==void 0&&(t.equal=e);let r=()=>qI(t);return r[ct]=t,xf(t),[r,s=>Qs(t,s),s=>GI(t,s)]}function qI(n){return Gs(n),n.value}function Qs(n,e){Pf()||zI(n),n.equal(n.value,e)||(n.value=e,JN(n))}function GI(n,e){Pf()||zI(n),Qs(n,e(n.value))}var lu=Z(N({},qs),{equal:Of,value:void 0,kind:"signal"});function JN(n){n.version++,jI(),Mf(n),YN?.(n)}function Vf(n){let e=X(null);try{return n()}finally{X(e)}}function W(n){return typeof n=="function"}function to(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var du=to(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Wr(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var xe=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(W(r))try{r()}catch(o){e=o instanceof du?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{WI(o)}catch(s){e=e??[],s instanceof du?e=[...e,...s.errors]:e.push(s)}}if(e)throw new du(e)}}add(e){var t;if(e&&e!==this)if(this.closed)WI(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Wr(t,e)}remove(e){let{_finalizers:t}=this;t&&Wr(t,e),e instanceof n&&e._removeParent(this)}};xe.EMPTY=(()=>{let n=new xe;return n.closed=!0,n})();var jf=xe.EMPTY;function hu(n){return n instanceof xe||n&&"closed"in n&&W(n.remove)&&W(n.add)&&W(n.unsubscribe)}function WI(n){W(n)?n():n.unsubscribe()}var Bt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var no={setTimeout(n,e,...t){let{delegate:r}=no;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=no;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function fu(n){no.setTimeout(()=>{let{onUnhandledError:e}=Bt;if(e)e(n);else throw n})}function Kr(){}var KI=Uf("C",void 0,void 0);function QI(n){return Uf("E",void 0,n)}function YI(n){return Uf("N",n,void 0)}function Uf(n,e,t){return{kind:n,value:e,error:t}}var Qr=null;function ro(n){if(Bt.useDeprecatedSynchronousErrorHandling){let e=!Qr;if(e&&(Qr={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Qr;if(Qr=null,t)throw r}}else n()}function JI(n){Bt.useDeprecatedSynchronousErrorHandling&&Qr&&(Qr.errorThrown=!0,Qr.error=n)}var Yr=class extends xe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,hu(e)&&e.add(this)):this.destination=eM}static create(e,t,r){return new io(e,t,r)}next(e){this.isStopped?$f(YI(e),this):this._next(e)}error(e){this.isStopped?$f(QI(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?$f(KI,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},ZN=Function.prototype.bind;function Bf(n,e){return ZN.call(n,e)}var Hf=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){pu(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){pu(r)}else pu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){pu(t)}}},io=class extends Yr{constructor(e,t,r){super();let i;if(W(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Bt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Bf(e.next,o),error:e.error&&Bf(e.error,o),complete:e.complete&&Bf(e.complete,o)}):i=e}this.destination=new Hf(i)}};function pu(n){Bt.useDeprecatedSynchronousErrorHandling?JI(n):fu(n)}function XN(n){throw n}function $f(n,e){let{onStoppedNotification:t}=Bt;t&&no.setTimeout(()=>t(n,e))}var eM={closed:!0,next:Kr,error:XN,complete:Kr};var oo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function $t(n){return n}function zf(...n){return qf(n)}function qf(n){return n.length===0?$t:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var Y=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=nM(t)?t:new io(t,r,i);return ro(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=ZI(r),new r((i,o)=>{let s=new io({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[oo](){return this}pipe(...t){return qf(t)(this)}toPromise(t){return t=ZI(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function ZI(n){var e;return(e=n??Bt.Promise)!==null&&e!==void 0?e:Promise}function tM(n){return n&&W(n.next)&&W(n.error)&&W(n.complete)}function nM(n){return n&&n instanceof Yr||tM(n)&&hu(n)}function rM(n){return W(n?.lift)}function de(n){return e=>{if(rM(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function he(n,e,t,r,i){return new Gf(n,e,t,r,i)}var Gf=class extends Yr{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var XI=to(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var et=(()=>{class n extends Y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new gu(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new XI}next(t){ro(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){ro(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){ro(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?jf:(this.currentObservers=null,o.push(t),new xe(()=>{this.currentObservers=null,Wr(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new Y;return t.source=this,t}}return n.create=(e,t)=>new gu(e,t),n})(),gu=class extends et{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:jf}};var Qe=class extends et{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Wf={now(){return(Wf.delegate||Date).now()},delegate:void 0};var mu=class extends xe{constructor(e,t){super()}schedule(e,t=0){return this}};var Ys={setInterval(n,e,...t){let{delegate:r}=Ys;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Ys;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var so=class extends mu{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Ys.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Ys.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Wr(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var ao=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};ao.now=Wf.now;var co=class extends ao{constructor(e,t=ao.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Kf=new co(so);var yu=class extends so{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var vu=class extends co{};var Qf=new vu(yu);var mt=new Y(n=>n.complete());function ew(n){return n&&W(n.schedule)}function tw(n){return n[n.length-1]}function _u(n){return W(tw(n))?n.pop():void 0}function cr(n){return ew(tw(n))?n.pop():void 0}function rw(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(n,e||[])).next())})}function nw(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Jr(n){return this instanceof Jr?(this.v=n,this):new Jr(n)}function iw(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(S){return Promise.resolve(S).then(y,p)}}function a(y,S){r[y]&&(i[y]=function(M){return new Promise(function(R,O){o.push([y,M,R,O])>1||u(y,M)})},S&&(i[y]=S(i[y])))}function u(y,S){try{l(r[y](S))}catch(M){m(o[0][3],M)}}function l(y){y.value instanceof Jr?Promise.resolve(y.value.v).then(h,p):m(o[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function m(y,S){y(S),o.shift(),o.length&&u(o[0][0],o[0][1])}}function ow(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof nw=="function"?nw(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,u){s=n[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var Eu=n=>n&&typeof n.length=="number"&&typeof n!="function";function Iu(n){return W(n?.then)}function wu(n){return W(n[oo])}function Tu(n){return Symbol.asyncIterator&&W(n?.[Symbol.asyncIterator])}function Du(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function iM(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var bu=iM();function Cu(n){return W(n?.[bu])}function Su(n){return iw(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Jr(t.read());if(i)return yield Jr(void 0);yield yield Jr(r)}}finally{t.releaseLock()}})}function Au(n){return W(n?.getReader)}function Se(n){if(n instanceof Y)return n;if(n!=null){if(wu(n))return oM(n);if(Eu(n))return sM(n);if(Iu(n))return aM(n);if(Tu(n))return sw(n);if(Cu(n))return cM(n);if(Au(n))return uM(n)}throw Du(n)}function oM(n){return new Y(e=>{let t=n[oo]();if(W(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function sM(n){return new Y(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function aM(n){return new Y(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,fu)})}function cM(n){return new Y(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function sw(n){return new Y(e=>{lM(n,e).catch(t=>e.error(t))})}function uM(n){return sw(Su(n))}function lM(n,e){var t,r,i,o;return rw(this,void 0,void 0,function*(){try{for(t=ow(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function yt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function ur(n,e=0){return de((t,r)=>{t.subscribe(he(r,i=>yt(r,n,()=>r.next(i),e),()=>yt(r,n,()=>r.complete(),e),i=>yt(r,n,()=>r.error(i),e)))})}function lr(n,e=0){return de((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function aw(n,e){return Se(n).pipe(lr(e),ur(e))}function cw(n,e){return Se(n).pipe(lr(e),ur(e))}function uw(n,e){return new Y(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function lw(n,e){return new Y(t=>{let r;return yt(t,e,()=>{r=n[bu](),yt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>W(r?.return)&&r.return()})}function Ru(n,e){if(!n)throw new Error("Iterable cannot be null");return new Y(t=>{yt(t,e,()=>{let r=n[Symbol.asyncIterator]();yt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function dw(n,e){return Ru(Su(n),e)}function hw(n,e){if(n!=null){if(wu(n))return aw(n,e);if(Eu(n))return uw(n,e);if(Iu(n))return cw(n,e);if(Tu(n))return Ru(n,e);if(Cu(n))return lw(n,e);if(Au(n))return dw(n,e)}throw Du(n)}function Oe(n,e){return e?hw(n,e):Se(n)}function ie(...n){let e=cr(n);return Oe(n,e)}function Yf(n,e){let t=W(n)?n:()=>n,r=i=>i.error(t());return new Y(e?i=>e.schedule(r,0,i):r)}function Nu(n){return!!n&&(n instanceof Y||W(n.lift)&&W(n.subscribe))}var Zr=to(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function _e(n,e){return de((t,r)=>{let i=0;t.subscribe(he(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:dM}=Array;function hM(n,e){return dM(e)?n(...e):n(e)}function Mu(n){return _e(e=>hM(n,e))}var{isArray:fM}=Array,{getPrototypeOf:pM,prototype:gM,keys:mM}=Object;function Pu(n){if(n.length===1){let e=n[0];if(fM(e))return{args:e,keys:null};if(yM(e)){let t=mM(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function yM(n){return n&&typeof n=="object"&&pM(n)===gM}function ku(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Jf(...n){let e=cr(n),t=_u(n),{args:r,keys:i}=Pu(n);if(r.length===0)return Oe([],e);let o=new Y(vM(r,e,i?s=>ku(i,s):$t));return t?o.pipe(Mu(t)):o}function vM(n,e,t=$t){return r=>{fw(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)fw(e,()=>{let l=Oe(n[u],e),h=!1;l.subscribe(he(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function fw(n,e,t){n?yt(t,n,e):e()}function pw(n,e,t,r,i,o,s,a){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},y=M=>l<r?S(M):u.push(M),S=M=>{o&&e.next(M),l++;let R=!1;Se(t(M,h++)).subscribe(he(e,O=>{i?.(O),o?y(O):e.next(O)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;u.length&&l<r;){let O=u.shift();s?yt(e,s,()=>S(O)):S(O)}m()}catch(O){e.error(O)}}))};return n.subscribe(he(e,y,()=>{p=!0,m()})),()=>{a?.()}}function ut(n,e,t=1/0){return W(e)?ut((r,i)=>_e((o,s)=>e(r,o,i,s))(Se(n(r,i))),t):(typeof e=="number"&&(t=e),de((r,i)=>pw(r,i,n,t)))}function gw(n=1/0){return ut($t,n)}function mw(){return gw(1)}function uo(...n){return mw()(Oe(n,cr(n)))}function Js(n){return new Y(e=>{Se(n()).subscribe(e)})}function _M(...n){let e=_u(n),{args:t,keys:r}=Pu(n),i=new Y(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;Se(t[h]).subscribe(he(o,m=>{p||(p=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?ku(r,a):a),o.complete())}))}});return e?i.pipe(Mu(e)):i}var EM=new Y(Kr);function un(n,e){return de((t,r)=>{let i=0;t.subscribe(he(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Zs(n){return de((e,t)=>{let r=null,i=!1,o;r=e.subscribe(he(t,void 0,void 0,s=>{o=Se(n(s,Zs(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function xu(n,e){return W(e)?ut(n,e,1):ut(n,1)}function Zf(n){return de((e,t)=>{let r=!1;e.subscribe(he(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Pn(n){return n<=0?()=>mt:de((e,t)=>{let r=0;e.subscribe(he(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function yw(n=IM){return de((e,t)=>{let r=!1;e.subscribe(he(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function IM(){return new Zr}function Xf(n){return de((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function kn(n,e){let t=arguments.length>=2;return r=>r.pipe(n?un((i,o)=>n(i,o,r)):$t,Pn(1),t?Zf(e):yw(()=>new Zr))}function Ou(n){return n<=0?()=>mt:de((e,t)=>{let r=[];e.subscribe(he(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function ep(...n){let e=cr(n);return de((t,r)=>{(e?uo(n,t,e):uo(n,t)).subscribe(r)})}function ln(n,e){return de((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(he(r,u=>{i?.unsubscribe();let l=0,h=o++;Se(n(u,h)).subscribe(i=he(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Xs(n){return de((e,t)=>{Se(n).subscribe(he(t,()=>t.complete(),Kr)),!t.closed&&e.subscribe(t)})}function lt(n,e,t){let r=W(n)||e||t?{next:n,error:e,complete:t}:n;return r?de((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(he(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):$t}var tp;function Lu(){return tp}function dn(n){let e=tp;return tp=n,e}var vw=Symbol("NotFound");function lo(n){return n===vw||n?.name==="\u0275NotFound"}var fo=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},yp=new fo("21.0.3");var vp="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",V=class extends Error{code;constructor(e,t){super(po(e,t)),this.code=e}};function DM(n){return`NG0${Math.abs(n)}`}function po(n,e){return`${DM(n)}${e?": "+e:""}`}function fe(n){for(let e in n)if(n[e]===fe)return e;throw Error("")}function Tw(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function On(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(On).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function _p(n,e){return n?e?`${n} ${e}`:n:e||""}var bM=fe({__forward_ref__:fe});function Bu(n){return n.__forward_ref__=Bu,n.toString=function(){return On(this())},n}function Ye(n){return Ep(n)?n():n}function Ep(n){return typeof n=="function"&&n.hasOwnProperty(bM)&&n.__forward_ref__===Bu}function U(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function go(n){return{providers:n.providers||[],imports:n.imports||[]}}function oa(n){return CM(n,$u)}function Ip(n){return oa(n)!==null}function CM(n,e){return n.hasOwnProperty(e)&&n[e]||null}function SM(n){let e=n?.[$u]??null;return e||null}function rp(n){return n&&n.hasOwnProperty(Vu)?n[Vu]:null}var $u=fe({\u0275prov:fe}),Vu=fe({\u0275inj:fe}),j=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=U({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function wp(n){return n&&!!n.\u0275providers}var Tp=fe({\u0275cmp:fe}),Dp=fe({\u0275dir:fe}),bp=fe({\u0275pipe:fe}),Cp=fe({\u0275mod:fe}),ta=fe({\u0275fac:fe}),ii=fe({__NG_ELEMENT_ID__:fe}),_w=fe({__NG_ENV_ID__:fe});function mo(n){return typeof n=="string"?n:n==null?"":String(n)}function Dw(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():mo(n)}var bw=fe({ngErrorCode:fe}),AM=fe({ngErrorMessage:fe}),RM=fe({ngTokenPath:fe});function Sp(n,e){return Cw("",-200,e)}function Hu(n,e){throw new V(-201,!1)}function Cw(n,e,t){let r=new V(e,n);return r[bw]=e,r[AM]=n,t&&(r[RM]=t),r}function NM(n){return n[bw]}var ip;function Sw(){return ip}function wt(n){let e=ip;return ip=n,e}function Ap(n,e,t){let r=oa(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;Hu(n,"Injector")}var MM={},Xr=MM,op="__NG_DI_FLAG__",sp=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=ei(t)||0;try{return this.injector.get(e,r&8?null:Xr,r)}catch(i){if(lo(i))return i;throw i}}};function PM(n,e=0){let t=Lu();if(t===void 0)throw new V(-203,!1);if(t===null)return Ap(n,void 0,e);{let r=kM(e),i=t.retrieve(n,r);if(lo(i)){if(r.optional)return null;throw i}return i}}function K(n,e=0){return(Sw()||PM)(Ye(n),e)}function k(n,e){return K(n,ei(e))}function ei(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function kM(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function ap(n){let e=[];for(let t=0;t<n.length;t++){let r=Ye(n[t]);if(Array.isArray(r)){if(r.length===0)throw new V(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],u=xM(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(K(i,o))}else e.push(K(r))}return e}function Aw(n,e){return n[op]=e,n.prototype[op]=e,n}function xM(n){return n[op]}function ti(n,e){let t=n.hasOwnProperty(ta);return t?n[ta]:null}function zu(n,e){n.forEach(t=>Array.isArray(t)?zu(t,e):e(t))}function Rp(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function sa(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Rw(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function Nw(n,e,t){let r=yo(n,e);return r>=0?n[r|1]=t:(r=~r,Rw(n,r,e,t)),r}function qu(n,e){let t=yo(n,e);if(t>=0)return n[t|1]}function yo(n,e){return OM(n,e,1)}function OM(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var fr={},Tt=[],vo=new j(""),Np=new j("",-1),Mp=new j(""),na=class{get(e,t=Xr){if(t===Xr){let i=Cw("",-201);throw i.name="\u0275NotFound",i}return t}};function Pp(n){return n[Cp]||null}function pr(n){return n[Tp]||null}function kp(n){return n[Dp]||null}function Mw(n){return n[bp]||null}function Pt(n){return{\u0275providers:n}}function Pw(...n){return{\u0275providers:xp(!0,n),\u0275fromNgModule:!0}}function xp(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return zu(e,s=>{let a=s;ju(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&kw(i,o),t}function kw(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Op(i,o=>{e(o,r)})}}function ju(n,e,t,r){if(n=Ye(n),!n)return!1;let i=null,o=rp(n),s=!o&&pr(n);if(!o&&!s){let u=n.ngModule;if(o=rp(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)ju(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{zu(o.imports,h=>{ju(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&kw(l,e)}if(!a){let l=ti(i)||(()=>new i);e({provide:i,useFactory:l,deps:Tt},i),e({provide:Mp,useValue:i,multi:!0},i),e({provide:vo,useValue:()=>K(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;Op(u,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function Op(n,e){for(let t of n)wp(t)&&(t=t.\u0275providers),Array.isArray(t)?Op(t,e):e(t)}var LM=fe({provide:String,useValue:fe});function xw(n){return n!==null&&typeof n=="object"&&LM in n}function FM(n){return!!(n&&n.useExisting)}function VM(n){return!!(n&&n.useFactory)}function ni(n){return typeof n=="function"}function Ow(n){return!!n.useClass}var aa=new j(""),Fu={},Ew={},np;function ca(){return np===void 0&&(np=new na),np}var Le=class{},ri=class extends Le{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,up(e,s=>this.processProvider(s)),this.records.set(Np,ho(void 0,this)),i.has("environment")&&this.records.set(Le,ho(void 0,this));let o=this.records.get(aa);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Mp,Tt,{self:!0}))}retrieve(e,t){let r=ei(t)||0;try{return this.get(e,Xr,r)}catch(i){if(lo(i))return i;throw i}}destroy(){ea(this),this._destroyed=!0;let e=X(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),X(e)}}onDestroy(e){return ea(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){ea(this);let t=dn(this),r=wt(void 0),i;try{return e()}finally{dn(t),wt(r)}}get(e,t=Xr,r){if(ea(this),e.hasOwnProperty(_w))return e[_w](this);let i=ei(r),o,s=dn(this),a=wt(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let h=HM(e)&&oa(e);h&&this.injectableDefInScope(h)?l=ho(cp(e),Fu):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?ca():this.parent;return t=i&8&&t===Xr?null:t,u.get(e,t)}catch(u){let l=NM(u);throw l===-200||l===-201?new V(l,null):u}finally{wt(a),dn(s)}}resolveInjectorInitializers(){let e=X(null),t=dn(this),r=wt(void 0),i;try{let o=this.get(vo,Tt,{self:!0});for(let s of o)s()}finally{dn(t),wt(r),X(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(On(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Ye(e);let t=ni(e)?e:Ye(e&&e.provide),r=UM(e);if(!ni(e)&&e.multi===!0){let i=this.records.get(t);i||(i=ho(void 0,Fu,!0),i.factory=()=>ap(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=X(null);try{if(t.value===Ew)throw Sp(On(e));return t.value===Fu&&(t.value=Ew,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&$M(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{X(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Ye(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function cp(n){let e=oa(n),t=e!==null?e.factory:ti(n);if(t!==null)return t;if(n instanceof j)throw new V(204,!1);if(n instanceof Function)return jM(n);throw new V(204,!1)}function jM(n){if(n.length>0)throw new V(204,!1);let t=SM(n);return t!==null?()=>t.factory(n):()=>new n}function UM(n){if(xw(n))return ho(void 0,n.useValue);{let e=Lp(n);return ho(e,Fu)}}function Lp(n,e,t){let r;if(ni(n)){let i=Ye(n);return ti(i)||cp(i)}else if(xw(n))r=()=>Ye(n.useValue);else if(VM(n))r=()=>n.useFactory(...ap(n.deps||[]));else if(FM(n))r=(i,o)=>K(Ye(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=Ye(n&&(n.useClass||n.provide));if(BM(n))r=()=>new i(...ap(n.deps));else return ti(i)||cp(i)}return r}function ea(n){if(n.destroyed)throw new V(205,!1)}function ho(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function BM(n){return!!n.deps}function $M(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function HM(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function up(n,e){for(let t of n)Array.isArray(t)?up(t,e):t&&wp(t)?up(t.\u0275providers,e):e(t)}function Ve(n,e){let t;n instanceof ri?(ea(n),t=n):t=new sp(n);let r,i=dn(t),o=wt(void 0);try{return e()}finally{dn(i),wt(o)}}function Lw(){return Sw()!==void 0||Lu()!=null}var Ht=0,J=1,z=2,Je=3,kt=4,xt=5,ua=6,_o=7,tt=8,gr=9,Ln=10,Te=11,Eo=12,Fp=13,oi=14,Ot=15,si=16,ai=17,ci=18,la=19,Vp=20,xn=21,Gu=22,da=23,Dt=24,ui=25,ha=26,vt=27,Fw=1;var mr=7,fa=8,pa=9,_t=10;function fn(n){return Array.isArray(n)&&typeof n[Fw]=="object"}function zt(n){return Array.isArray(n)&&n[Fw]===!0}function jp(n){return(n.flags&4)!==0}function yr(n){return n.componentOffset>-1}function ga(n){return(n.flags&1)===1}function pn(n){return!!n.template}function Io(n){return(n[z]&512)!==0}function li(n){return(n[z]&256)===256}var Vw="svg",jw="math";function Lt(n){for(;Array.isArray(n);)n=n[Ht];return n}function Up(n,e){return Lt(e[n])}function qt(n,e){return Lt(e[n.index])}function Wu(n,e){return n.data[e]}function Ft(n,e){let t=e[n];return fn(t)?t:t[Ht]}function Ku(n){return(n[z]&128)===128}function Uw(n){return zt(n[Je])}function di(n,e){return e==null?null:n[e]}function Bp(n){n[ai]=0}function $p(n){n[z]&1024||(n[z]|=1024,Ku(n)&&wo(n))}function Bw(n,e){for(;n>0;)e=e[oi],n--;return e}function ma(n){return!!(n[z]&9216||n[Dt]?.dirty)}function Qu(n){n[Ln].changeDetectionScheduler?.notify(8),n[z]&64&&(n[z]|=1024),ma(n)&&wo(n)}function wo(n){n[Ln].changeDetectionScheduler?.notify(0);let e=dr(n);for(;e!==null&&!(e[z]&8192||(e[z]|=8192,!Ku(e)));)e=dr(e)}function Hp(n,e){if(li(n))throw new V(911,!1);n[xn]===null&&(n[xn]=[]),n[xn].push(e)}function $w(n,e){if(n[xn]===null)return;let t=n[xn].indexOf(e);t!==-1&&n[xn].splice(t,1)}function dr(n){let e=n[Je];return zt(e)?e[Je]:e}function Hw(n){return n[_o]??=[]}function zw(n){return n.cleanup??=[]}var te={lFrame:oT(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var lp=!1;function qw(){return te.lFrame.elementDepthCount}function Gw(){te.lFrame.elementDepthCount++}function zp(){te.lFrame.elementDepthCount--}function qp(){return te.bindingsEnabled}function Ww(){return te.skipHydrationRootTNode!==null}function Gp(n){return te.skipHydrationRootTNode===n}function Wp(){te.skipHydrationRootTNode=null}function me(){return te.lFrame.lView}function Et(){return te.lFrame.tView}function Kw(n){return te.lFrame.contextLView=n,n[tt]}function Qw(n){return te.lFrame.contextLView=null,n}function nt(){let n=Kp();for(;n!==null&&n.type===64;)n=n.parent;return n}function Kp(){return te.lFrame.currentTNode}function Yw(){let n=te.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function To(n,e){let t=te.lFrame;t.currentTNode=n,t.isParent=e}function Qp(){return te.lFrame.isParent}function Jw(){te.lFrame.isParent=!1}function Yp(){return lp}function Jp(n){let e=lp;return lp=n,e}function Zw(){return te.lFrame.bindingIndex}function Xw(n){return te.lFrame.bindingIndex=n}function ya(){return te.lFrame.bindingIndex++}function Zp(n){let e=te.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function eT(){return te.lFrame.inI18n}function tT(n,e){let t=te.lFrame;t.bindingIndex=t.bindingRootIndex=n,Yu(e)}function nT(){return te.lFrame.currentDirectiveIndex}function Yu(n){te.lFrame.currentDirectiveIndex=n}function rT(n){let e=te.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function Xp(n){te.lFrame.currentQueryIndex=n}function zM(n){let e=n[J];return e.type===2?e.declTNode:e.type===1?n[xt]:null}function eg(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=zM(o),i===null||(o=o[oi],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=te.lFrame=iT();return r.currentTNode=e,r.lView=n,!0}function Ju(n){let e=iT(),t=n[J];te.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function iT(){let n=te.lFrame,e=n===null?null:n.child;return e===null?oT(n):e}function oT(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function sT(){let n=te.lFrame;return te.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var tg=sT;function Zu(){let n=sT();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function aT(n){return(te.lFrame.contextLView=Bw(n,te.lFrame.contextLView))[tt]}function vr(){return te.lFrame.selectedIndex}function _r(n){te.lFrame.selectedIndex=n}function Xu(){let n=te.lFrame;return Wu(n.tView,n.selectedIndex)}function cT(){return te.lFrame.currentNamespace}var uT=!0;function el(){return uT}function tl(n){uT=n}function dp(n,e=null,t=null,r){let i=ng(n,e,t,r);return i.resolveInjectorInitializers(),i}function ng(n,e=null,t=null,r,i=new Set){let o=[t||Tt,Pw(n)];return r=r||(typeof n=="object"?void 0:On(n)),new ri(o,e||ca(),r||null,i)}var Fe=class n{static THROW_IF_NOT_FOUND=Xr;static NULL=new na;static create(e,t){if(Array.isArray(e))return dp({name:""},t,e,"");{let r=e.name??"";return dp({name:r},e.parent,e.providers,r)}}static \u0275prov=U({token:n,providedIn:"any",factory:()=>K(Np)});static __NG_ELEMENT_ID__=-1},He=new j(""),Er=(()=>{class n{static __NG_ELEMENT_ID__=qM;static __NG_ENV_ID__=t=>t}return n})(),hp=class extends Er{_lView;constructor(e){super(),this._lView=e}get destroyed(){return li(this._lView)}onDestroy(e){let t=this._lView;return Hp(t,e),()=>$w(t,e)}};function qM(){return new hp(me())}var lT=!1,Fn=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Qe(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Y(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=U({token:n,providedIn:"root",factory:()=>new n})}return n})(),fp=class extends et{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,Lw()&&(this.destroyRef=k(Er,{optional:!0})??void 0,this.pendingTasks=k(Fn,{optional:!0})??void 0)}emit(e){let t=X(null);try{super.next(e)}finally{X(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof xe&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},dt=fp;function Uu(...n){}function rg(n){let e,t;function r(){n=Uu;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function ig(n){return queueMicrotask(()=>n()),()=>{n=Uu}}var og="isAngularZone",ra=og+"_ID",GM=0,Ee=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new dt(!1);onMicrotaskEmpty=new dt(!1);onStable=new dt(!1);onError=new dt(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=lT}=e;if(typeof Zone>"u")throw new V(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,QM(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(og)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new V(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new V(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,WM,Uu,Uu);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},WM={};function sg(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function KM(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){rg(()=>{n.callbackScheduled=!1,pp(n),n.isCheckStableRunning=!0,sg(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),pp(n)}function QM(n){let e=()=>{KM(n)},t=GM++;n._inner=n._inner.fork({name:"angular",properties:{[og]:!0,[ra]:t,[ra+t]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(YM(u))return r.invokeTask(o,s,a,u);try{return Iw(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),ww(n)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return Iw(n),r.invoke(o,s,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!JM(u)&&e(),ww(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,pp(n),sg(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function pp(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function Iw(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function ww(n){n._nesting--,sg(n)}var ia=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new dt;onMicrotaskEmpty=new dt;onStable=new dt;onError=new dt;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function YM(n){return dT(n,"__ignore_ng_zone__")}function JM(n){return dT(n,"__scheduler_tick__")}function dT(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var hn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Gt=new j("",{factory:()=>{let n=k(Ee),e=k(Le),t;return r=>{n.runOutsideAngular(()=>{e.destroyed&&!t?setTimeout(()=>{throw r}):(t??=e.get(hn),t.handleError(r))})}}}),hT={provide:vo,useValue:()=>{let n=k(hn,{optional:!0})},multi:!0};function hi(n,e){let[t,r,i]=Ff(n,e?.equal),o=t,s=o[ct];return o.set=r,o.update=i,o.asReadonly=fT.bind(o),o}function fT(){let n=this[ct];if(n.readonlyFn===void 0){let e=()=>this();e[ct]=n,n.readonlyFn=e}return n.readonlyFn}var nl=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=ZM}return n})();function ZM(){return new nl(me(),nt())}var hr=class{},va=new j("",{factory:()=>!0});var ag=new j(""),Do=(()=>{class n{internalPendingTasks=k(Fn);scheduler=k(hr);errorHandler=k(Gt);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=U({token:n,providedIn:"root",factory:()=>new n})}return n})(),cg=(()=>{class n{static \u0275prov=U({token:n,providedIn:"root",factory:()=>new gp})}return n})(),gp=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}},mp=class{[ct];constructor(e){this[ct]=e}destroy(){this[ct].destroy()}};function Wt(n){return Vf(n)}function Po(n){return{toString:n}.toString()}var rl="__parameters__";function aP(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function cP(n,e,t){return Po(()=>{let r=aP(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(rl)?u[rl]:Object.defineProperty(u,rl,{value:[]})[rl];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var bt=Aw(cP("Optional"),8);function uP(n){return typeof n=="function"}function HT(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var ul=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}},Tl=(()=>{let n=()=>zT;return n.ngInherit=!0,n})();function zT(n){return n.type.prototype.ngOnChanges&&(n.setInput=dP),lP}function lP(){let n=GT(this),e=n?.current;if(e){let t=n.previous;if(t===fr)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function dP(n,e,t,r,i){let o=this.declaredInputs[r],s=GT(n)||hP(n,{previous:fr,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new ul(l&&l.currentValue,t,u===fr),HT(n,e,i,t)}var qT="__ngSimpleChanges__";function GT(n){return n[qT]||null}function hP(n,e){return n[qT]=e}var pT=[];var pe=function(n,e=null,t){for(let r=0;r<pT.length;r++){let i=pT[r];i(n,e,t)}},ce=(function(n){return n[n.TemplateCreateStart=0]="TemplateCreateStart",n[n.TemplateCreateEnd=1]="TemplateCreateEnd",n[n.TemplateUpdateStart=2]="TemplateUpdateStart",n[n.TemplateUpdateEnd=3]="TemplateUpdateEnd",n[n.LifecycleHookStart=4]="LifecycleHookStart",n[n.LifecycleHookEnd=5]="LifecycleHookEnd",n[n.OutputStart=6]="OutputStart",n[n.OutputEnd=7]="OutputEnd",n[n.BootstrapApplicationStart=8]="BootstrapApplicationStart",n[n.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",n[n.BootstrapComponentStart=10]="BootstrapComponentStart",n[n.BootstrapComponentEnd=11]="BootstrapComponentEnd",n[n.ChangeDetectionStart=12]="ChangeDetectionStart",n[n.ChangeDetectionEnd=13]="ChangeDetectionEnd",n[n.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",n[n.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",n[n.AfterRenderHooksStart=16]="AfterRenderHooksStart",n[n.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",n[n.ComponentStart=18]="ComponentStart",n[n.ComponentEnd=19]="ComponentEnd",n[n.DeferBlockStateStart=20]="DeferBlockStateStart",n[n.DeferBlockStateEnd=21]="DeferBlockStateEnd",n[n.DynamicComponentStart=22]="DynamicComponentStart",n[n.DynamicComponentEnd=23]="DynamicComponentEnd",n[n.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",n[n.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",n})(ce||{});function fP(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=zT(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function WT(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function ol(n,e,t){KT(n,e,3,t)}function sl(n,e,t,r){(n[z]&3)===t&&KT(n,e,t,r)}function ug(n,e){let t=n[z];(t&3)===e&&(t&=16383,t+=1,n[z]=t)}function KT(n,e,t,r){let i=r!==void 0?n[ai]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[ai]+=65536),(a<o||o==-1)&&(pP(n,t,e,u),n[ai]=(n[ai]&4294901760)+u+2),u++}function gT(n,e){pe(ce.LifecycleHookStart,n,e);let t=X(null);try{e.call(n)}finally{X(t),pe(ce.LifecycleHookEnd,n,e)}}function pP(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[z]>>14<n[ai]>>16&&(n[z]&3)===e&&(n[z]+=16384,gT(a,o)):gT(a,o)}var Co=-1,pi=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function gP(n){return(n.flags&8)!==0}function mP(n){return(n.flags&16)!==0}function yP(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];_P(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function vP(n){return n===3||n===4||n===6}function _P(n){return n.charCodeAt(0)===64}function So(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?mT(n,t,i,null,e[++r]):mT(n,t,i,null,null))}}return n}function mT(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function QT(n){return n!==Co}function ll(n){return n&32767}function EP(n){return n>>16}function dl(n,e){let t=EP(n),r=e;for(;t>0;)r=r[oi],t--;return r}var vg=!0;function yT(n){let e=vg;return vg=n,e}var IP=256,YT=IP-1,JT=5,wP=0,gn={};function TP(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(ii)&&(r=t[ii]),r==null&&(r=t[ii]=wP++);let i=r&YT,o=1<<i;e.data[n+(i>>JT)]|=o}function hl(n,e){let t=ZT(n,e);if(t!==-1)return t;let r=e[J];r.firstCreatePass&&(n.injectorIndex=e.length,lg(r.data,n),lg(e,null),lg(r.blueprint,null));let i=xg(n,e),o=n.injectorIndex;if(QT(i)){let s=ll(i),a=dl(i,e),u=a[J].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function lg(n,e){n.push(0,0,0,0,0,0,0,0,e)}function ZT(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function xg(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=rD(i),r===null)return Co;if(t++,i=i[oi],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Co}function _g(n,e,t){TP(n,e,t)}function XT(n,e,t){if(t&8||n!==void 0)return n;Hu(e,"NodeInjector")}function eD(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[gr],o=wt(void 0);try{return i?i.get(e,r,t&8):Ap(e,r,t&8)}finally{wt(o)}}return XT(r,e,t)}function tD(n,e,t,r=0,i){if(n!==null){if(e[z]&2048&&!(r&2)){let s=AP(n,e,t,r,gn);if(s!==gn)return s}let o=nD(n,e,t,r,gn);if(o!==gn)return o}return eD(e,t,r,i)}function nD(n,e,t,r,i){let o=CP(t);if(typeof o=="function"){if(!eg(e,n,r))return r&1?XT(i,t,r):eD(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))Hu(t);else return s}finally{tg()}}else if(typeof o=="number"){let s=null,a=ZT(n,e),u=Co,l=r&1?e[Ot][xt]:null;for((a===-1||r&4)&&(u=a===-1?xg(n,e):e[a+8],u===Co||!_T(r,!1)?a=-1:(s=e[J],a=ll(u),e=dl(u,e)));a!==-1;){let h=e[J];if(vT(o,a,h.data)){let p=DP(a,e,t,s,r,l);if(p!==gn)return p}u=e[a+8],u!==Co&&_T(r,e[J].data[a+8]===l)&&vT(o,a,e)?(s=h,a=ll(u),e=dl(u,e)):a=-1}}return i}function DP(n,e,t,r,i,o){let s=e[J],a=s.data[n+8],u=r==null?yr(a)&&vg:r!=s&&(a.type&3)!==0,l=i&1&&o===a,h=bP(a,s,t,u,l);return h!==null?fl(e,s,h,a,i):gn}function bP(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,m=i?a+h:l;for(let y=p;y<m;y++){let S=s[y];if(y<u&&t===S||y>=u&&S.type===t)return y}if(i){let y=s[u];if(y&&pn(y)&&y.type===t)return u}return null}function fl(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof pi){let a=o;if(a.resolving){let y=Dw(s[t]);throw Sp(y)}let u=yT(a.canSeeViewProviders);a.resolving=!0;let l=s[t].type||s[t],h,p=a.injectImpl?wt(a.injectImpl):null,m=eg(n,r,0);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&fP(t,s[t],e)}finally{p!==null&&wt(p),yT(u),a.resolving=!1,tg()}}return o}function CP(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(ii)?n[ii]:void 0;return typeof e=="number"?e>=0?e&YT:SP:e}function vT(n,e,t){let r=1<<n;return!!(t[e+(n>>JT)]&r)}function _T(n,e){return!(n&2)&&!(n&1&&e)}var fi=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return tD(this._tNode,this._lView,e,ei(r),t)}};function SP(){return new fi(nt(),me())}function Dl(n){return Po(()=>{let e=n.prototype.constructor,t=e[ta]||Eg(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[ta]||Eg(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Eg(n){return Ep(n)?()=>{let e=Eg(Ye(n));return e&&e()}:ti(n)}function AP(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[z]&2048&&!Io(s);){let a=nD(o,s,t,r|2,gn);if(a!==gn)return a;let u=o.parent;if(!u){let l=s[Vp];if(l){let h=l.get(t,gn,r);if(h!==gn)return h}u=rD(s),s=s[oi]}o=u}return i}function rD(n){let e=n[J],t=e.type;return t===2?e.declTNode:t===1?n[xt]:null}function RP(){return bl(nt(),me())}function bl(n,e){return new Og(qt(n,e))}var Og=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=RP}return n})();function iD(n){return(n.flags&128)===128}var Lg=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(Lg||{}),oD=new Map,NP=0;function MP(){return NP++}function PP(n){oD.set(n[la],n)}function Ig(n){oD.delete(n[la])}var ET="__ngContext__";function Ao(n,e){fn(e)?(n[ET]=e[la],PP(e)):n[ET]=e}function sD(n){return cD(n[Eo])}function aD(n){return cD(n[kt])}function cD(n){for(;n!==null&&!zt(n);)n=n[kt];return n}var kP;function Fg(n){kP=n}var Cl=new j("",{factory:()=>xP}),xP="ng";var Sl=new j(""),_i=new j("",{providedIn:"platform",factory:()=>"unknown"});var Al=new j("",{factory:()=>k(He).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var uD=!1,lD=new j("",{factory:()=>uD});var OP=(n,e,t,r)=>{};function LP(n,e,t,r){OP(n,e,t,r)}function Vg(n){return(n.flags&32)===32}var FP=()=>null;function dD(n,e,t=!1){return FP(n,e,t)}function hD(n,e){let t=n.contentQueries;if(t!==null){let r=X(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];Xp(o),a.contentQueries(2,e[s],s)}}}finally{X(r)}}}function wg(n,e,t){Xp(0);let r=X(null);try{e(n,t)}finally{X(r)}}function fD(n,e,t){if(jp(e)){let r=X(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{X(r)}}}var Qt=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n[n.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",n})(Qt||{});var Tg=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${vp})`}};function pD(n){return n instanceof Tg?n.changingThisBreaksApplicationSecurity:n}function VP(n,e){return n.createText(e)}function jP(n,e,t){n.setValue(e,t)}function gD(n,e,t){return n.createElement(e,t)}function pl(n,e,t,r,i){n.insertBefore(e,t,r,i)}function mD(n,e,t){n.appendChild(e,t)}function IT(n,e,t,r,i){r!==null?pl(n,e,t,r,i):mD(n,e,t)}function UP(n,e,t,r){n.removeChild(null,e,t,r)}function BP(n,e,t){n.setAttribute(e,"style",t)}function $P(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function yD(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&yP(n,e,r),i!==null&&$P(n,e,i),o!==null&&BP(n,e,o)}function vD(n){return n instanceof Function?n():n}function HP(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var _D="ng-template";function zP(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&HP(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(jg(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function jg(n){return n.type===4&&n.value!==_D}function qP(n,e,t){let r=n.type===4&&!t?_D:n.value;return e===r}function GP(n,e,t){let r=4,i=n.attrs,o=i!==null?QP(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!Kt(r)&&!Kt(u))return!1;if(s&&Kt(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!qP(n,u,t)||u===""&&e.length===1){if(Kt(r))return!1;s=!0}}else if(r&8){if(i===null||!zP(n,i,u,t)){if(Kt(r))return!1;s=!0}}else{let l=e[++a],h=WP(u,i,jg(n),t);if(h===-1){if(Kt(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(Kt(r))return!1;s=!0}}}}return Kt(r)||s}function Kt(n){return(n&1)===0}function WP(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return YP(e,n)}function KP(n,e,t=!1){for(let r=0;r<e.length;r++)if(GP(n,e[r],t))return!0;return!1}function QP(n){for(let e=0;e<n.length;e++){let t=n[e];if(vP(t))return e}return n.length}function YP(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function wT(n,e){return n?":not("+e.trim()+")":e}function JP(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Kt(s)&&(e+=wT(o,i),i=""),r=s,o=o||!Kt(r);t++}return i!==""&&(e+=wT(o,i)),e}function ZP(n){return n.map(JP).join(",")}function XP(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Kt(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var yn={};function Ug(n,e,t,r,i,o,s,a,u,l,h){let p=vt+r,m=p+i,y=ek(p,m),S=typeof l=="function"?l():l;return y[J]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:S,incompleteFirstPass:!1,ssrId:h}}function ek(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:yn);return t}function tk(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Ug(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Bg(n,e,t,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[Ht]=i,p[z]=r|4|128|8|64|1024,(l!==null||n&&n[z]&2048)&&(p[z]|=2048),Bp(p),p[Je]=p[oi]=n,p[tt]=t,p[Ln]=s||n&&n[Ln],p[Te]=a||n&&n[Te],p[gr]=u||n&&n[gr]||null,p[xt]=o,p[la]=MP(),p[ua]=h,p[Vp]=l,p[Ot]=e.type==2?n[Ot]:p,p}function nk(n,e,t){let r=qt(e,n),i=tk(t),o=n[Ln].rendererFactory,s=$g(n,Bg(n,i,null,ED(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function ED(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function ID(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function $g(n,e){return n[Eo]?n[Fp][kt]=e:n[Eo]=e,n[Fp]=e,e}function rk(n=1){wD(Et(),me(),vr()+n,!1)}function wD(n,e,t,r){if(!r)if((e[z]&3)===3){let o=n.preOrderCheckHooks;o!==null&&ol(e,o,t)}else{let o=n.preOrderHooks;o!==null&&sl(e,o,0,t)}_r(t)}var Rl=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(Rl||{});function Dg(n,e,t,r){let i=X(null);try{let[o,s,a]=n.inputs[t],u=null;(s&Rl.SignalBased)!==0&&(u=e[o][ct]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,u,r,t,o):HT(e,u,o,r)}finally{X(i)}}var mn=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(mn||{}),ik;function Hg(n,e){return ik(n,e)}var Ro=new Set,Nl=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(Nl||{}),Ei=new j(""),TT=new Set;function Ml(n){TT.has(n)||(TT.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var zg=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=U({token:n,providedIn:"root",factory:()=>new n})}return n})(),TD=[0,1,2,3],DD=(()=>{class n{ngZone=k(Ee);scheduler=k(hr);errorHandler=k(hn,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){k(Ei,{optional:!0})}execute(){let t=this.sequences.size>0;t&&pe(ce.AfterRenderHooksStart),this.executing=!0;for(let r of TD)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&pe(ce.AfterRenderHooksEnd)}register(t){let{view:r}=t;r!==void 0?((r[ui]??=[]).push(t),wo(r),r[z]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(Nl.AFTER_NEXT_RENDER,t):t()}static \u0275prov=U({token:n,providedIn:"root",factory:()=>new n})}return n})(),gl=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[ui];e&&(this.view[ui]=e.filter(t=>t!==this))}};function bD(n,e){let t=e?.injector??k(Fe);return Ml("NgAfterNextRender"),sk(n,t,e,!0)}function ok(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function sk(n,e,t,r){let i=e.get(zg);i.impl??=e.get(DD);let o=e.get(Ei,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(Er):null,a=e.get(nl,null,{optional:!0}),u=new gl(i.impl,ok(n),a?.view,r,s,o?.snapshot(null));return i.impl.register(u),u}var ak=new j("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:k(Le)})});function CD(n,e,t){let r=n.get(ak);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function ck(n,e){for(let[t,r]of e)CD(n,r.animateFns)}function DT(n,e,t,r){let i=n?.[ha]?.enter;e!==null&&i&&i.has(t.index)&&ck(r,i)}function bo(n,e,t,r,i,o,s,a){if(i!=null){let u,l=!1;zt(i)?u=i:fn(i)&&(l=!0,i=i[Ht]);let h=Lt(i);n===0&&r!==null?(DT(a,r,o,t),s==null?mD(e,r,h):pl(e,r,h,s||null,!0)):n===1&&r!==null?(DT(a,r,o,t),pl(e,r,h,s||null,!0)):n===2?bT(a,o,t,p=>{UP(e,h,l,p)}):n===3&&bT(a,o,t,()=>{e.destroyNode(h)}),u!=null&&Ik(e,n,t,u,o,r,s)}}function uk(n,e){SD(n,e),e[Ht]=null,e[xt]=null}function lk(n,e,t,r,i,o){r[Ht]=i,r[xt]=e,Pl(n,r,t,1,i,o)}function SD(n,e){e[Ln].changeDetectionScheduler?.notify(9),Pl(n,e,e[Te],2,null,null)}function dk(n){let e=n[Eo];if(!e)return dg(n[J],n);for(;e;){let t=null;if(fn(e))t=e[Eo];else{let r=e[_t];r&&(t=r)}if(!t){for(;e&&!e[kt]&&e!==n;)fn(e)&&dg(e[J],e),e=e[Je];e===null&&(e=n),fn(e)&&dg(e[J],e),t=e&&e[kt]}e=t}}function qg(n,e){let t=n[pa],r=t.indexOf(e);t.splice(r,1)}function AD(n,e){if(li(e))return;let t=e[Te];t.destroyNode&&Pl(n,e,t,3,null,null),dk(e)}function dg(n,e){if(li(e))return;let t=X(null);try{e[z]&=-129,e[z]|=256,e[Dt]&&Ks(e[Dt]),pk(n,e),fk(n,e),e[J].type===1&&e[Te].destroy();let r=e[si];if(r!==null&&zt(e[Je])){r!==e[Je]&&qg(r,e);let i=e[ci];i!==null&&i.detachView(n)}Ig(e)}finally{X(t)}}function bT(n,e,t,r){let i=n?.[ha];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&Ro.add(n),CD(t,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s){for(let u=0;u<s.animateFns.length;u++){let l=s.animateFns[u],{promise:h}=l();a.push(h)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),hk(n,r)}else n&&Ro.delete(n),r(!1)},i)}function hk(n,e){let t=n[ha]?.running;if(t){t.then(()=>{n[ha].running=void 0,Ro.delete(n),e(!0)});return}e(!1)}function fk(n,e){let t=n.cleanup,r=e[_o];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[_o]=null);let i=e[xn];if(i!==null){e[xn]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[da];if(o!==null){e[da]=null;for(let s of o)s.destroy()}}function pk(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof pi)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];pe(ce.LifecycleHookStart,a,u);try{u.call(a)}finally{pe(ce.LifecycleHookEnd,a,u)}}else{pe(ce.LifecycleHookStart,i,o);try{o.call(i)}finally{pe(ce.LifecycleHookEnd,i,o)}}}}}function gk(n,e,t){return mk(n,e.parent,t)}function mk(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Ht];if(yr(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Qt.None||i===Qt.Emulated)return null}return qt(r,t)}function yk(n,e,t){return _k(n,e,t)}function vk(n,e,t){return n.type&40?qt(n,t):null}var _k=vk,CT;function Gg(n,e,t,r){let i=gk(n,r,e),o=e[Te],s=r.parent||e[xt],a=yk(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)IT(o,i,t[u],a,!1);else IT(o,i,t,a,!1);CT!==void 0&&CT(o,r,e,t,i)}function _a(n,e){if(e!==null){let t=e.type;if(t&3)return qt(e,n);if(t&4)return bg(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return _a(n,r);{let i=n[e.index];return zt(i)?bg(-1,i):Lt(i)}}else{if(t&128)return _a(n,e.next);if(t&32)return Hg(e,n)()||Lt(n[e.index]);{let r=RD(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=dr(n[Ot]);return _a(i,r)}else return _a(n,e.next)}}}return null}function RD(n,e){if(e!==null){let r=n[Ot][xt],i=e.projection;return r.projection[i]}return null}function bg(n,e){let t=_t+n+1;if(t<e.length){let r=e[t],i=r[J].firstChild;if(i!==null)return _a(r,i)}return e[mr]}function Wg(n,e,t,r,i,o,s){for(;t!=null;){let a=r[gr];if(t.type===128){t=t.next;continue}let u=r[t.index],l=t.type;if(s&&e===0&&(u&&Ao(Lt(u),r),t.flags|=2),!Vg(t))if(l&8)Wg(n,e,t.child,r,i,o,!1),bo(e,n,a,i,u,t,o,r);else if(l&32){let h=Hg(t,r),p;for(;p=h();)bo(e,n,a,i,p,t,o,r);bo(e,n,a,i,u,t,o,r)}else l&16?Ek(n,e,r,t,i,o):bo(e,n,a,i,u,t,o,r);t=s?t.projectionNext:t.next}}function Pl(n,e,t,r,i,o){Wg(t,r,n.firstChild,e,i,o,!1)}function Ek(n,e,t,r,i,o){let s=t[Ot],u=s[xt].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];bo(e,n,t[gr],i,h,r,o,t)}else{let l=u,h=s[Je];iD(r)&&(l.flags|=128),Wg(n,e,l,h,i,o,!0)}}function Ik(n,e,t,r,i,o,s){let a=r[mr],u=Lt(r);a!==u&&bo(e,n,t,o,a,i,s);for(let l=_t;l<r.length;l++){let h=r[l];Pl(h[J],h,n,e,o,a)}}function wk(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:mn.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=mn.Important),n.setStyle(t,r,i,o))}}function ND(n,e,t,r,i){let o=vr(),s=r&2;try{_r(-1),s&&e.length>vt&&wD(n,e,vt,!1);let a=s?ce.TemplateUpdateStart:ce.TemplateCreateStart;pe(a,i,t),t(r,i)}finally{_r(o);let a=s?ce.TemplateUpdateEnd:ce.TemplateCreateEnd;pe(a,i,t)}}function Kg(n,e,t){Rk(n,e,t),(t.flags&64)===64&&Nk(n,e,t)}function Qg(n,e,t=qt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function Tk(n,e,t,r){let o=r.get(lD,uD)||t===Qt.ShadowDom||t===Qt.ExperimentalIsolatedShadowDom,s=n.selectRootElement(e,o);return Dk(s),s}function Dk(n){bk(n)}var bk=()=>null;function Ck(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function MD(n,e,t,r,i,o){let s=e[J];if(Yg(n,s,e,t,r)){yr(n)&&Ak(e,n.index);return}n.type&3&&(t=Ck(t)),Sk(n,e,t,r,i,o)}function Sk(n,e,t,r,i,o){if(n.type&3){let s=qt(n,e);r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function Ak(n,e){let t=Ft(e,n);t[z]&16||(t[z]|=64)}function Rk(n,e,t){let r=t.directiveStart,i=t.directiveEnd;yr(t)&&nk(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||hl(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],u=fl(e,n,s,t);if(Ao(u,e),o!==null&&xk(e,s-r,u,a,t,o),pn(a)){let l=Ft(t.index,e);l[tt]=fl(e,n,s,t)}}}function Nk(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=nT();try{_r(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];Yu(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&Mk(u,l)}}finally{_r(-1),Yu(s)}}function Mk(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function PD(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];KP(e,o.selectors,!1)&&(r??=[],pn(o)?r.unshift(o):r.push(o))}return r}function Pk(n,e,t,r,i,o){let s=qt(n,e);kk(e[Te],s,o,n.value,t,r,i)}function kk(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?mo(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function xk(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];Dg(r,t,u,l)}}function kD(n,e,t,r,i){let o=vt+t,s=e[J],a=i(s,e,n,r,t);e[o]=a,To(n,!0);let u=n.type===2;return u?(yD(e[Te],a,n),(qw()===0||ga(n))&&Ao(a,e),Gw()):Ao(a,e),el()&&(!u||!Vg(n))&&Gg(s,e,a,n),n}function xD(n){let e=n;return Qp()?Jw():(e=e.parent,To(e,!1)),e}function Ok(n,e){let t=n[gr];if(!t)return;let r;try{r=t.get(Gt,null)}catch{r=null}r?.(e)}function Yg(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];Dg(p,t[l],h,i),a=!0}if(o)for(let u of o){let l=t[u],h=e.data[u];Dg(h,l,r,i),a=!0}return a}function Lk(n,e){let t=Ft(e,n),r=t[J];Fk(r,t);let i=t[Ht];i!==null&&t[ua]===null&&(t[ua]=dD(i,t[gr])),pe(ce.ComponentStart);try{Jg(r,t,t[tt])}finally{pe(ce.ComponentEnd,t[tt])}}function Fk(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Jg(n,e,t){Ju(e);try{let r=n.viewQuery;r!==null&&wg(1,r,t);let i=n.template;i!==null&&ND(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[ci]?.finishViewCreation(n),n.staticContentQueries&&hD(n,e),n.staticViewQueries&&wg(2,n.viewQuery,t);let o=n.components;o!==null&&Vk(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[z]&=-5,Zu()}}function Vk(n,e){for(let t=0;t<e.length;t++)Lk(n,e[t])}function jk(n,e,t,r){let i=X(null);try{let o=e.tView,a=n[z]&4096?4096:16,u=Bg(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[si]=l;let h=n[ci];return h!==null&&(u[ci]=h.createEmbeddedView(o)),Jg(o,u,t),u}finally{X(i)}}function ST(n,e){return!e||e.firstChild===null||iD(n)}function Ia(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Lt(o)),zt(o)&&OD(o,r);let s=t.type;if(s&8)Ia(n,e,t.child,r);else if(s&32){let a=Hg(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=RD(e,t);if(Array.isArray(a))r.push(...a);else{let u=dr(e[Ot]);Ia(u[J],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function OD(n,e){for(let t=_t;t<n.length;t++){let r=n[t],i=r[J].firstChild;i!==null&&Ia(r[J],r,i,e)}n[mr]!==n[Ht]&&e.push(n[mr])}function LD(n){if(n[ui]!==null){for(let e of n[ui])e.impl.addSequence(e);n[ui].length=0}}var FD=[];function Uk(n){return n[Dt]??Bk(n)}function Bk(n){let e=FD.pop()??Object.create(Hk);return e.lView=n,e}function $k(n){n.lView[Dt]!==n&&(n.lView=null,FD.push(n))}var Hk=Z(N({},qs),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{wo(n.lView)},consumerOnSignalRead(){this.lView[Dt]=this}});function zk(n){let e=n[Dt]??Object.create(qk);return e.lView=n,e}var qk=Z(N({},qs),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=dr(n.lView);for(;e&&!VD(e[J]);)e=dr(e);e&&$p(e)},consumerOnSignalRead(){this.lView[Dt]=this}});function VD(n){return n.type!==2}function jD(n){if(n[da]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[da])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[z]&8192)}}var Gk=100;function UD(n,e=0){let r=n[Ln].rendererFactory,i=!1;i||r.begin?.();try{Wk(n,e)}finally{i||r.end?.()}}function Wk(n,e){let t=Yp();try{Jp(!0),Cg(n,e);let r=0;for(;ma(n);){if(r===Gk)throw new V(103,!1);r++,Cg(n,1)}}finally{Jp(t)}}function Kk(n,e,t,r){if(li(e))return;let i=e[z],o=!1,s=!1;Ju(e);let a=!0,u=null,l=null;o||(VD(n)?(l=Uk(e),u=Ws(l)):su()===null?(a=!1,l=zk(e),u=Ws(l)):e[Dt]&&(Ks(e[Dt]),e[Dt]=null));try{Bp(e),Xw(n.bindingStartIndex),t!==null&&ND(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let y=n.preOrderCheckHooks;y!==null&&ol(e,y,null)}else{let y=n.preOrderHooks;y!==null&&sl(e,y,0,null),ug(e,0)}if(s||Qk(e),jD(e),BD(e,0),n.contentQueries!==null&&hD(n,e),!o)if(h){let y=n.contentCheckHooks;y!==null&&ol(e,y)}else{let y=n.contentHooks;y!==null&&sl(e,y,1),ug(e,1)}Jk(n,e);let p=n.components;p!==null&&HD(e,p,0);let m=n.viewQuery;if(m!==null&&wg(2,m,r),!o)if(h){let y=n.viewCheckHooks;y!==null&&ol(e,y)}else{let y=n.viewHooks;y!==null&&sl(e,y,2),ug(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Gu]){for(let y of e[Gu])y();e[Gu]=null}o||(LD(e),e[z]&=-73)}catch(h){throw o||wo(e),h}finally{l!==null&&(au(l,u),a&&$k(l)),Zu()}}function BD(n,e){for(let t=sD(n);t!==null;t=aD(t))for(let r=_t;r<t.length;r++){let i=t[r];$D(i,e)}}function Qk(n){for(let e=sD(n);e!==null;e=aD(e)){if(!(e[z]&2))continue;let t=e[pa];for(let r=0;r<t.length;r++){let i=t[r];$p(i)}}}function Yk(n,e,t){pe(ce.ComponentStart);let r=Ft(e,n);try{$D(r,t)}finally{pe(ce.ComponentEnd,r[tt])}}function $D(n,e){Ku(n)&&Cg(n,e)}function Cg(n,e){let r=n[J],i=n[z],o=n[Dt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&cu(o)),s||=!1,o&&(o.dirty=!1),n[z]&=-9217,s)Kk(r,n,r.template,n[tt]);else if(i&8192){let a=X(null);try{jD(n),BD(n,1);let u=r.components;u!==null&&HD(n,u,1),LD(n)}finally{X(a)}}}function HD(n,e,t){for(let r=0;r<e.length;r++)Yk(n,e[r],t)}function Jk(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)_r(~i);else{let o=i,s=t[++r],a=t[++r];tT(s,o);let u=e[o];pe(ce.HostBindingsUpdateStart,u);try{a(2,u)}finally{pe(ce.HostBindingsUpdateEnd,u)}}}}finally{_r(-1)}}function Zg(n,e){let t=Yp()?64:1088;for(n[Ln].changeDetectionScheduler?.notify(e);n;){n[z]|=t;let r=dr(n);if(Io(n)&&!r)return n;n=r}return null}function zD(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function Zk(n,e,t,r=!0){let i=e[J];if(Xk(i,e,n,t),r){let s=bg(t,n),a=e[Te],u=a.parentNode(n[mr]);u!==null&&lk(i,n[xt],a,e,u,s)}let o=e[ua];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Sg(n,e){if(n.length<=_t)return;let t=_t+e,r=n[t];if(r){let i=r[si];i!==null&&i!==n&&qg(i,r),e>0&&(n[t-1][kt]=r[kt]);let o=sa(n,_t+e);uk(r[J],r);let s=o[ci];s!==null&&s.detachView(o[J]),r[Je]=null,r[kt]=null,r[z]&=-129}return r}function Xk(n,e,t,r){let i=_t+r,o=t.length;r>0&&(t[i-1][kt]=e),r<o-_t?(e[kt]=t[i],Rp(t,_t+r,e)):(t.push(e),e[kt]=null),e[Je]=t;let s=e[si];s!==null&&t!==s&&qD(s,e);let a=e[ci];a!==null&&a.insertView(n),Qu(e),e[z]|=128}function qD(n,e){let t=n[pa],r=e[Je];if(fn(r))n[z]|=2;else{let i=r[Je][Ot];e[Ot]!==i&&(n[z]|=2)}t===null?n[pa]=[e]:t.push(e)}var Ir=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[J];return Ia(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[tt]}set context(e){this._lView[tt]=e}get destroyed(){return li(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Je];if(zt(e)){let t=e[fa],r=t?t.indexOf(this):-1;r>-1&&(Sg(e,r),sa(t,r))}this._attachedToViewContainer=!1}AD(this._lView[J],this._lView)}onDestroy(e){Hp(this._lView,e)}markForCheck(){Zg(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[z]&=-129}reattach(){Qu(this._lView),this._lView[z]|=128}detectChanges(){this._lView[z]|=1024,UD(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new V(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Io(this._lView),t=this._lView[si];t!==null&&!e&&qg(t,this._lView),SD(this._lView[J],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new V(902,!1);this._appRef=e;let t=Io(this._lView),r=this._lView[si];r!==null&&!t&&qD(r,this._lView),Qu(this._lView)}};var Da=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=ex;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=jk(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new Ir(o)}}return n})();function ex(){return tx(nt(),me())}function tx(n,e){return n.type&4?new Da(e,n,bl(n,e)):null}function kl(n,e,t,r,i){let o=n.data[e];if(o===null)o=nx(n,e,t,r,i),eT()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=Yw();o.injectorIndex=s===null?-1:s.injectorIndex}return To(o,!0),o}function nx(n,e,t,r,i){let o=Kp(),s=Qp(),a=s?o:o&&o.parent,u=n.data[e]=ix(n,a,t,e,r,i);return rx(n,u,o,s),u}function rx(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function ix(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return Ww()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var ox=()=>null;function AT(n,e){return ox(n,e)}var GD=class{},xl=class{},Ag=class{resolveComponentFactory(e){throw new V(917,!1)}},ba=class{static NULL=new Ag},gi=class{},WD=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>sx()}return n})();function sx(){let n=me(),e=nt(),t=Ft(e.index,n);return(fn(t)?t:n)[Te]}var KD=(()=>{class n{static \u0275prov=U({token:n,providedIn:"root",factory:()=>null})}return n})();var al={},Rg=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,al,r);return i!==al||t===al?i:this.parentInjector.get(e,t,r)}};function ml(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=_p(i,a);else if(o==2){let u=a,l=e[++s];r=_p(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function vn(n,e=0){let t=me();if(t===null)return K(n,e);let r=nt();return tD(r,t,Ye(n),e)}function QD(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a=s,u=null,l=null;for(let h of s)if(h.resolveHostDirectives!==null){[a,u,l]=h.resolveHostDirectives(s);break}ux(n,e,t,a,o,u,l)}o!==null&&r!==null&&ax(t,r,o)}function ax(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new V(-301,!1);r.push(e[i],o)}}function cx(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function ux(n,e,t,r,i,o,s){let a=r.length,u=null;for(let m=0;m<a;m++){let y=r[m];u===null&&pn(y)&&(u=y,cx(n,t,m)),_g(hl(t,e),n,y.type)}gx(t,n.data.length,a),u?.viewProvidersResolver&&u.viewProvidersResolver(u);for(let m=0;m<a;m++){let y=r[m];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=ID(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let m=0;m<a;m++){let y=r[m];if(t.mergedAttrs=So(t.mergedAttrs,y.hostAttrs),dx(n,t,e,p,y),px(p,y,i),s!==null&&s.has(y)){let[M,R]=s.get(y);t.directiveToIndex.set(y.type,[p,M+t.directiveStart,R+t.directiveStart])}else(o===null||!o.has(y))&&t.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(t.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(t.flags|=64);let S=y.type.prototype;!l&&(S.ngOnChanges||S.ngOnInit||S.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!h&&(S.ngOnChanges||S.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),p++}lx(n,t,o)}function lx(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))RT(0,e,i,r),RT(1,e,i,r),MT(e,r,!1);else{let o=t.get(i);NT(0,e,o,r),NT(1,e,o,r),MT(e,r,!0)}}}function RT(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),YD(e,o)}}function NT(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),YD(e,s)}}function YD(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function MT(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||jg(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!t&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[a+1]);break}}else if(t&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function dx(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=ti(i.type,!0)),s=new pi(o,pn(i),vn,null);n.blueprint[r]=s,t[r]=s,hx(n,e,r,ID(n,t,i.hostVars,yn),i)}function hx(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;fx(s)!=a&&s.push(a),s.push(t,r,o)}}function fx(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function px(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;pn(e)&&(t[""]=n)}}function gx(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function JD(n,e,t,r,i,o,s,a){let u=e[J],l=u.consts,h=di(l,s),p=kl(u,n,t,r,h);return o&&QD(u,e,p,di(l,a),i),p.mergedAttrs=So(p.mergedAttrs,p.attrs),p.attrs!==null&&ml(p,p.attrs,!1),p.mergedAttrs!==null&&ml(p,p.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,p),p}function ZD(n,e){WT(n,e),jp(e)&&n.queries.elementEnd(e)}function mx(n,e,t,r,i,o){let s=e.consts,a=di(s,i),u=kl(e,n,t,r,a);if(u.mergedAttrs=So(u.mergedAttrs,u.attrs),o!=null){let l=di(s,o);u.localNames=[];for(let h=0;h<l.length;h+=2)u.localNames.push(l[h],-1)}return u.attrs!==null&&ml(u,u.attrs,!1),u.mergedAttrs!==null&&ml(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function Xg(n){return eb(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function XD(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function eb(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function mi(n,e,t){if(t===yn)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function yx(n,e,t,r){let i=mi(n,e,t);return mi(n,e+1,r)||i}function cl(n,e,t){return function r(i){let o=yr(n)?Ft(n.index,e):e;Zg(o,5);let s=e[tt],a=PT(e,s,t,i),u=r.__ngNextListenerFn__;for(;u;)a=PT(e,s,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function PT(n,e,t,r){let i=X(null);try{return pe(ce.OutputStart,e,t),t(r)!==!1}catch(o){return Ok(n,o),!1}finally{pe(ce.OutputEnd,e,t),X(i)}}function tb(n,e,t,r,i,o,s,a){let u=ga(n),l=!1,h=null;if(!r&&u&&(h=_x(e,t,o,n.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,l=!0}else{let p=qt(n,t),m=r?r(p):p;LP(t,m,o,a);let y=i.listen(m,o,a);if(!vx(o)){let S=r?M=>r(Lt(M[n.index])):n.index;nb(S,e,t,o,a,y,!1)}}return l}function vx(n){return n.startsWith("animation")||n.startsWith("transition")}function _x(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[_o],u=i[o+2];return a&&a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function nb(n,e,t,r,i,o,s){let a=e.firstCreatePass?zw(e):null,u=Hw(t),l=u.length;u.push(i,o),a&&a.push(r,n,l,(l+1)*(s?-1:1))}function kT(n,e,t,r,i,o){let s=e[t],a=e[J],l=a.data[t].outputs[r],p=s[l].subscribe(o);nb(n.index,a,e,i,o,p,!0)}var Ng=Symbol("BINDING");var yl=class extends ba{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=pr(e);return new No(t,this.ngModule)}};function Ex(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&Rl.SignalBased)!==0};return i&&(o.transform=i),o})}function Ix(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function wx(n,e,t){let r=e instanceof Le?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new Rg(t,r):t}function Tx(n){let e=n.get(gi,null);if(e===null)throw new V(407,!1);let t=n.get(KD,null),r=n.get(hr,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function Dx(n,e){let t=rb(n);return gD(e,t,t==="svg"?Vw:t==="math"?jw:null)}function rb(n){return(n.selectors[0][0]||"div").toLowerCase()}var No=class extends xl{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=Ex(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=Ix(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=ZP(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){pe(ce.DynamicComponentStart);let a=X(null);try{let u=this.componentDef,l=bx(r,u,s,o),h=wx(u,i||this.ngModule,e),p=Tx(h),m=p.rendererFactory.createRenderer(null,u),y=r?Tk(m,r,u.encapsulation,h):Dx(u,m),S=s?.some(xT)||o?.some(O=>typeof O!="function"&&O.bindings.some(xT)),M=Bg(null,l,null,512|ED(u),null,null,p,m,h,null,dD(y,h,!0));M[vt]=y,Ju(M);let R=null;try{let O=JD(vt,M,2,"#host",()=>l.directiveRegistry,!0,0);yD(m,y,O),Ao(y,M),Kg(l,M,O),fD(l,O,M),ZD(l,O),t!==void 0&&Sx(O,this.ngContentSelectors,t),R=Ft(O.index,M),M[tt]=R[tt],Jg(l,M,null)}catch(O){throw R!==null&&Ig(R),Ig(M),O}finally{pe(ce.DynamicComponentEnd),Zu()}return new vl(this.componentType,M,!!S)}finally{X(a)}}};function bx(n,e,t,r){let i=n?["ng-version","21.0.3"]:XP(e.selectors[0]),o=null,s=null,a=0;if(t)for(let h of t)a+=h[Ng].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let m of p.bindings){a+=m[Ng].requiredVars;let y=h+1;m.create&&(m.targetIdx=y,(o??=[]).push(m)),m.update&&(m.targetIdx=y,(s??=[]).push(m))}}let u=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,m=kp(p);u.push(m)}return Ug(0,null,Cx(o,s),1,a,u,null,null,null,[i],null)}function Cx(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function xT(n){let e=n[Ng].kind;return e==="input"||e==="twoWay"}var vl=class extends GD{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=Wu(t[J],vt),this.location=bl(this._tNode,t),this.instance=Ft(this._tNode.index,t)[tt],this.hostView=this.changeDetectorRef=new Ir(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=Yg(r,i[J],i,e,t);this.previousInputValues.set(e,t);let s=Ft(r.index,i);Zg(s,1)}get injector(){return new fi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function Sx(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Ii=(()=>{class n{static __NG_ELEMENT_ID__=Ax}return n})();function Ax(){let n=nt();return Nx(n,me())}var Rx=Ii,ib=class extends Rx{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return bl(this._hostTNode,this._hostLView)}get injector(){return new fi(this._hostTNode,this._hostLView)}get parentInjector(){let e=xg(this._hostTNode,this._hostLView);if(QT(e)){let t=dl(e,this._hostLView),r=ll(e),i=t[J].data[r+8];return new fi(i,t)}else return new fi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=OT(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-_t}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=AT(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,ST(this._hostTNode,s)),a}createComponent(e,t,r,i,o,s,a){let u=e&&!uP(e),l;if(u)l=t;else{let R=t||{};l=R.index,r=R.injector,i=R.projectableNodes,o=R.environmentInjector||R.ngModuleRef,s=R.directives,a=R.bindings}let h=u?e:new No(pr(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let O=(u?p:this.parentInjector).get(Le,null);O&&(o=O)}let m=pr(h.componentType??{}),y=AT(this._lContainer,m?.id??null),S=y?.firstChild??null,M=h.create(p,i,S,o,s,a);return this.insertImpl(M.hostView,l,ST(this._hostTNode,y)),M}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(Uw(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[Je],l=new ib(u,u[xt],u[Je]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return Zk(s,i,o,r),e.attachToViewContainerRef(),Rp(hg(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=OT(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Sg(this._lContainer,t);r&&(sa(hg(this._lContainer),t),AD(r[J],r))}detach(e){let t=this._adjustIndex(e,-1),r=Sg(this._lContainer,t);return r&&sa(hg(this._lContainer),t)!=null?new Ir(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function OT(n){return n[fa]}function hg(n){return n[fa]||(n[fa]=[])}function Nx(n,e){let t,r=e[n.index];return zt(r)?t=r:(t=zD(r,e,null,n),e[n.index]=t,$g(e,t)),Px(t,e,n,r),new ib(t,n,e)}function Mx(n,e){let t=n[Te],r=t.createComment(""),i=qt(e,n),o=t.parentNode(i);return pl(t,o,r,t.nextSibling(i),!1),r}var Px=Ox,kx=()=>!1;function xx(n,e,t){return kx(n,e,t)}function Ox(n,e,t,r){if(n[mr])return;let i;t.type&8?i=Lt(r):i=Mx(e,t),n[mr]=i}var yi=class{},Ol=class{};var _l=class extends yi{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new yl(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=Pp(e);this._bootstrapComponents=vD(o.bootstrap),this._r3Injector=ng(e,t,[{provide:yi,useValue:this},{provide:ba,useValue:this.componentFactoryResolver},...r],On(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},El=class extends Ol{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new _l(this.moduleType,e,[])}};var wa=class extends yi{injector;componentFactoryResolver=new yl(this);instance=null;constructor(e){super();let t=new ri([...e.providers,{provide:yi,useValue:this},{provide:ba,useValue:this.componentFactoryResolver}],e.parent||ca(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Ca(n,e,t=null){return new wa({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var Lx=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=xp(!1,t.type),i=r.length>0?Ca([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=U({token:n,providedIn:"environment",factory:()=>new n(K(Le))})}return n})();function em(n){return Po(()=>{let e=ob(n),t=Z(N({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Lg.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(Lx).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Qt.Emulated,styles:n.styles||Tt,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Ml("NgStandalone"),sb(t);let r=n.dependencies;return t.directiveDefs=LT(r,Fx),t.pipeDefs=LT(r,Mw),t.id=Ux(t),t})}function Fx(n){return pr(n)||kp(n)}function Sa(n){return Po(()=>({type:n.type,bootstrap:n.bootstrap||Tt,declarations:n.declarations||Tt,imports:n.imports||Tt,exports:n.exports||Tt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Vx(n,e){if(n==null)return fr;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=Rl.None,u=null),t[o]=[r,a,u],e[o]=s}return t}function jx(n){if(n==null)return fr;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function ko(n){return Po(()=>{let e=ob(n);return sb(e),e})}function ob(n){let e={};return{type:n.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||fr,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Tt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:Vx(n.inputs,e),outputs:jx(n.outputs),debugInfo:null}}function sb(n){n.features?.forEach(e=>e(n))}function LT(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let o=e(i);o!==null&&r.push(o)}return r}:null}function Ux(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Bx(n){return Object.getPrototypeOf(n.prototype).constructor}function ab(n){let e=Bx(n.type),t=!0,r=[n];for(;e;){let i;if(pn(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new V(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=fg(n.inputs),s.declaredInputs=fg(n.declaredInputs),s.outputs=fg(n.outputs);let a=i.hostBindings;a&&Gx(n,a);let u=i.viewQuery,l=i.contentQueries;if(u&&zx(n,u),l&&qx(n,l),$x(n,i),Tw(n.outputs,i.outputs),pn(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===ab&&(t=!1)}}e=Object.getPrototypeOf(e)}Hx(r)}function $x(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function Hx(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=So(i.hostAttrs,t=So(t,i.hostAttrs))}}function fg(n){return n===fr?{}:n===Tt?[]:n}function zx(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function qx(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function Gx(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function Wx(n,e,t,r,i,o,s,a){if(t.firstCreatePass){n.mergedAttrs=So(n.mergedAttrs,n.attrs);let h=n.tView=Ug(2,n,i,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),h.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),To(n,!1);let u=Qx(t,e,n,r);el()&&Gg(t,e,u,n),Ao(u,e);let l=zD(u,e,u,n);e[r+vt]=l,$g(e,l),xx(l,n,e)}function Kx(n,e,t,r,i,o,s,a,u,l,h){let p=t+vt,m;return e.firstCreatePass?(m=kl(e,p,4,s||null,a||null),qp()&&QD(e,n,m,di(e.consts,l),PD),WT(e,m)):m=e.data[p],Wx(m,n,e,t,r,i,o,u),ga(m)&&Kg(e,n,m),l!=null&&Qg(n,m,h),m}function cb(n,e,t,r,i,o,s,a){let u=me(),l=Et(),h=di(l.consts,o);return Kx(u,l,n,e,t,r,i,h,void 0,s,a),cb}var Qx=Yx;function Yx(n,e,t,r){return tl(!0),e[Te].createComment("")}var tm=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function ub(n){return typeof n=="function"&&n[ct]!==void 0}function nm(n){return ub(n)&&typeof n.set=="function"}var rm=new j("");function xo(n){return!!n&&typeof n.then=="function"}function im(n){return!!n&&typeof n.subscribe=="function"}var om=new j("");function lb(n){return Pt([{provide:om,multi:!0,useValue:n}])}var sm=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=k(om,{optional:!0})??[];injector=k(Fe);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=Ve(this.injector,i);if(xo(o))t.push(o);else if(im(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ll=new j("");function db(){Lf(()=>{let n="";throw new V(600,n)})}function hb(n){return n.isBoundToModule}var Jx=10;var Oo=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=k(Gt);afterRenderManager=k(zg);zonelessEnabled=k(va);rootEffectScheduler=k(cg);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new et;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=k(Fn);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(_e(t=>!t))}constructor(){k(Ei,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=k(Le);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Fe.NULL){return this._injector.get(Ee).run(()=>{pe(ce.BootstrapComponentStart);let s=t instanceof xl;if(!this._injector.get(sm).done){let S="";throw new V(405,S)}let u;s?u=t:u=this._injector.get(ba).resolveComponentFactory(t),this.componentTypes.push(u.componentType);let l=hb(u)?void 0:this._injector.get(yi),h=r||u.selector,p=u.create(i,[],h,l),m=p.location.nativeElement,y=p.injector.get(rm,null);return y?.registerApplication(m),p.onDestroy(()=>{this.detachView(p.hostView),Ea(this.components,p),y?.unregisterApplication(m)}),this._loadComponent(p),pe(ce.BootstrapComponentEnd,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){pe(ce.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(Nl.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw pe(ce.ChangeDetectionEnd),new V(101,!1);let t=X(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,X(t),this.afterTick.next(),pe(ce.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(gi,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<Jx;){pe(ce.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{pe(ce.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!ma(i))continue;let o=r&&!this.zonelessEnabled?0:1;UD(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>ma(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Ea(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(Ll,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Ea(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new V(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ea(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function fb(n,e,t,r){let i=me(),o=ya();if(mi(i,o,e)){let s=Et(),a=Xu();Pk(a,i,n,e,t,r)}return fb}var N9=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function pb(n,e,t){let r=me(),i=ya();if(mi(r,i,e)){let o=Et(),s=Xu();MD(s,r,n,e,r[Te],t)}return pb}function FT(n,e,t,r,i){Yg(e,n,t,i?"class":"style",r)}function am(n,e,t,r){let i=me(),o=i[J],s=n+vt,a=o.firstCreatePass?JD(s,i,2,e,PD,qp(),t,r):o.data[s];if(kD(a,i,n,e,yb),ga(a)){let u=i[J];Kg(u,i,a),fD(u,a,i)}return r!=null&&Qg(i,a),am}function cm(){let n=Et(),e=nt(),t=xD(e);return n.firstCreatePass&&ZD(n,t),Gp(t)&&Wp(),zp(),t.classesWithoutHost!=null&&gP(t)&&FT(n,t,me(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&mP(t)&&FT(n,t,me(),t.stylesWithoutHost,!1),cm}function Fl(n,e,t,r){return am(n,e,t,r),cm(),Fl}function gb(n,e,t,r){let i=me(),o=i[J],s=n+vt,a=o.firstCreatePass?mx(s,o,2,e,t,r):o.data[s];return kD(a,i,n,e,yb),r!=null&&Qg(i,a),gb}function mb(){let n=nt(),e=xD(n);return Gp(e)&&Wp(),zp(),mb}var yb=(n,e,t,r,i)=>(tl(!0),gD(e[Te],r,cT()));function Zx(){return me()}var Aa="en-US";var Xx=Aa;function vb(n){typeof n=="string"&&(Xx=n.toLowerCase().replace(/_/g,"-"))}function _b(n,e,t){let r=me(),i=Et(),o=nt();return Ib(i,r,r[Te],o,n,e,t),_b}function Eb(n,e,t){let r=me(),i=Et(),o=nt();return(o.type&3||t)&&tb(o,i,r,t,r[Te],n,e,cl(o,r,e)),Eb}function Ib(n,e,t,r,i,o,s){let a=!0,u=null;if((r.type&3||s)&&(u??=cl(r,e,o),tb(r,n,e,s,t,i,o,u)&&(a=!1)),a){let l=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let m=h[p],y=h[p+1];u??=cl(r,e,o),kT(r,e,m,y,i,u)}if(l&&l.length)for(let p of l)u??=cl(r,e,o),kT(r,e,p,i,i,u)}}function eO(n=1){return aT(n)}function il(n,e){return n<<17|e<<2}function vi(n){return n>>17&32767}function tO(n){return(n&2)==2}function nO(n,e){return n&131071|e<<17}function Mg(n){return n|2}function Mo(n){return(n&131068)>>2}function pg(n,e){return n&-131069|e<<2}function rO(n){return(n&1)===1}function Pg(n){return n|1}function iO(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=vi(s),u=Mo(s);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||yo(p,h)>0)&&(l=!0)}else h=t;if(i)if(u!==0){let m=vi(n[a+1]);n[r+1]=il(m,a),m!==0&&(n[m+1]=pg(n[m+1],r)),n[a+1]=nO(n[a+1],r)}else n[r+1]=il(a,0),a!==0&&(n[a+1]=pg(n[a+1],r)),a=r;else n[r+1]=il(u,0),a===0?a=r:n[u+1]=pg(n[u+1],r),u=r;l&&(n[r+1]=Mg(n[r+1])),VT(n,h,r,!0),VT(n,h,r,!1),oO(e,h,n,r,o),s=il(a,u),o?e.classBindings=s:e.styleBindings=s}function oO(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&yo(o,e)>=0&&(t[r+1]=Pg(t[r+1]))}function VT(n,e,t,r){let i=n[t+1],o=e===null,s=r?vi(i):Mo(i),a=!1;for(;s!==0&&(a===!1||o);){let u=n[s],l=n[s+1];sO(u,e)&&(a=!0,n[s+1]=r?Pg(l):Mg(l)),s=r?vi(l):Mo(l)}a&&(n[t+1]=r?Mg(i):Pg(i))}function sO(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?yo(n,e)>=0:!1}function wb(n,e){return aO(n,e,null,!0),wb}function aO(n,e,t,r){let i=me(),o=Et(),s=Zp(2);if(o.firstUpdatePass&&uO(o,n,s,r),e!==yn&&mi(i,s,e)){let a=o.data[vr()];pO(o,a,i,i[Te],n,i[s+1]=gO(e,t),r,s)}}function cO(n,e){return e>=n.expandoStartIndex}function uO(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[vr()],s=cO(n,t);mO(o,r)&&e===null&&!s&&(e=!1),e=lO(i,o,e,r),iO(i,o,e,t,s,r)}}function lO(n,e,t,r){let i=rT(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=gg(null,n,e,t,r),t=Ta(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=gg(i,n,e,t,r),o===null){let u=dO(n,e,r);u!==void 0&&Array.isArray(u)&&(u=gg(null,n,e,u[1],r),u=Ta(u,e.attrs,r),hO(n,e,r,u))}else o=fO(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function dO(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Mo(r)!==0)return n[vi(r)]}function hO(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[vi(i)]=r}function fO(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Ta(r,s,t)}return Ta(r,e.attrs,t)}function gg(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=Ta(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Ta(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),Nw(n,s,t?!0:e[++o]))}return n===void 0?null:n}function pO(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],h=rO(l)?jT(u,e,t,i,Mo(l),s):void 0;if(!Il(h)){Il(o)||tO(l)&&(o=jT(u,null,t,i,a,s));let p=Up(vr(),t);wk(r,s,p,i,o)}}function jT(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=t[i+1];m===yn&&(m=p?Tt:void 0);let y=p?qu(m,r):h===r?m:void 0;if(l&&!Il(y)&&(y=qu(u,r)),Il(y)&&(a=y,s))return a;let S=n[i+1];i=s?vi(S):Mo(S)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=qu(u,r))}return a}function Il(n){return n!==void 0}function gO(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=On(pD(n)))),n}function mO(n,e){return(n.flags&(e?8:16))!==0}function yO(n,e=""){let t=me(),r=Et(),i=n+vt,o=r.firstCreatePass?kl(r,i,1,e,null):r.data[i],s=vO(r,t,o,e,n);t[i]=s,el()&&Gg(r,t,s,o),To(o,!1)}var vO=(n,e,t,r,i)=>(tl(!0),VP(e[Te],r));function _O(n,e,t,r=""){return mi(n,ya(),t)?e+mo(t)+r:yn}function EO(n,e,t,r,i,o=""){let s=Zw(),a=yx(n,s,t,i);return Zp(2),a?e+mo(t)+r+mo(i)+o:yn}function Tb(n){return um("",n),Tb}function um(n,e,t){let r=me(),i=_O(r,n,e,t);return i!==yn&&bb(r,vr(),i),um}function Db(n,e,t,r,i){let o=me(),s=EO(o,n,e,t,r,i);return s!==yn&&bb(o,vr(),s),Db}function bb(n,e,t){let r=Up(e,n);jP(n[Te],r,t)}function Cb(n,e,t){nm(e)&&(e=e());let r=me(),i=ya();if(mi(r,i,e)){let o=Et(),s=Xu();MD(s,r,n,e,r[Te],t)}return Cb}function IO(n,e){let t=nm(n);return t&&n.set(e),t}function Sb(n,e){let t=me(),r=Et(),i=nt();return Ib(r,t,t[Te],i,n,e),Sb}function UT(n,e,t){let r=Et();r.firstCreatePass&&Ab(e,r.data,r.blueprint,pn(n),t)}function Ab(n,e,t,r,i){if(n=Ye(n),Array.isArray(n))for(let o=0;o<n.length;o++)Ab(n[o],e,t,r,i);else{let o=Et(),s=me(),a=nt(),u=ni(n)?n:Ye(n.provide),l=Lp(n),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(ni(n)||!n.multi){let y=new pi(l,i,vn,null),S=yg(u,e,i?h:h+m,p);S===-1?(_g(hl(a,s),o,u),mg(o,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[S]=y,s[S]=y)}else{let y=yg(u,e,h+m,p),S=yg(u,e,h,h+m),M=y>=0&&t[y],R=S>=0&&t[S];if(i&&!R||!i&&!M){_g(hl(a,s),o,u);let O=DO(i?TO:wO,t.length,i,r,l,n);!i&&R&&(t[S].providerFactory=O),mg(o,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(O),s.push(O)}else{let O=Rb(t[i?S:y],l,!i&&r);mg(o,n,y>-1?y:S,O)}!i&&r&&R&&t[S].componentProviders++}}}function mg(n,e,t,r){let i=ni(e),o=Ow(e);if(i||o){let u=(o?Ye(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,u]):l[h+1].push(r,u)}else l.push(t,u)}}}function Rb(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function yg(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function wO(n,e,t,r,i){return kg(this.multi,[])}function TO(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,u=fl(r,r[J],this.providerFactory.index,i);s=u.slice(0,a),kg(o,s);for(let l=a;l<u.length;l++)s.push(u[l])}else s=[],kg(o,s);return s}function kg(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function DO(n,e,t,r,i,o){let s=new pi(n,t,vn,null);return s.multi=[],s.index=e,s.componentProviders=0,Rb(s,i,r&&!t),s}function bO(n,e){return t=>{t.providersResolver=(r,i)=>UT(r,i?i(n):n,!1),e&&(t.viewProvidersResolver=(r,i)=>UT(r,i?i(e):e,!0))}}var wl=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},lm=(()=>{class n{compileModuleSync(t){return new El(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=Pp(t),o=vD(i.declarations).reduce((s,a)=>{let u=pr(a);return u&&s.push(new No(u)),s},[]);return new wl(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Nb=(()=>{class n{applicationErrorHandler=k(Gt);appRef=k(Oo);taskService=k(Fn);ngZone=k(Ee);zonelessEnabled=k(va);tracing=k(Ei,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new xe;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(ra):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(k(ag,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?ig:rg;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(ra+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,ig(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Mb(){return[{provide:hr,useExisting:Nb},{provide:Ee,useClass:ia},{provide:va,useValue:!0}]}function CO(){return typeof $localize<"u"&&$localize.locale||Aa}var Vl=new j("",{factory:()=>k(Vl,{optional:!0,skipSelf:!0})||CO()});function SO(n,e){return uu(n,e?.equal)}var Ob=Symbol("InputSignalNode#UNSET"),HO=Z(N({},lu),{transformFn:void 0,applyValueToInputSignal(n,e){Qs(n,e)}});function Lb(n,e){let t=Object.create(HO);t.value=n,t.transformFn=e?.transform;function r(){if(Gs(t),t.value===Ob){let i=null;throw new V(-950,i)}return t.value}return r[ct]=t,r}function Pb(n,e){return Lb(n,e)}function zO(n){return Lb(Ob,n)}var Fb=(Pb.required=zO,Pb);var dm=new j(""),qO=new j("");function Ra(n){return!n.moduleRef}function GO(n){let e=Ra(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Ee);return t.run(()=>{Ra(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Gt),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),Ra(n)){let o=()=>e.destroy(),s=n.platformInjector.get(dm);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(dm);s.add(o),n.moduleRef.onDestroy(()=>{Ea(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return KO(r,t,()=>{let o=e.get(Fn),s=o.add(),a=e.get(sm);return a.runInitializers(),a.donePromise.then(()=>{let u=e.get(Vl,Aa);if(vb(u||Aa),!e.get(qO,!0))return Ra(n)?e.get(Oo):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Ra(n)){let h=e.get(Oo);return n.rootComponent!==void 0&&h.bootstrap(n.rootComponent),h}else return WO?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(s))})})}var WO;function KO(n,e,t){try{let r=t();return xo(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var jl=null;function QO(n=[],e){return Fe.create({name:e,providers:[{provide:aa,useValue:"platform"},{provide:dm,useValue:new Set([()=>jl=null])},...n]})}function YO(n=[]){if(jl)return jl;let e=QO(n);return jl=e,db(),JO(e),e}function JO(n){let e=n.get(Sl,null);Ve(n,()=>{e?.forEach(t=>t())})}function mm(){return!1}var ym=(()=>{class n{static __NG_ELEMENT_ID__=ZO}return n})();function ZO(n){return XO(nt(),me(),(n&16)===16)}function XO(n,e,t){if(yr(n)&&!t){let r=Ft(n.index,e);return new Ir(r,r)}else if(n.type&175){let r=e[Ot];return new Ir(r,e)}return null}var hm=class{constructor(){}supports(e){return Xg(e)}create(e){return new fm(e)}},e1=(n,e)=>e,fm=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||e1}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<kb(r,i,o)?t:r,a=kb(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){let y=m<o.length?o[m]:o[m]=0,S=y+m;h<=S&&S<l&&(o[m]=y+1)}let p=s.previousIndex;o[p]=h-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!Xg(e))throw new V(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,XD(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new pm(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Ul),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Ul),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},pm=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},gm=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Ul=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new gm,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function kb(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function xb(){return new vm([new hm])}var vm=(()=>{class n{factories;static \u0275prov=U({token:n,providedIn:"root",factory:xb});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let r=k(n,{optional:!0,skipSelf:!0});return n.create(t,r||xb())}}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new V(901,!1)}}return n})();function Vb(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;pe(ce.BootstrapApplicationStart);try{let o=i?.injector??YO(r),s=[Mb(),hT,...t||[]],a=new wa({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return GO({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{pe(ce.BootstrapApplicationEnd)}}function t1(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}var jb=null;function jn(){return jb}function _m(n){jb??=n}var Na=class{},Bl=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:()=>k(Ub),providedIn:"platform"})}return n})();var Ub=(()=>{class n extends Bl{_location;_history;_doc=k(He);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return jn().getBaseHref(this._doc)}onPopState(t){let r=jn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=jn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function Hb(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function Bb(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function wr(n){return n&&n[0]!=="?"?`?${n}`:n}var $l=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:()=>k(r1),providedIn:"root"})}return n})(),n1=new j(""),r1=(()=>{class n extends $l{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??k(He).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Hb(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+wr(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+wr(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+wr(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(K(Bl),K(n1,8))};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Lo=(()=>{class n{_subject=new et;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=s1(Bb($b(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+wr(r))}normalize(t){return n.stripTrailingSlash(o1(this._basePath,$b(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+wr(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+wr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=wr;static joinWithSlash=Hb;static stripTrailingSlash=Bb;static \u0275fac=function(r){return new(r||n)(K($l))};static \u0275prov=U({token:n,factory:()=>i1(),providedIn:"root"})}return n})();function i1(){return new Lo(K($l))}function o1(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function $b(n){return n.replace(/\/index.html$/,"")}function s1(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Hl=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Gb=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Hl(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),zb(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);zb(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(vn(Ii),vn(Da),vn(vm))};static \u0275dir=ko({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function zb(n,e){n.context.$implicit=e.item}var a1=(()=>{class n{_viewContainer;_context=new zl;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){qb(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){qb(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(vn(Ii),vn(Da))};static \u0275dir=ko({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),zl=class{$implicit=null;ngIf=null};function qb(n,e){if(n&&!n.createEmbeddedView)throw new V(2020,!1)}var Wb=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Sa({type:n});static \u0275inj=go({})}return n})();function Em(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Ma=class{};var Kb="browser";var Pa=class{_doc;constructor(e){this._doc=e}manager},ql=(()=>{class n extends Pa{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(K(He))};static \u0275prov=U({token:n,factory:n.\u0275fac})}return n})(),Kl=new j(""),Dm=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(s=>{s.manager=this});let i=t.filter(s=>!(s instanceof ql));this._plugins=i.slice().reverse();let o=t.find(s=>s instanceof ql);o&&this._plugins.push(o)}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new V(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(K(Kl),K(Ee))};static \u0275prov=U({token:n,factory:n.\u0275fac})}return n})(),Im="ng-app-id";function Qb(n){for(let e of n)e.remove()}function Yb(n,e){let t=e.createElement("style");return t.textContent=n,t}function c1(n,e,t,r){let i=n.head?.querySelectorAll(`style[${Im}="${e}"],link[${Im}="${e}"]`);if(i)for(let o of i)o.removeAttribute(Im),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function Tm(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var bm=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,c1(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,Yb);r?.forEach(i=>this.addUsage(i,this.external,Tm))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(Qb(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])Qb(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,Yb(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,Tm(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(K(He),K(Cl),K(Al,8),K(_i))};static \u0275prov=U({token:n,factory:n.\u0275fac})}return n})(),wm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Cm=/%COMP%/g;var Zb="%COMP%",u1=`_nghost-${Zb}`,l1=`_ngcontent-${Zb}`,d1=!0,h1=new j("",{factory:()=>d1});function f1(n){return l1.replace(Cm,n)}function p1(n){return u1.replace(Cm,n)}function Xb(n,e){return e.map(t=>t.replace(Cm,n))}var Sm=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,u=null,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=u,this.tracingService=l,this.platformIsServer=!1,this.defaultRenderer=new ka(t,s,a,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof Wl?i.applyToHost(t):i instanceof xa&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,m=this.tracingService;switch(r.encapsulation){case Qt.Emulated:o=new Wl(u,l,r,this.appId,h,s,a,p,m);break;case Qt.ShadowDom:return new Gl(u,t,r,s,a,this.nonce,p,m,l);case Qt.ExperimentalIsolatedShadowDom:return new Gl(u,t,r,s,a,this.nonce,p,m);default:o=new xa(u,l,r,h,s,a,p,m);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(K(Dm),K(bm),K(Cl),K(h1),K(He),K(Ee),K(Al),K(Ei,8))};static \u0275prov=U({token:n,factory:n.\u0275fac})}return n})(),ka=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(wm[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Jb(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Jb(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new V(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=wm[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=wm[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(mn.DashCase|mn.Important)?e.style.setProperty(t,r,i&mn.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&mn.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=jn().getGlobalEventTarget(this.doc,e),!e))throw new V(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function Jb(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Gl=class extends ka{hostEl;sharedStylesHost;shadowRoot;constructor(e,t,r,i,o,s,a,u,l){super(e,i,o,a,u),this.hostEl=t,this.sharedStylesHost=l,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let h=r.styles;h=Xb(r.id,h);for(let m of h){let y=document.createElement("style");s&&y.setAttribute("nonce",s),y.textContent=m,this.shadowRoot.appendChild(y)}let p=r.getExternalStyles?.();if(p)for(let m of p){let y=Tm(m,i);s&&y.setAttribute("nonce",s),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},xa=class extends ka{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,a,u),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=l?Xb(l,h):h,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Ro.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Wl=class extends xa{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,u,l){let h=i+"-"+r.id;super(e,t,r,o,s,a,u,l,h),this.contentAttr=f1(h),this.hostAttr=p1(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Ql=class n extends Na{supportsDOMEvents=!0;static makeCurrent(){_m(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=g1();return t==null?null:m1(t)}resetBaseElement(){Oa=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Em(document.cookie,e)}},Oa=null;function g1(){return Oa=Oa||document.head.querySelector("base"),Oa?Oa.getAttribute("href"):null}function m1(n){return new URL(n,document.baseURI).pathname}var y1=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:n.\u0275fac})}return n})(),eC=["alt","control","meta","shift"],v1={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},_1={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},tC=(()=>{class n extends Pa{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>jn().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),eC.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=v1[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),eC.forEach(s=>{if(s!==i){let a=_1[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(K(He))};static \u0275prov=U({token:n,factory:n.\u0275fac})}return n})();function E1(n,e,t){let r=N({rootComponent:n,platformRef:t?.platformRef},I1(e));return Vb(r)}function I1(n){return{appProviders:[...C1,...n?.providers??[]],platformProviders:b1}}function w1(){Ql.makeCurrent()}function T1(){return new hn}function D1(){return Fg(document),document}var b1=[{provide:_i,useValue:Kb},{provide:Sl,useValue:w1,multi:!0},{provide:He,useFactory:D1}];var C1=[{provide:aa,useValue:"root"},{provide:hn,useFactory:T1},{provide:Kl,useClass:ql,multi:!0},{provide:Kl,useClass:tC,multi:!0},Sm,bm,Dm,{provide:gi,useExisting:Sm},{provide:Ma,useClass:y1},[]];var nC=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(K(He))};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var q="primary",Ka=Symbol("RouteTitle"),Pm=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function bi(n){return new Pm(n)}function dC(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function td(n){return new Promise((e,t)=>{n.pipe(kn()).subscribe({next:r=>e(r),error:r=>t(r)})})}function A1(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!_n(n[t],e[t]))return!1;return!0}function _n(n,e){let t=n?km(n):void 0,r=e?km(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!hC(n[i],e[i]))return!1;return!0}function km(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function hC(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function fC(n){return n.length>0?n[n.length-1]:null}function Si(n){return Nu(n)?n:xo(n)?Oe(Promise.resolve(n)):ie(n)}function pC(n){return Nu(n)?td(n):Promise.resolve(n)}var R1={exact:mC,subset:yC},gC={exact:N1,subset:M1,ignored:()=>!0};function rC(n,e,t){return R1[t.paths](n.root,e.root,t.matrixParams)&&gC[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function N1(n,e){return _n(n,e)}function mC(n,e,t){if(!Ti(n.segments,e.segments)||!Zl(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!mC(n.children[r],e.children[r],t))return!1;return!0}function M1(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>hC(n[t],e[t]))}function yC(n,e,t){return vC(n,e,e.segments,t)}function vC(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Ti(i,t)||e.hasChildren()||!Zl(i,t,r))}else if(n.segments.length===t.length){if(!Ti(n.segments,t)||!Zl(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!yC(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Ti(n.segments,i)||!Zl(n.segments,i,r)||!n.children[q]?!1:vC(n.children[q],e,o,r)}}function Zl(n,e,t){return e.every((r,i)=>gC[t](n[i].parameters,r.parameters))}var Jt=class{root;queryParams;fragment;_queryParamMap;constructor(e=new le([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=bi(this.queryParams),this._queryParamMap}toString(){return x1.serialize(this)}},le=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Xl(this)}},Tr=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=bi(this.parameters),this._parameterMap}toString(){return EC(this)}};function P1(n,e){return Ti(n,e)&&n.every((t,r)=>_n(t.parameters,e[r].parameters))}function Ti(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function k1(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===q&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==q&&(t=t.concat(e(i,r)))}),t}var Qa=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:()=>new Dr,providedIn:"root"})}return n})(),Dr=class{parse(e){let t=new Om(e);return new Jt(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${La(e.root,!0)}`,r=F1(e.queryParams),i=typeof e.fragment=="string"?`#${O1(e.fragment)}`:"";return`${t}${r}${i}`}},x1=new Dr;function Xl(n){return n.segments.map(e=>EC(e)).join("/")}function La(n,e){if(!n.hasChildren())return Xl(n);if(e){let t=n.children[q]?La(n.children[q],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==q&&r.push(`${i}:${La(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=k1(n,(r,i)=>i===q?[La(n.children[q],!1)]:[`${i}:${La(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[q]!=null?`${Xl(n)}/${t[0]}`:`${Xl(n)}/(${t.join("//")})`}}function _C(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Yl(n){return _C(n).replace(/%3B/gi,";")}function O1(n){return encodeURI(n)}function xm(n){return _C(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ed(n){return decodeURIComponent(n)}function iC(n){return ed(n.replace(/\+/g,"%20"))}function EC(n){return`${xm(n.path)}${L1(n.parameters)}`}function L1(n){return Object.entries(n).map(([e,t])=>`;${xm(e)}=${xm(t)}`).join("")}function F1(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Yl(t)}=${Yl(i)}`).join("&"):`${Yl(t)}=${Yl(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var V1=/^[^\/()?;#]+/;function Am(n){let e=n.match(V1);return e?e[0]:""}var j1=/^[^\/()?;=#]+/;function U1(n){let e=n.match(j1);return e?e[0]:""}var B1=/^[^=?&#]+/;function $1(n){let e=n.match(B1);return e?e[0]:""}var H1=/^[^&#]+/;function z1(n){let e=n.match(H1);return e?e[0]:""}var Om=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new le([],{}):new le([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[q]=new le(e,t)),r}parseSegment(){let e=Am(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new V(4009,!1);return this.capture(e),new Tr(ed(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=U1(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Am(this.remaining);i&&(r=i,this.capture(r))}e[ed(t)]=ed(r)}parseQueryParam(e){let t=$1(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=z1(this.remaining);s&&(r=s,this.capture(r))}let i=iC(t),o=iC(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Am(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new V(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=q);let s=this.parseChildren();t[o??q]=Object.keys(s).length===1&&s[q]?s[q]:new le([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new V(4011,!1)}};function IC(n){return n.segments.length>0?new le([],{[q]:n}):n}function wC(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=wC(i);if(r===q&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new le(n.segments,e);return q1(t)}function q1(n){if(n.numberOfChildren===1&&n.children[q]){let e=n.children[q];return new le(n.segments.concat(e.segments),e.children)}return n}function Uo(n){return n instanceof Jt}function TC(n,e,t=null,r=null,i=new Dr){let o=DC(n);return bC(o,e,t,r,i)}function DC(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new le(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=IC(r);return e??i}function bC(n,e,t,r,i){let o=n;for(;o.parent;)o=o.parent;if(e.length===0)return Rm(o,o,o,t,r,i);let s=G1(e);if(s.toRoot())return Rm(o,o,new le([],{}),t,r,i);let a=W1(s,o,n),u=a.processChildren?Va(a.segmentGroup,a.index,s.commands):SC(a.segmentGroup,a.index,s.commands);return Rm(o,a.segmentGroup,u,t,r,i)}function nd(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Ba(n){return typeof n=="object"&&n!=null&&n.outlets}function oC(n,e,t){n||="\u0275";let r=new Jt;return r.queryParams={[n]:e},t.parse(t.serialize(r)).queryParams[n]}function Rm(n,e,t,r,i,o){let s={};for(let[l,h]of Object.entries(r??{}))s[l]=Array.isArray(h)?h.map(p=>oC(l,p,o)):oC(l,h,o);let a;n===e?a=t:a=CC(n,e,t);let u=IC(wC(a));return new Jt(u,s,i)}function CC(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=CC(o,e,t)}),new le(n.segments,r)}var rd=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&nd(r[0]))throw new V(4003,!1);let i=r.find(Ba);if(i&&i!==fC(r))throw new V(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function G1(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new rd(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new rd(t,e,r)}var Vo=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function W1(n,e,t){if(n.isAbsolute)return new Vo(e,!0,0);if(!t)return new Vo(e,!1,NaN);if(t.parent===null)return new Vo(t,!0,0);let r=nd(n.commands[0])?0:1,i=t.segments.length-1+r;return K1(t,i,n.numberOfDoubleDots)}function K1(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new V(4005,!1);i=r.segments.length}return new Vo(r,!1,i-o)}function Q1(n){return Ba(n[0])?n[0].outlets:{[q]:n}}function SC(n,e,t){if(n??=new le([],{}),n.segments.length===0&&n.hasChildren())return Va(n,e,t);let r=Y1(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new le(n.segments.slice(0,r.pathIndex),{});return o.children[q]=new le(n.segments.slice(r.pathIndex),n.children),Va(o,0,i)}else return r.match&&i.length===0?new le(n.segments,{}):r.match&&!n.hasChildren()?Lm(n,e,t):r.match?Va(n,0,i):Lm(n,e,t)}function Va(n,e,t){if(t.length===0)return new le(n.segments,{});{let r=Q1(t),i={};if(Object.keys(r).some(o=>o!==q)&&n.children[q]&&n.numberOfChildren===1&&n.children[q].segments.length===0){let o=Va(n.children[q],e,t);return new le(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=SC(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new le(n.segments,i)}}function Y1(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Ba(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!aC(u,l,s))return o;r+=2}else{if(!aC(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Lm(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Ba(o)){let u=J1(o.outlets);return new le(r,u)}if(i===0&&nd(t[0])){let u=n.segments[e];r.push(new Tr(u.path,sC(t[0]))),i++;continue}let s=Ba(o)?o.outlets[q]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&nd(a)?(r.push(new Tr(s,sC(a))),i+=2):(r.push(new Tr(s,{})),i++)}return new le(r,{})}function J1(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Lm(new le([],{}),0,r))}),e}function sC(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function aC(n,e,t){return n==t.path&&_n(e,t.parameters)}var ja="imperative",ze=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(ze||{}),St=class{id;url;constructor(e,t){this.id=e,this.url=t}},Ci=class extends St{type=ze.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Un=class extends St{urlAfterRedirects;type=ze.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},ht=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(ht||{}),$a=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})($a||{}),En=class extends St{reason;code;type=ze.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Bn=class extends St{reason;code;type=ze.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Bo=class extends St{error;target;type=ze.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ha=class extends St{urlAfterRedirects;state;type=ze.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},id=class extends St{urlAfterRedirects;state;type=ze.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},od=class extends St{urlAfterRedirects;state;shouldActivate;type=ze.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},sd=class extends St{urlAfterRedirects;state;type=ze.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ad=class extends St{urlAfterRedirects;state;type=ze.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},cd=class{route;type=ze.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},ud=class{route;type=ze.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},ld=class{snapshot;type=ze.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},dd=class{snapshot;type=ze.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},hd=class{snapshot;type=ze.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},fd=class{snapshot;type=ze.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var za=class{},$o=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function Z1(n){return!(n instanceof za)&&!(n instanceof $o)}function X1(n,e){return n.providers&&!n._injector&&(n._injector=Ca(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Yt(n){return n.outlet||q}function eL(n,e){let t=n.filter(r=>Yt(r)===e);return t.push(...n.filter(r=>Yt(r)!==e)),t}function qo(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var pd=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return qo(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Go(this.rootInjector)}},Go=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new pd(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(K(Le))};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),gd=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Fm(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Fm(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Vm(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Vm(e,this._root).map(t=>t.value)}};function Fm(n,e){if(n===e.value)return e;for(let t of e.children){let r=Fm(n,t);if(r)return r}return null}function Vm(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Vm(n,t);if(r.length)return r.unshift(e),r}return[]}var Ct=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Fo(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var qa=class extends gd{snapshot;constructor(e,t){super(e),this.snapshot=t,zm(this,e)}toString(){return this.snapshot.toString()}};function AC(n){let e=tL(n),t=new Qe([new Tr("",{})]),r=new Qe({}),i=new Qe({}),o=new Qe({}),s=new Qe(""),a=new br(t,r,o,s,i,q,n,e.root);return a.snapshot=e.root,new qa(new Ct(a,[]),e)}function tL(n){let e={},t={},r={},o=new Di([],e,r,"",t,q,n,null,{});return new Ga("",new Ct(o,[]))}var br=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(_e(l=>l[Ka]))??ie(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(_e(e=>bi(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(_e(e=>bi(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function md(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:N(N({},e.params),n.params),data:N(N({},e.data),n.data),resolve:N(N(N(N({},n.data),e.data),i?.data),n._resolvedData)}:r={params:N({},n.params),data:N({},n.data),resolve:N(N({},n.data),n._resolvedData??{})},i&&NC(i)&&(r.resolve[Ka]=i.title),r}var Di=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Ka]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=bi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=bi(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Ga=class extends gd{url;constructor(e,t){super(t),this.url=e,zm(this,t)}toString(){return RC(this._root)}};function zm(n,e){e.value._routerState=n,e.children.forEach(t=>zm(n,t))}function RC(n){let e=n.children.length>0?` { ${n.children.map(RC).join(", ")} } `:"";return`${n.value}${e}`}function Nm(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,_n(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),_n(e.params,t.params)||n.paramsSubject.next(t.params),A1(e.url,t.url)||n.urlSubject.next(t.url),_n(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function jm(n,e){let t=_n(n.params,e.params)&&P1(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||jm(n.parent,e.parent))}function NC(n){return typeof n.title=="string"||n.title===null}var MC=new j(""),qm=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=q;activateEvents=new dt;deactivateEvents=new dt;attachEvents=new dt;detachEvents=new dt;routerOutletData=Fb();parentContexts=k(Go);location=k(Ii);changeDetector=k(ym);inputBinder=k(Ed,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new V(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new V(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new V(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new V(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new Um(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=ko({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Tl]})}return n})(),Um=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===br?this.route:e===Go?this.childContexts:e===MC?this.outletData:this.parent.get(e,t)}},Ed=new j("");var Gm=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=em({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Fl(0,"router-outlet")},dependencies:[qm],encapsulation:2})}return n})();function Wm(n){let e=n.children&&n.children.map(Wm),t=e?Z(N({},n),{children:e}):N({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==q&&(t.component=Gm),t}function nL(n,e,t){let r=Wa(n,e._root,t?t._root:void 0);return new qa(r,e)}function Wa(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=rL(n,e,t);return new Ct(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Wa(n,a)),s}}let r=iL(e.value),i=e.children.map(o=>Wa(n,o));return new Ct(r,i)}}function rL(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Wa(n,r,i);return Wa(n,r)})}function iL(n){return new br(new Qe(n.url),new Qe(n.params),new Qe(n.queryParams),new Qe(n.fragment),new Qe(n.data),n.outlet,n.component,n)}var Ho=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},PC="ngNavigationCancelingError";function yd(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Uo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=kC(!1,ht.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function kC(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[PC]=!0,t.cancellationCode=e,t}function oL(n){return xC(n)&&Uo(n.url)}function xC(n){return!!n&&n[PC]}var sL=(n,e,t,r)=>_e(i=>(new Bm(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),Bm=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Nm(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Fo(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Fo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Fo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Fo(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new fd(o.value.snapshot))}),e.children.length&&this.forwardEvent(new dd(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(Nm(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Nm(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},vd=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},jo=class{component;route;constructor(e,t){this.component=e,this.route=t}};function aL(n,e,t){let r=n._root,i=e?e._root:null;return Fa(r,i,t,[r.value])}function cL(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Wo(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!Ip(n)?n:e.get(n):r}function Fa(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Fo(e);return n.children.forEach(s=>{uL(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Ua(a,t.getContext(s),i)),i}function uL(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=lL(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new vd(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Fa(n,e,a?a.children:null,r,i):Fa(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new jo(a.outlet.component,s))}else s&&Ua(e,a,i),i.canActivateChecks.push(new vd(r)),o.component?Fa(n,null,a?a.children:null,r,i):Fa(n,null,t,r,i);return i}function lL(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Ti(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ti(n.url,e.url)||!_n(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!jm(n,e)||!_n(n.queryParams,e.queryParams);case"paramsChange":default:return!jm(n,e)}}function Ua(n,e,t){let r=Fo(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Ua(s,e.children.getContext(o),t):Ua(s,null,t):Ua(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new jo(e.outlet.component,i)):t.canDeactivateChecks.push(new jo(null,i)):t.canDeactivateChecks.push(new jo(null,i))}function Ya(n){return typeof n=="function"}function dL(n){return typeof n=="boolean"}function hL(n){return n&&Ya(n.canLoad)}function fL(n){return n&&Ya(n.canActivate)}function pL(n){return n&&Ya(n.canActivateChild)}function gL(n){return n&&Ya(n.canDeactivate)}function mL(n){return n&&Ya(n.canMatch)}function OC(n){return n instanceof Zr||n?.name==="EmptyError"}var Jl=Symbol("INITIAL_VALUE");function zo(){return ln(n=>Jf(n.map(e=>e.pipe(Pn(1),ep(Jl)))).pipe(_e(e=>{for(let t of e)if(t!==!0){if(t===Jl)return Jl;if(t===!1||yL(t))return t}return!0}),un(e=>e!==Jl),Pn(1)))}function yL(n){return Uo(n)||n instanceof Ho}function LC(n){return n.aborted?ie(void 0).pipe(Pn(1)):new Y(e=>{let t=()=>{e.next(),e.complete()};return n.addEventListener("abort",t),()=>n.removeEventListener("abort",t)})}function FC(n){return Xs(LC(n))}function vL(n,e){return ut(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?ie(Z(N({},t),{guardsResult:!0})):_L(s,r,i,n).pipe(ut(a=>a&&dL(a)?EL(r,o,n,e):ie(a)),_e(a=>Z(N({},t),{guardsResult:a})))})}function _L(n,e,t,r){return Oe(n).pipe(ut(i=>bL(i.component,i.route,t,e,r)),kn(i=>i!==!0,!0))}function EL(n,e,t,r){return Oe(e).pipe(xu(i=>uo(wL(i.route.parent,r),IL(i.route,r),DL(n,i.path,t),TL(n,i.route,t))),kn(i=>i!==!0,!0))}function IL(n,e){return n!==null&&e&&e(new hd(n)),ie(!0)}function wL(n,e){return n!==null&&e&&e(new ld(n)),ie(!0)}function TL(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ie(!0);let i=r.map(o=>Js(()=>{let s=qo(e)??t,a=Wo(o,s),u=fL(a)?a.canActivate(e,n):Ve(s,()=>a(e,n));return Si(u).pipe(kn())}));return ie(i).pipe(zo())}function DL(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>cL(s)).filter(s=>s!==null).map(s=>Js(()=>{let a=s.guards.map(u=>{let l=qo(s.node)??t,h=Wo(u,l),p=pL(h)?h.canActivateChild(r,n):Ve(l,()=>h(r,n));return Si(p).pipe(kn())});return ie(a).pipe(zo())}));return ie(o).pipe(zo())}function bL(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return ie(!0);let s=o.map(a=>{let u=qo(e)??i,l=Wo(a,u),h=gL(l)?l.canDeactivate(n,e,t,r):Ve(u,()=>l(n,e,t,r));return Si(h).pipe(kn())});return ie(s).pipe(zo())}function CL(n,e,t,r,i){let o=e.canLoad;if(o===void 0||o.length===0)return ie(!0);let s=o.map(a=>{let u=Wo(a,n),l=hL(u)?u.canLoad(e,t):Ve(n,()=>u(e,t)),h=Si(l);return i?h.pipe(FC(i)):h});return ie(s).pipe(zo(),VC(r))}function VC(n){return zf(lt(e=>{if(typeof e!="boolean")throw yd(n,e)}),_e(e=>e===!0))}function SL(n,e,t,r,i){let o=e.canMatch;if(!o||o.length===0)return ie(!0);let s=o.map(a=>{let u=Wo(a,n),l=mL(u)?u.canMatch(e,t):Ve(n,()=>u(e,t)),h=Si(l);return i?h.pipe(FC(i)):h});return ie(s).pipe(zo(),VC(r))}var wi=class jC extends Error{segmentGroup;constructor(e){super(),this.segmentGroup=e||null,Object.setPrototypeOf(this,jC.prototype)}},$m=class UC extends Error{urlTree;constructor(e){super(),this.urlTree=e,Object.setPrototypeOf(this,UC.prototype)}};function AL(n){throw new V(4e3,!1)}function RL(n){throw kC(!1,ht.GuardRejected)}var NL=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}async lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return r;if(i.numberOfChildren>1||!i.children[q])throw AL(`${e.redirectTo}`);i=i.children[q]}}async applyRedirectCommands(e,t,r,i,o){let s=await ML(t,i,o);if(s instanceof Jt)throw new $m(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new $m(a);return a}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Jt(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new le(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new V(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function ML(n,e,t){if(typeof n=="string")return Promise.resolve(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,params:l,data:h,title:p}=e;return td(Si(Ve(t,()=>r({params:l,data:h,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,title:p}))))}var Hm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function PL(n,e,t,r,i,o){let s=BC(n,e,t);return s.matched?(r=X1(e,r),SL(r,e,t,i,o).pipe(_e(a=>a===!0?s:N({},Hm)))):ie(s)}function BC(n,e,t){if(e.path==="**")return kL(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?N({},Hm):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||dC)(t,n,e);if(!i)return N({},Hm);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?N(N({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function kL(n){return{matched:!0,parameters:n.length>0?fC(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function cC(n,e,t,r){return t.length>0&&LL(n,t,r)?{segmentGroup:new le(e,OL(r,new le(t,n.children))),slicedSegments:[]}:t.length===0&&FL(n,t,r)?{segmentGroup:new le(n.segments,xL(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new le(n.segments,n.children),slicedSegments:t}}function xL(n,e,t,r){let i={};for(let o of t)if(Id(n,e,o)&&!r[Yt(o)]){let s=new le([],{});i[Yt(o)]=s}return N(N({},r),i)}function OL(n,e){let t={};t[q]=e;for(let r of n)if(r.path===""&&Yt(r)!==q){let i=new le([],{});t[Yt(r)]=i}return t}function LL(n,e,t){return t.some(r=>Id(n,e,r)&&Yt(r)!==q)}function FL(n,e,t){return t.some(r=>Id(n,e,r))}function Id(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function VL(n,e,t){return e.length===0&&!n.children[t]}var jL=class{};async function UL(n,e,t,r,i,o,s="emptyOnly",a){return new $L(n,e,t,r,i,s,o,a).recognize()}var BL=31,$L=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a,u){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.abortSignal=u,this.applyRedirects=new NL(this.urlSerializer,this.urlTree)}noMatchError(e){return new V(4002,`'${e.segmentGroup}'`)}async recognize(){let e=cC(this.urlTree.root,[],[],this.config).segmentGroup,{children:t,rootSnapshot:r}=await this.match(e),i=new Ct(r,t),o=new Ga("",i),s=TC(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}async match(e){let t=new Di([],Object.freeze({}),Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),q,this.rootComponentType,null,{});try{return{children:await this.processSegmentGroup(this.injector,this.config,e,q,t),rootSnapshot:t}}catch(r){if(r instanceof $m)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof wi?this.noMatchError(r):r}}async processSegmentGroup(e,t,r,i,o){if(r.segments.length===0&&r.hasChildren())return this.processChildren(e,t,r,o);let s=await this.processSegment(e,t,r,r.segments,i,!0,o);return s instanceof Ct?[s]:[]}async processChildren(e,t,r,i){let o=[];for(let u of Object.keys(r.children))u==="primary"?o.unshift(u):o.push(u);let s=[];for(let u of o){let l=r.children[u],h=eL(t,u),p=await this.processSegmentGroup(e,h,l,u,i);s.push(...p)}let a=$C(s);return HL(a),a}async processSegment(e,t,r,i,o,s,a){for(let u of t)try{return await this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,a)}catch(l){if(l instanceof wi||OC(l))continue;throw l}if(VL(r,i,o))return new jL;throw new wi(r)}async processSegmentAgainstRoute(e,t,r,i,o,s,a,u){if(Yt(r)!==s&&(s===q||!Id(i,o,r)))throw new wi(i);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(e,i,r,o,s,u);if(this.allowRedirects&&a)return this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u);throw new wi(i)}async expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=BC(t,i,o);if(!u)throw new wi(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>BL&&(this.allowRedirects=!1));let y=new Di(o,l,Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,uC(i),Yt(i),i.component??i._loadedComponent??null,i,lC(i)),S=md(y,a,this.paramsInheritanceStrategy);if(y.params=Object.freeze(S.params),y.data=Object.freeze(S.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let M=await this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e),R=await this.applyRedirects.lineralizeSegments(i,M);return this.processSegment(e,r,t,R.concat(m),s,!1,a)}async matchSegmentAgainstRoute(e,t,r,i,o,s){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let a=await td(PL(t,r,i,e,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(t.children={}),!a?.matched)throw new wi(t);e=r._injector??e;let{routes:u}=await this.getChildConfig(e,r,i),l=r._loadedInjector??e,{parameters:h,consumedSegments:p,remainingSegments:m}=a,y=new Di(p,h,Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,uC(r),Yt(r),r.component??r._loadedComponent??null,r,lC(r)),S=md(y,s,this.paramsInheritanceStrategy);y.params=Object.freeze(S.params),y.data=Object.freeze(S.data);let{segmentGroup:M,slicedSegments:R}=cC(t,p,m,u);if(R.length===0&&M.hasChildren()){let ue=await this.processChildren(l,u,M,y);return new Ct(y,ue)}if(u.length===0&&R.length===0)return new Ct(y,[]);let O=Yt(r)===o,re=await this.processSegment(l,u,M,R,O?q:o,!0,y);return new Ct(y,re instanceof Ct?[re]:[])}async getChildConfig(e,t,r){if(t.children)return{routes:t.children,injector:e};if(t.loadChildren){if(t._loadedRoutes!==void 0)return{routes:t._loadedRoutes,injector:t._loadedInjector};if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await td(CL(e,t,r,this.urlSerializer,this.abortSignal))){let o=await this.configLoader.loadChildren(e,t);return t._loadedRoutes=o.routes,t._loadedInjector=o.injector,o}throw RL(t)}return{routes:[],injector:e}}};function HL(n){n.sort((e,t)=>e.value.outlet===q?-1:t.value.outlet===q?1:e.value.outlet.localeCompare(t.value.outlet))}function zL(n){let e=n.value.routeConfig;return e&&e.path===""}function $C(n){let e=[],t=new Set;for(let r of n){if(!zL(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=$C(r.children);e.push(new Ct(r.value,i))}return e.filter(r=>!t.has(r))}function uC(n){return n.data||{}}function lC(n){return n.resolve||{}}var qL=new j("",{factory:()=>UL});function GL(n,e,t,r,i,o,s){let a=n.get(qL);return ut(u=>ie(u).pipe(ln(l=>a(n,e,t,r,l.extractedUrl,i,o,s)),_e(({state:l,tree:h})=>Z(N({},u),{targetSnapshot:l,urlAfterRedirects:h}))))}function WL(n,e){return ut(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ie(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of HC(u))s.add(l);let a=0;return Oe(s).pipe(xu(u=>o.has(u)?KL(u,r,n,e):(u.data=md(u,u.parent,n).resolve,ie(void 0))),lt(()=>a++),Ou(1),ut(u=>a===s.size?ie(t):mt))})}function HC(n){let e=n.children.map(t=>HC(t)).flat();return[n,...e]}function KL(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!NC(i)&&(o[Ka]=i.title),Js(()=>(n.data=md(n,n.parent,t).resolve,QL(o,n,e,r).pipe(_e(s=>(n._resolvedData=s,n.data=N(N({},n.data),s),null)))))}function QL(n,e,t,r){let i=km(n);if(i.length===0)return ie({});let o={};return Oe(i).pipe(ut(s=>YL(n[s],e,t,r).pipe(kn(),lt(a=>{if(a instanceof Ho)throw yd(new Dr,a);o[s]=a}))),Ou(1),_e(()=>o),Zs(s=>OC(s)?mt:Yf(s)))}function YL(n,e,t,r){let i=qo(e)??r,o=Wo(n,i),s=o.resolve?o.resolve(e,t):Ve(i,()=>o(e,t));return Si(s)}function Mm(n){return ln(e=>{let t=n(e);return t?Oe(t).pipe(_e(()=>e)):ie(e)})}var Km=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===q);return r}getResolvedTitleForRoute(t){return t.data[Ka]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:()=>k(zC),providedIn:"root"})}return n})(),zC=(()=>{class n extends Km{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(K(nC))};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ja=new j("",{factory:()=>({})}),Za=new j(""),qC=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=k(lm);async loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await pC(Ve(t,()=>r.loadComponent())),s=await KC(WC(o));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s,s}finally{this.componentLoaders.delete(r)}})();return this.componentLoaders.set(r,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await GC(r,this.compiler,t,this.onLoadEndListener);return r._loadedRoutes=o.routes,r._loadedInjector=o.injector,o}finally{this.childrenLoaders.delete(r)}})();return this.childrenLoaders.set(r,i),i}static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();async function GC(n,e,t,r){let i=await pC(Ve(t,()=>n.loadChildren())),o=await KC(WC(i)),s;o instanceof Ol||Array.isArray(o)?s=o:s=await e.compileModuleAsync(o),r&&r(n);let a,u,l=!1;return Array.isArray(s)?(u=s,l=!0):(a=s.create(t).injector,u=a.get(Za,[],{optional:!0,self:!0}).flat()),{routes:u.map(Wm),injector:a}}function JL(n){return n&&typeof n=="object"&&"default"in n}function WC(n){return JL(n)?n.default:n}async function KC(n){return n}var wd=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:()=>k(ZL),providedIn:"root"})}return n})(),ZL=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),QC=new j("");var XL=()=>{},YC=new j(""),JC=(()=>{class n{currentNavigation=hi(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=hi(null);events=new et;transitionAbortWithErrorSubject=new et;configLoader=k(qC);environmentInjector=k(Le);destroyRef=k(Er);urlSerializer=k(Qa);rootContexts=k(Go);location=k(Lo);inputBindingEnabled=k(Ed,{optional:!0})!==null;titleStrategy=k(Km);options=k(Ja,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=k(wd);createViewTransition=k(QC,{optional:!0});navigationErrorHandler=k(YC,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>ie(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new cd(i)),r=i=>this.events.next(new ud(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;Wt(()=>{this.transitions?.next(Z(N({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(t){return this.transitions=new Qe(null),this.transitions.pipe(un(r=>r!==null),ln(r=>{let i=!1,o=new AbortController;return ie(r).pipe(ln(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",ht.SupersededByNewNavigation),mt;this.currentTransition=r;let a=this.lastSuccessfulNavigation();this.currentNavigation.set({id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:a?Z(N({},a),{previousNavigation:null}):null,abort:()=>o.abort()});let u=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),l=s.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!u&&l!=="reload")return this.events.next(new Bn(s.id,this.urlSerializer.serialize(s.rawUrl),"",$a.IgnoredSameUrlNavigation)),s.resolve(!1),mt;if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return ie(s).pipe(ln(h=>(this.events.next(new Ci(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),h.id!==this.navigationId?mt:Promise.resolve(h))),GL(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy,o.signal),lt(h=>{r.targetSnapshot=h.targetSnapshot,r.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation.update(m=>(m.finalUrl=h.urlAfterRedirects,m));let p=new Ha(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:h,extractedUrl:p,source:m,restoredState:y,extras:S}=s,M=new Ci(h,this.urlSerializer.serialize(p),m,y);this.events.next(M);let R=AC(this.rootComponentType).snapshot;return this.currentTransition=r=Z(N({},s),{targetSnapshot:R,urlAfterRedirects:p,extras:Z(N({},S),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(O=>(O.finalUrl=p,O)),ie(r)}else return this.events.next(new Bn(s.id,this.urlSerializer.serialize(s.extractedUrl),"",$a.IgnoredByUrlHandlingStrategy)),s.resolve(!1),mt}),lt(s=>{let a=new id(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),_e(s=>(this.currentTransition=r=Z(N({},s),{guards:aL(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),vL(this.environmentInjector,s=>this.events.next(s)),lt(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw yd(this.urlSerializer,s.guardsResult);let a=new od(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),un(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",ht.GuardRejected),!1)),Mm(s=>{if(s.guards.canActivateChecks.length!==0)return ie(s).pipe(lt(a=>{let u=new sd(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}),ln(a=>{let u=!1;return ie(a).pipe(WL(this.paramsInheritanceStrategy,this.environmentInjector),lt({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(a,"",ht.NoDataFromResolver)}}))}),lt(a=>{let u=new ad(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}))}),Mm(s=>{let a=l=>{let h=[];if(l.routeConfig?._loadedComponent)l.component=l.routeConfig?._loadedComponent;else if(l.routeConfig?.loadComponent){let p=qo(l)??this.environmentInjector;h.push(this.configLoader.loadComponent(p,l.routeConfig).then(m=>{l.component=m}))}for(let p of l.children)h.push(...a(p));return h},u=a(s.targetSnapshot.root);return u.length===0?ie(s):Oe(Promise.all(u).then(()=>s))}),Mm(()=>this.afterPreactivation()),ln(()=>{let{currentSnapshot:s,targetSnapshot:a}=r,u=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return u?Oe(u).pipe(_e(()=>r)):ie(r)}),_e(s=>{let a=nL(t.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=Z(N({},s),{targetRouterState:a}),this.currentNavigation.update(u=>(u.targetRouterState=a,u)),r}),lt(()=>{this.events.next(new za)}),sL(this.rootContexts,t.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),Pn(1),Xs(LC(o.signal).pipe(un(()=>!i&&!r.targetRouterState),lt(()=>{this.cancelNavigationTransition(r,o.signal.reason+"",ht.Aborted)}))),lt({next:s=>{i=!0,this.currentNavigation.update(a=>(a.abort=XL,a)),this.lastSuccessfulNavigation.set(Wt(this.currentNavigation)),this.events.next(new Un(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),Xs(this.transitionAbortWithErrorSubject.pipe(lt(s=>{throw s}))),Xf(()=>{o.abort(),i||this.cancelNavigationTransition(r,"",ht.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Zs(s=>{if(this.destroyed)return r.resolve(!1),mt;if(i=!0,xC(s))this.events.next(new En(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),oL(s)?this.events.next(new $o(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let a=new Bo(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let u=Ve(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(u instanceof Ho){let{message:l,cancellationCode:h}=yd(this.urlSerializer,u);this.events.next(new En(r.id,this.urlSerializer.serialize(r.extractedUrl),l,h)),this.events.next(new $o(u.redirectTo,u.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(u){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(u)}}return mt}))}))}cancelNavigationTransition(t,r,i){let o=new En(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=Wt(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function eF(n){return n!==ja}var ZC=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:()=>k(tF),providedIn:"root"})}return n})(),_d=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},tF=(()=>{class n extends _d{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Dl(n)))(i||n)}})();static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Qm=(()=>{class n{urlSerializer=k(Qa);options=k(Ja,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=k(Lo);urlHandlingStrategy=k(wd);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Jt;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof Jt?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=AC(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:()=>k(XC),providedIn:"root"})}return n})(),XC=(()=>{class n extends Qm{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof Ci?this.updateStateMemento():t instanceof Bn?this.commitTransition(r):t instanceof Ha?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof za?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof En&&t.code!==ht.SupersededByNewNavigation&&t.code!==ht.Redirect?this.restoreHistory(r):t instanceof Bo?this.restoreHistory(r,!0):t instanceof Un&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,u=N(N({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",u)}else{let a=N(N({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Dl(n)))(i||n)}})();static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ym(n,e){n.events.pipe(un(t=>t instanceof Un||t instanceof En||t instanceof Bo||t instanceof Bn),_e(t=>t instanceof Un||t instanceof Bn?0:(t instanceof En?t.code===ht.Redirect||t.code===ht.SupersededByNewNavigation:!1)?2:1),un(t=>t!==2),Pn(1)).subscribe(()=>{e()})}var nF={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},rF={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Td=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=k(tm);stateManager=k(Qm);options=k(Ja,{optional:!0})||{};pendingTasks=k(Fn);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=k(JC);urlSerializer=k(Qa);location=k(Lo);urlHandlingStrategy=k(wd);injector=k(Le);_events=new et;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=k(ZC);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=k(Za,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!k(Ed,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new xe;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=Wt(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof En&&r.code!==ht.Redirect&&r.code!==ht.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Un)this.navigated=!0;else if(r instanceof $o){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=N({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||eF(i.source)},s);this.scheduleNavigation(a,ja,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}Z1(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ja,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=N({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o).catch(u=>{this.disposed||this.injector.get(Gt)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return Wt(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Wm),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=N(N({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=DC(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return bC(p,t,h,l??null,this.urlSerializer)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Uo(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,ja,null,r)}navigate(t,r={skipLocationChange:!1}){return iF(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(po(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=N({},nF):r===!1?i=N({},rF):i=r,Uo(t))return rC(this.currentUrlTree,t,i);let o=this.parseUrl(t);return rC(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,u=m});let h=this.pendingTasks.add();return Ym(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function iF(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new V(4008,!1)}var sF=new j("");function aF(n,...e){return Pt([{provide:Za,multi:!0,useValue:n},[],{provide:br,useFactory:cF},{provide:Ll,multi:!0,useFactory:uF},e.map(t=>t.\u0275providers)])}function cF(){return k(Td).routerState.root}function uF(){let n=k(Fe);return e=>{let t=n.get(Oo);if(e!==t.components[0])return;let r=n.get(Td),i=n.get(lF);n.get(dF)===1&&r.initialNavigation(),n.get(hF,null,{optional:!0})?.setUpPreloading(),n.get(sF,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var lF=new j("",{factory:()=>new et}),dF=new j("",{factory:()=>1});var hF=new j("");var eS=()=>{};var rS=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},pF=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Dd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,u=i+2<n.length,l=u?n[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,m=(a&15)<<2|l>>6,y=l&63;u||(y=64,s||(m=64)),r.push(t[h],t[p],t[m],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(rS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):pF(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new Zm;let m=o<<2|a>>4;if(r.push(m),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let S=l<<6&192|p;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Zm=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},gF=function(n){let e=rS(n);return Dd.encodeByteArray(e,!0)},ec=function(n){return gF(n).replace(/\./g,"")},bd=function(n){try{return Dd.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function ey(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var mF=()=>ey().__FIREBASE_DEFAULTS__,yF=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},vF=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&bd(n[1]);return e&&JSON.parse(e)},Cd=()=>{try{return eS()||mF()||yF()||vF()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},ty=n=>Cd()?.emulatorHosts?.[n],iS=n=>{let e=ty(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},ny=()=>Cd()?.config,ry=n=>Cd()?.[`_${n}`];var Ai=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Cr(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Sd(n){return(await fetch(n,{credentials:"include"})).ok}function oS(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=N({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[ec(JSON.stringify(t)),ec(JSON.stringify(s)),""].join(".")}var Xa={};function _F(){let n={prod:[],emulator:[]};for(let e of Object.keys(Xa))Xa[e]?n.emulator.push(e):n.prod.push(e);return n}function EF(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var tS=!1;function Ad(n,e){if(typeof window>"u"||typeof document>"u"||!Cr(window.location.host)||Xa[n]===e||Xa[n]||tS)return;Xa[n]=e;function t(m){return`__firebase__banner__${m}`}let r="__firebase__banner",o=_F().prod.length>0;function s(){let m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function l(){let m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{tS=!0,s()},m}function h(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){let m=EF(r),y=t("text"),S=document.getElementById(y)||document.createElement("span"),M=t("learnmore"),R=document.getElementById(M)||document.createElement("a"),O=t("preprendIcon"),re=document.getElementById(O)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){let ue=m.element;a(ue),h(R,M);let ot=l();u(re,O),ue.append(re,S,R,ot),document.body.appendChild(ue)}o?(S.innerText="Preview backend disconnected.",re.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(re.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function qe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function sS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qe())}function IF(){let n=Cd()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function aS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function cS(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function uS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function lS(){let n=qe();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function dS(){return!IF()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function tc(){try{return typeof indexedDB=="object"}catch{return!1}}function hS(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}var wF="FirebaseError",At=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=wF,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zt.prototype.create)}},Zt=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?TF(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new At(i,a,r)}};function TF(n,e){return n.replace(DF,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var DF=/\{\$([^}]+)}/g;function fS(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function In(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(nS(o)&&nS(s)){if(!In(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function nS(n){return n!==null&&typeof n=="object"}function Ko(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function pS(n,e){let t=new Xm(n,e);return t.subscribe.bind(t)}var Xm=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");bF(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Jm),i.error===void 0&&(i.error=Jm),i.complete===void 0&&(i.complete=Jm);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function bF(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Jm(){}var kX=14400*1e3;function je(n){return n&&n._delegate?n._delegate:n}var ft=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Ri="[DEFAULT]";var iy=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Ai;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(SF(e))try{this.getOrInitializeService({instanceIdentifier:Ri})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Ri){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ri){return this.instances.has(e)}getOptions(e=Ri){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){let r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);let o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:CF(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ri){return this.component?this.component.multipleInstances?e:Ri:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function CF(n){return n===Ri?void 0:n}function SF(n){return n.instantiationMode==="EAGER"}var Rd=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new iy(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var AF=[],ne=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(ne||{}),RF={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},NF=ne.INFO,MF={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},PF=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=MF[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},wn=class{constructor(e){this.name=e,this._logLevel=NF,this._logHandler=PF,this._userLogHandler=null,AF.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?RF[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...e),this._logHandler(this,ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...e),this._logHandler(this,ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...e),this._logHandler(this,ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...e),this._logHandler(this,ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...e),this._logHandler(this,ne.ERROR,...e)}};var kF=(n,e)=>e.some(t=>n instanceof t),gS,mS;function xF(){return gS||(gS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function OF(){return mS||(mS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var yS=new WeakMap,sy=new WeakMap,vS=new WeakMap,oy=new WeakMap,cy=new WeakMap;function LF(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(Tn(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&yS.set(t,n)}).catch(()=>{}),cy.set(e,n),e}function FF(n){if(sy.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});sy.set(n,e)}var ay={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return sy.get(n);if(e==="objectStoreNames")return n.objectStoreNames||vS.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Tn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function _S(n){ay=n(ay)}function VF(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Nd(this),e,...t);return vS.set(r,e.sort?e.sort():[e]),Tn(r)}:OF().includes(n)?function(...e){return n.apply(Nd(this),e),Tn(yS.get(this))}:function(...e){return Tn(n.apply(Nd(this),e))}}function jF(n){return typeof n=="function"?VF(n):(n instanceof IDBTransaction&&FF(n),kF(n,xF())?new Proxy(n,ay):n)}function Tn(n){if(n instanceof IDBRequest)return LF(n);if(oy.has(n))return oy.get(n);let e=jF(n);return e!==n&&(oy.set(n,e),cy.set(e,n)),e}var Nd=n=>cy.get(n);function IS(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=Tn(s);return r&&s.addEventListener("upgradeneeded",u=>{r(Tn(s.result),u.oldVersion,u.newVersion,Tn(s.transaction),u)}),t&&s.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var UF=["get","getKey","getAll","getAllKeys","count"],BF=["put","add","delete","clear"],uy=new Map;function ES(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(uy.get(e))return uy.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=BF.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||UF.includes(t)))return;let o=async function(s,...a){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[t](...a),i&&u.done]))[0]};return uy.set(e,o),o}_S(n=>Z(N({},n),{get:(e,t,r)=>ES(e,t)||n.get(e,t,r),has:(e,t)=>!!ES(e,t)||n.has(e,t)}));var dy=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if($F(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function $F(n){return n.getComponent()?.type==="VERSION"}var hy="@firebase/app",wS="0.14.6";var $n=new wn("@firebase/app"),HF="@firebase/app-compat",zF="@firebase/analytics-compat",qF="@firebase/analytics",GF="@firebase/app-check-compat",WF="@firebase/app-check",KF="@firebase/auth",QF="@firebase/auth-compat",YF="@firebase/database",JF="@firebase/data-connect",ZF="@firebase/database-compat",XF="@firebase/functions",eV="@firebase/functions-compat",tV="@firebase/installations",nV="@firebase/installations-compat",rV="@firebase/messaging",iV="@firebase/messaging-compat",oV="@firebase/performance",sV="@firebase/performance-compat",aV="@firebase/remote-config",cV="@firebase/remote-config-compat",uV="@firebase/storage",lV="@firebase/storage-compat",dV="@firebase/firestore",hV="@firebase/ai",fV="@firebase/firestore-compat",pV="firebase",gV="12.6.0";var fy="[DEFAULT]",mV={[hy]:"fire-core",[HF]:"fire-core-compat",[qF]:"fire-analytics",[zF]:"fire-analytics-compat",[WF]:"fire-app-check",[GF]:"fire-app-check-compat",[KF]:"fire-auth",[QF]:"fire-auth-compat",[YF]:"fire-rtdb",[JF]:"fire-data-connect",[ZF]:"fire-rtdb-compat",[XF]:"fire-fn",[eV]:"fire-fn-compat",[tV]:"fire-iid",[nV]:"fire-iid-compat",[rV]:"fire-fcm",[iV]:"fire-fcm-compat",[oV]:"fire-perf",[sV]:"fire-perf-compat",[aV]:"fire-rc",[cV]:"fire-rc-compat",[uV]:"fire-gcs",[lV]:"fire-gcs-compat",[dV]:"fire-fst",[fV]:"fire-fst-compat",[hV]:"fire-vertex","fire-js":"fire-js",[pV]:"fire-js-all"};var nc=new Map,yV=new Map,py=new Map;function TS(n,e){try{n.container.addComponent(e)}catch(t){$n.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Xt(n){let e=n.name;if(py.has(e))return $n.debug(`There were multiple attempts to register component ${e}.`),!1;py.set(e,n);for(let t of nc.values())TS(t,n);for(let t of yV.values())TS(t,n);return!0}function Qo(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Rt(n){return n==null?!1:n.settings!==void 0}var vV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Sr=new Zt("app","Firebase",vV);var gy=class{constructor(e,t,r){this._isDeleted=!1,this._options=N({},e),this._config=N({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ft("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Sr.create("app-deleted",{appName:this._name})}};var Ar=gV;function vy(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=N({name:fy,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Sr.create("bad-app-name",{appName:String(i)});if(t||(t=ny()),!t)throw Sr.create("no-options");let o=nc.get(i);if(o){if(In(t,o.options)&&In(r,o.config))return o;throw Sr.create("duplicate-app",{appName:i})}let s=new Rd(i);for(let u of py.values())s.addComponent(u);let a=new gy(t,r,s);return nc.set(i,a),a}function Ni(n=fy){let e=nc.get(n);if(!e&&n===fy&&ny())return vy();if(!e)throw Sr.create("no-app",{appName:n});return e}function Md(){return Array.from(nc.values())}function be(n,e,t){let r=mV[n]??n;t&&(r+=`-${t}`);let i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){let s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),$n.warn(s.join(" "));return}Xt(new ft(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var _V="firebase-heartbeat-database",EV=1,rc="firebase-heartbeat-store",ly=null;function SS(){return ly||(ly=IS(_V,EV,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(rc)}catch(t){console.warn(t)}}}}).catch(n=>{throw Sr.create("idb-open",{originalErrorMessage:n.message})})),ly}async function IV(n){try{let t=(await SS()).transaction(rc),r=await t.objectStore(rc).get(AS(n));return await t.done,r}catch(e){if(e instanceof At)$n.warn(e.message);else{let t=Sr.create("idb-get",{originalErrorMessage:e?.message});$n.warn(t.message)}}}async function DS(n,e){try{let r=(await SS()).transaction(rc,"readwrite");await r.objectStore(rc).put(e,AS(n)),await r.done}catch(t){if(t instanceof At)$n.warn(t.message);else{let r=Sr.create("idb-set",{originalErrorMessage:t?.message});$n.warn(r.message)}}}function AS(n){return`${n.name}!${n.options.appId}`}var wV=1024,TV=30,my=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new yy(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=bS();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>TV){let i=bV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){$n.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=bS(),{heartbeatsToSend:t,unsentEntries:r}=DV(this._heartbeatsCache.heartbeats),i=ec(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return $n.warn(e),""}}};function bS(){return new Date().toISOString().substring(0,10)}function DV(n,e=wV){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),CS(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),CS(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var yy=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return tc()?hS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await IV(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return DS(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return DS(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}};function CS(n){return ec(JSON.stringify({version:2,heartbeats:n})).length}function bV(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function CV(n){Xt(new ft("platform-logger",e=>new dy(e),"PRIVATE")),Xt(new ft("heartbeat",e=>new my(e),"PRIVATE")),be(hy,wS,n),be(hy,wS,"esm2020"),be("fire-js","")}CV("");var SV="firebase",AV="12.6.0";be(SV,AV,"app");function RS(n){n===void 0&&(n=k(Fe));let e=n.get(Do);return t=>new Y(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var Rr=new fo("ANGULARFIRE2_VERSION");function ic(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Jo=(n,e)=>{let t=e?[e]:Md(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Yo=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(Yo||{}),NS=mm()&&typeof Zone<"u"?Yo.WARN:Yo.SILENT;var Pd=class{zone;delegate;constructor(e,t=Qf){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},Nr=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=k(Ee);this.outsideAngular=t.runOutsideAngular(()=>new Pd(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new Pd(typeof Zone>"u"?void 0:Zone.current,Kf))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),MS=!1;function RV(n,e){!MS&&(NS>Yo.SILENT||mm())&&(MS=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),NS>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function NV(n){let e=k(Ee,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function Mi(n){let e=k(Ee,{optional:!0});return e?e.run(()=>n()):n()}var MV=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),Ve(t,()=>Mi(()=>n.apply(void 0,r)))),Ue=(n,e,t)=>(t||=e?Yo.WARN:Yo.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=k(Nr),s=k(Do),a=k(Le)}catch{return RV(n,t),n.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=Mi(()=>s.add())),i[l]=MV(i[l],r,a));let u=NV(()=>n.apply(this,i));return e?u instanceof Y?u.pipe(lr(o.outsideAngular),ur(o.insideAngular),RS(a)):u instanceof Promise?Mi(()=>{let l=s.add();return new Promise((h,p)=>{u.then(m=>Ve(a,()=>Mi(()=>h(m))),m=>Ve(a,()=>Mi(()=>p(m)))).finally(l)})}):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:Mi(()=>u):u instanceof Y?u.pipe(lr(o.outsideAngular),ur(o.insideAngular)):Mi(()=>u)});var Hn=class{constructor(e){return e}},Pi=class{constructor(){return Md()}};function PV(n){return n&&n.length===1?n[0]:new Hn(Ni())}var _y=new j("angularfire2._apps"),kV={provide:Hn,useFactory:PV,deps:[[new bt,_y]]},xV={provide:Pi,deps:[[new bt,_y]]};function OV(n){return(e,t)=>{let r=t.get(_i);be("angularfire",Rr.full,"core"),be("angularfire",Rr.full,"app"),be("angular",yp.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Hn(i)}}function See(n,...e){return Pt([kV,xV,{provide:_y,useFactory:OV(n),multi:!0,deps:[Ee,Fe,Nr,...e]}])}var Aee=Ue(vy,!0);var LV=new Map,FV={activated:!1,tokenObservers:[]},VV={initialized:!1,enabled:!1};function en(n){return LV.get(n)||N({},FV)}function OS(){return VV}var jV="https://content-firebaseappcheck.googleapis.com/v1";var UV="exchangeDebugToken",PS={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},Fee=1440*60*1e3;var wy=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new Ai,this.pending.promise.catch(t=>{}),await BV(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new Ai,this.pending.promise.catch(t=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function BV(n){return new Promise(e=>{setTimeout(e,n)})}var $V={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Mr=new Zt("appCheck","AppCheck",$V);function LS(n){if(!en(n).activated)throw Mr.create("use-before-activation",{appName:n.name})}async function FS({url:n,body:e},t){let r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){let p=await i.getHeartbeatsHeader();p&&(r["X-Firebase-Client"]=p)}let o={method:"POST",body:JSON.stringify(e),headers:r},s;try{s=await fetch(n,o)}catch(p){throw Mr.create("fetch-network-error",{originalErrorMessage:p?.message})}if(s.status!==200)throw Mr.create("fetch-status-error",{httpStatus:s.status});let a;try{a=await s.json()}catch(p){throw Mr.create("fetch-parse-error",{originalErrorMessage:p?.message})}let u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Mr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});let l=Number(u[1])*1e3,h=Date.now();return{token:a.token,expireTimeMillis:h+l,issuedAtTimeMillis:h}}function VS(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${jV}/projects/${t}/apps/${r}:${UV}?key=${i}`,body:{debug_token:e}}}var HV="firebase-app-check-database",zV=1,Ty="firebase-app-check-store";var kd=null;function qV(){return kd||(kd=new Promise((n,e)=>{try{let t=indexedDB.open(HV,zV);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{e(Mr.create("storage-open",{originalErrorMessage:r.target.error?.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Ty,{keyPath:"compositeKey"})}}}catch(t){e(Mr.create("storage-open",{originalErrorMessage:t?.message}))}}),kd)}function GV(n,e){return WV(KV(n),e)}async function WV(n,e){let r=(await qV()).transaction(Ty,"readwrite"),o=r.objectStore(Ty).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{a(Mr.create("storage-set",{originalErrorMessage:u.target.error?.message}))}})}function KV(n){return`${n.options.appId}-${n.name}`}var oc=new wn("@firebase/app-check");function Ey(n,e){return tc()?GV(n,e).catch(t=>{oc.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function jS(){return OS().enabled}async function US(){let n=OS();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}var QV={error:"UNKNOWN_ERROR"};function YV(n){return Dd.encodeString(JSON.stringify(n),!1)}async function Dy(n,e=!1,t=!1){let r=n.app;LS(r);let i=en(r),o=i.token,s;if(o&&!sc(o)&&(i.token=void 0,o=void 0),!o){let l=await i.cachedTokenPromise;l&&(sc(l)?o=l:await Ey(r,void 0))}if(!e&&o&&sc(o))return{token:o.token};let a=!1;if(jS())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=FS(VS(r,await US()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=await i.exchangeTokenPromise;return await Ey(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?oc.warn(l.message):t&&oc.error(l),Iy(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=await en(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?oc.warn(l.message):t&&oc.error(l),s=l}let u;return o?s?sc(o)?u={token:o.token,internalError:s}:u=Iy(s):(u={token:o.token},i.token=o,await Ey(r,o)):u=Iy(s),a&&e2(r,u),u}async function JV(n){let e=n.app;LS(e);let{provider:t}=en(e);if(jS()){let r=await US(),{token:i}=await FS(VS(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=await t.getToken();return{token:r}}}function ZV(n,e,t,r){let{app:i}=n,o=en(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&sc(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),kS(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>kS(n))}function BS(n,e){let t=en(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function kS(n){let{app:e}=n,t=en(e),r=t.tokenRefresher;r||(r=XV(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function XV(n){let{app:e}=n;return new wy(async()=>{let t=en(e),r;if(t.token?r=await Dy(n,!0):r=await Dy(n),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{let t=en(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},PS.RETRIAL_MIN_WAIT,PS.RETRIAL_MAX_WAIT)}function e2(n,e){let t=en(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function sc(n){return n.expireTimeMillis-Date.now()>0}function Iy(n){return{token:YV(QV),error:n}}var by=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=en(this.app);for(let t of e)BS(this.app,t.next);return Promise.resolve()}};function t2(n,e){return new by(n,e)}function n2(n){return{getToken:e=>Dy(n,e),getLimitedUseToken:()=>JV(n),addTokenListener:e=>ZV(n,"INTERNAL",e),removeTokenListener:e=>BS(n.app,e)}}var r2="@firebase/app-check",i2="0.11.0";var o2="app-check",xS="app-check-internal";function s2(){Xt(new ft(o2,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return t2(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(xS).initialize()})),Xt(new ft(xS,n=>{let e=n.getProvider("app-check").getImmediate();return n2(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),be(r2,i2)}s2();var a2="app-check";var Zo=class{constructor(){return Jo(a2)}};var c2=["localhost","0.0.0.0","127.0.0.1"],Yee=typeof window<"u"&&c2.includes(window.location.hostname);function nA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var rA=nA,iA=new Zt("auth","Firebase",nA());var jd=new wn("@firebase/auth");function u2(n,...e){jd.logLevel<=ne.WARN&&jd.warn(`Auth (${Ar}): ${n}`,...e)}function Od(n,...e){jd.logLevel<=ne.ERROR&&jd.error(`Auth (${Ar}): ${n}`,...e)}function bn(n,...e){throw Hy(n,...e)}function tn(n,...e){return Hy(n,...e)}function $y(n,e,t){let r=Z(N({},rA()),{[e]:t});return new Zt("auth","Firebase",r).create(e,{appName:n.name})}function ki(n){return $y(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function l2(n,e,t){let r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&bn(n,"argument-error"),$y(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Hy(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return iA.create(n,...e)}function H(n,e,...t){if(!n)throw Hy(e,...t)}function zn(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Od(e),new Error(e)}function Gn(n,e){n||zn(e)}function Ay(){return typeof self<"u"&&self.location?.href||""}function d2(){return $S()==="http:"||$S()==="https:"}function $S(){return typeof self<"u"&&self.location?.protocol||null}function h2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(d2()||cS()||"connection"in navigator)?navigator.onLine:!0}function f2(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var xi=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Gn(t>e,"Short delay should be less than long delay!"),this.isMobile=sS()||uS()}get(){return h2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function zy(n,e){Gn(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Ud=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;zn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;zn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;zn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var p2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var g2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],m2=new xi(3e4,6e4);function qy(n,e){return n.tenantId&&!e.tenantId?Z(N({},e),{tenantId:n.tenantId}):e}async function es(n,e,t,r,i={}){return oA(n,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});let a=Ko(N({key:n.config.apiKey},s)).slice(1),u=await n._getAdditionalHeaders();u["Content-Type"]="application/json",n.languageCode&&(u["X-Firebase-Locale"]=n.languageCode);let l=N({method:e,headers:u},o);return aS()||(l.referrerPolicy="no-referrer"),n.emulatorConfig&&Cr(n.emulatorConfig.host)&&(l.credentials="include"),Ud.fetch()(await sA(n,n.config.apiHost,t,a),l)})}async function oA(n,e,t){n._canInitEmulator=!1;let r=N(N({},p2),e);try{let i=new Ry(n),o=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=await o.json();if("needConfirmation"in s)throw xd(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw xd(n,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw xd(n,"email-already-in-use",s);if(u==="USER_DISABLED")throw xd(n,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw $y(n,h,l);bn(n,h)}}catch(i){if(i instanceof At)throw i;bn(n,"network-request-failed",{message:String(i)})}}async function y2(n,e,t,r,i={}){let o=await es(n,e,t,r,i);return"mfaPendingCredential"in o&&bn(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function sA(n,e,t,r){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?zy(n.config,i):`${n.config.apiScheme}://${i}`;return g2.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s}var Ry=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(tn(this.auth,"network-request-failed")),m2.get())})}};function xd(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=tn(n,e,r);return i.customData._tokenResponse=t,i}async function v2(n,e){return es(n,"POST","/v1/accounts:delete",e)}async function Bd(n,e){return es(n,"POST","/v1/accounts:lookup",e)}function ac(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Gy(n,e=!1){let t=je(n),r=await t.getIdToken(e),i=Wy(r);H(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:ac(Cy(i.auth_time)),issuedAtTime:ac(Cy(i.iat)),expirationTime:ac(Cy(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}}function Cy(n){return Number(n)*1e3}function Wy(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Od("JWT malformed, contained fewer than 3 sections"),null;try{let i=bd(t);return i?JSON.parse(i):(Od("Failed to decode base64 JWT payload"),null)}catch(i){return Od("Caught error parsing JWT payload as JSON",i?.toString()),null}}function HS(n){let e=Wy(n);return H(e,"internal-error"),H(typeof e.exp<"u","internal-error"),H(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function uc(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof At&&_2(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function _2({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Ny=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var lc=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ac(this.lastLoginAt),this.creationTime=ac(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function $d(n){let e=n.auth,t=await n.getIdToken(),r=await uc(n,Bd(e,{idToken:t}));H(r?.users.length,e,"internal-error");let i=r.users[0];n._notifyReloadListener(i);let o=i.providerUserInfo?.length?aA(i.providerUserInfo):[],s=E2(n.providerData,o),a=n.isAnonymous,u=!(n.email&&i.passwordHash)&&!s?.length,l=a?u:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new lc(i.createdAt,i.lastLoginAt),isAnonymous:l};Object.assign(n,h)}async function Ky(n){let e=je(n);await $d(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function E2(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function aA(n){return n.map(r=>{var i=r,{providerId:e}=i,t=ru(i,["providerId"]);return{providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}})}async function I2(n,e){let t=await oA(n,{},async()=>{let r=Ko({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=await sA(n,i,"/v1/token",`key=${o}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:a,body:r};return n.emulatorConfig&&Cr(n.emulatorConfig.host)&&(u.credentials="include"),Ud.fetch()(s,u)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function w2(n,e){return es(n,"POST","/v2/accounts:revokeToken",qy(n,e))}var cc=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){H(e.idToken,"internal-error"),H(typeof e.idToken<"u","internal-error"),H(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):HS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){H(e.length!==0,"internal-error");let t=HS(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(H(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:i,expiresIn:o}=await I2(e,t);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(H(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(H(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(H(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return zn("not implemented")}};function Pr(n,e){H(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var kr=class n{constructor(o){var s=o,{uid:e,auth:t,stsTokenManager:r}=s,i=ru(s,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ny(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new lc(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){let t=await uc(this,this.stsTokenManager.getToken(this.auth,e));return H(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Gy(this,e)}reload(){return Ky(this)}_assign(e){this!==e&&(H(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>N({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Z(N({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){H(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await $d(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Rt(this.auth.app))return Promise.reject(ki(this.auth));let e=await this.getIdToken();return await uc(this,v2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Z(N({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>N({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){let r=t.displayName??void 0,i=t.email??void 0,o=t.phoneNumber??void 0,s=t.photoURL??void 0,a=t.tenantId??void 0,u=t._redirectEventId??void 0,l=t.createdAt??void 0,h=t.lastLoginAt??void 0,{uid:p,emailVerified:m,isAnonymous:y,providerData:S,stsTokenManager:M}=t;H(p&&M,e,"internal-error");let R=cc.fromJSON(this.name,M);H(typeof p=="string",e,"internal-error"),Pr(r,e.name),Pr(i,e.name),H(typeof m=="boolean",e,"internal-error"),H(typeof y=="boolean",e,"internal-error"),Pr(o,e.name),Pr(s,e.name),Pr(a,e.name),Pr(u,e.name),Pr(l,e.name),Pr(h,e.name);let O=new n({uid:p,auth:e,email:i,emailVerified:m,displayName:r,isAnonymous:y,photoURL:s,phoneNumber:o,tenantId:a,stsTokenManager:R,createdAt:l,lastLoginAt:h});return S&&Array.isArray(S)&&(O.providerData=S.map(re=>N({},re))),u&&(O._redirectEventId=u),O}static async _fromIdTokenResponse(e,t,r=!1){let i=new cc;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await $d(o),o}static async _fromGetAccountInfoResponse(e,t,r){let i=t.users[0];H(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?aA(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new cc;a.updateFromIdToken(r);let u=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new lc(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u}};var zS=new Map;function qn(n){Gn(n instanceof Function,"Expected a class definition");let e=zS.get(n);return e?(Gn(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,zS.set(n,e),e)}var T2=(()=>{class n{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){let r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),My=T2;function Ld(n,e,t){return`firebase:${n}:${e}:${t}`}var Hd=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Ld(this.userKey,i.apiKey,o),this.fullPersistenceKey=Ld("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await Bd(this.auth,{idToken:e}).catch(()=>{});return t?kr._fromGetAccountInfoResponse(this.auth,t,e):null}return kr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new n(qn(My),e,r);let i=(await Promise.all(t.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l),o=i[0]||qn(My),s=Ld(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let h=await l._get(s);if(h){let p;if(typeof h=="string"){let m=await Bd(e,{idToken:h}).catch(()=>{});if(!m)break;p=await kr._fromGetAccountInfoResponse(e,m,h)}else p=kr._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new n(o,e,r):(o=u[0],a&&await o._set(s,a.toJSON()),await Promise.all(t.map(async l=>{if(l!==o)try{await l._remove(s)}catch{}})),new n(o,e,r))}};function qS(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(dA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(cA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(fA(e))return"Blackberry";if(pA(e))return"Webos";if(uA(e))return"Safari";if((e.includes("chrome/")||lA(e))&&!e.includes("edge/"))return"Chrome";if(hA(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function cA(n=qe()){return/firefox\//i.test(n)}function uA(n=qe()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function lA(n=qe()){return/crios\//i.test(n)}function dA(n=qe()){return/iemobile/i.test(n)}function hA(n=qe()){return/android/i.test(n)}function fA(n=qe()){return/blackberry/i.test(n)}function pA(n=qe()){return/webos/i.test(n)}function Qy(n=qe()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function D2(n=qe()){return Qy(n)&&!!window.navigator?.standalone}function b2(){return lS()&&document.documentMode===10}function gA(n=qe()){return Qy(n)||hA(n)||pA(n)||fA(n)||/windows phone/i.test(n)||dA(n)}function mA(n,e=[]){let t;switch(n){case"Browser":t=qS(qe());break;case"Worker":t=`${qS(qe())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ar}/${r}`}var Py=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function C2(n,e={}){return es(n,"GET","/v2/passwordPolicy",qy(n,e))}var S2=6,ky=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??S2,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var xy=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zd(this),this.idTokenSubscription=new zd(this),this.beforeStateQueue=new Py(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=iA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=qn(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Hd.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await Bd(this,{idToken:e}),r=await kr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Rt(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(s,s))}):this.directlySetCurrentUser(null)}let t=await this.assertedPersistence.getCurrentUser(),r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let o=this.redirectUser?._redirectEventId,s=r?._redirectEventId,a=await this.tryRedirectSignIn(e);(!o||o===s)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return H(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await $d(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=f2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Rt(this.app))return Promise.reject(ki(this));let t=e?je(e):null;return t&&H(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&H(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Rt(this.app)?Promise.reject(ki(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Rt(this.app)?Promise.reject(ki(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(qn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await C2(this),t=new ky(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Zt("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await w2(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&qn(e)||this._popupRedirectResolver;H(t,this,"argument-error"),this.redirectPersistenceManager=await Hd.create(this,[qn(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(H(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(t);return()=>{s=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return H(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=mA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);let r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Rt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&u2(`Error while retrieving App Check token: ${e.error}`),e?.token}};function Zd(n){return je(n)}var zd=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=pS(t=>this.observer=t)}get next(){return H(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Yy={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function A2(n){Yy=n}function R2(n){return Yy.loadJS(n)}function N2(){return Yy.gapiScript}function yA(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function Jy(n,e){let t=Qo(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(In(o,e??{}))return i;bn(i,"already-initialized")}return t.initialize({options:e})}function M2(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(qn);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function Zy(n,e,t){let r=Zd(n);H(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=vA(e),{host:s,port:a}=P2(e),u=a===null?"":`:${a}`,l={url:`${o}//${s}${u}/`},h=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){H(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),H(In(l,r.config.emulator)&&In(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Cr(s)?(Sd(`${o}//${s}${u}`),Ad("Auth",!0)):i||k2()}function vA(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function P2(n){let e=vA(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:GS(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:GS(s)}}}function GS(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function k2(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var dc=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return zn("not implemented")}_getIdTokenResponse(e){return zn("not implemented")}_linkToIdToken(e,t){return zn("not implemented")}_getReauthenticationResolver(e){return zn("not implemented")}};async function Xo(n,e){return y2(n,"POST","/v1/accounts:signInWithIdp",qy(n,e))}var x2="http://localhost",qd=class n extends dc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):bn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let a=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=a,o=ru(a,["providerId","signInMethod"]);if(!r||!i)return null;let s=new n(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){let t=this.buildRequest();return Xo(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,Xo(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,Xo(e,t)}buildRequest(){let e={requestUri:x2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ko(t)}return e}};var hc=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Gd=class extends hc{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var O2=(()=>{class n extends Gd{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return qd._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();var fc=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){let o=await kr._fromIdTokenResponse(e,r,i),s=WS(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);let i=WS(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})}};function WS(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Oy=class n extends At{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function _A(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Oy._fromErrorAndOperation(n,o,e,r):o})}async function L2(n,e,t=!1){let r=await uc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return fc._forOperation(n,"link",r)}async function F2(n,e,t=!1){let{auth:r}=n;if(Rt(r.app))return Promise.reject(ki(r));let i="reauthenticate";try{let o=await uc(n,_A(r,i,e,n),t);H(o.idToken,r,"internal-error");let s=Wy(o.idToken);H(s,r,"internal-error");let{sub:a}=s;return H(n.uid===a,r,"user-mismatch"),fc._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&bn(r,"user-mismatch"),o}}async function V2(n,e,t=!1){if(Rt(n.app))return Promise.reject(ki(n));let r="signIn",i=await _A(n,r,e),o=await fc._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(o.user),o}function gc(n,e,t,r){return je(n).onIdTokenChanged(e,t,r)}function Xy(n,e,t){return je(n).beforeAuthStateChanged(e,t)}function ev(n){return je(n).signOut()}var Wd="__sak";var Kd=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Wd,"1"),this.storage.removeItem(Wd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var j2=1e3,U2=10,B2=(()=>{class n extends Kd{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=gA(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);b2()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,U2):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},j2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){let r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}return n.type="LOCAL",n})(),EA=B2;var $2=(()=>{class n extends Kd{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),tv=$2;function H2(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}var z2=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(a).map(async h=>h(r.origin,s)),l=await H2(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function nv(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var Ly=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{let l=nv("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(m.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}};function Dn(){return window}function q2(n){Dn().location.href=n}function IA(){return typeof Dn().WorkerGlobalScope<"u"&&typeof Dn().importScripts=="function"}async function G2(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function W2(){return navigator?.serviceWorker?.controller||null}function K2(){return IA()?self:null}var wA="firebaseLocalStorageDb",Q2=1,Qd="firebaseLocalStorage",TA="fbase_key",Oi=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Xd(n,e){return n.transaction([Qd],e?"readwrite":"readonly").objectStore(Qd)}function Y2(){let n=indexedDB.deleteDatabase(wA);return new Oi(n).toPromise()}function Fy(){let n=indexedDB.open(wA,Q2);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(Qd,{keyPath:TA})}catch(i){t(i)}}),n.addEventListener("success",async()=>{let r=n.result;r.objectStoreNames.contains(Qd)?e(r):(r.close(),await Y2(),e(await Fy()))})})}async function KS(n,e,t){let r=Xd(n,!0).put({[TA]:e,value:t});return new Oi(r).toPromise()}async function J2(n,e){let t=Xd(n,!1).get(e),r=await new Oi(t).toPromise();return r===void 0?null:r.value}function QS(n,e){let t=Xd(n,!0).delete(e);return new Oi(t).toPromise()}var Z2=800,X2=3,ej=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Fy(),this.db)}async _withRetries(t){let r=0;for(;;)try{let i=await this._openDb();return await t(i)}catch(i){if(r++>X2)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return IA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=z2._getInstance(K2()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await G2(),!this.activeServiceWorker)return;this.sender=new Ly(this.activeServiceWorker);let t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||W2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let t=await Fy();return await KS(t,Wd,"1"),await QS(t,Wd),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>KS(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){let r=await this._withRetries(i=>J2(i,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>QS(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){let t=await this._withRetries(o=>{let s=Xd(o,!1).getAll();return new Oi(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Z2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),DA=ej;var ote=yA("rcb"),ste=new xi(3e4,6e4);function bA(n,e){return e?qn(e):(H(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var pc=class extends dc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Xo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Xo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Xo(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function tj(n){return V2(n.auth,new pc(n),n.bypassAuthState)}function nj(n){let{auth:e,user:t}=n;return H(t,e,"internal-error"),F2(t,new pc(n),n.bypassAuthState)}async function rj(n){let{auth:e,user:t}=n;return H(t,e,"internal-error"),L2(t,new pc(n),n.bypassAuthState)}var Yd=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return tj;case"linkViaPopup":case"linkViaRedirect":return rj;case"reauthViaPopup":case"reauthViaRedirect":return nj;default:bn(this.auth,"internal-error")}}resolve(e){Gn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Gn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var ij=new xi(2e3,1e4);async function rv(n,e,t){if(Rt(n.app))return Promise.reject(tn(n,"operation-not-supported-in-this-environment"));let r=Zd(n);l2(n,e,hc);let i=bA(r,t);return new oj(r,"signInViaPopup",e,i).executeNotNull()}var oj=(()=>{class n extends Yd{constructor(t,r,i,o,s){super(t,r,o,s),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}async executeNotNull(){let t=await this.execute();return H(t,this.auth,"internal-error"),t}async onExecution(){Gn(this.filter.length===1,"Popup operations only handle one event");let t=nv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(tn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(tn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(tn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,ij.get())};t()}}n.currentPopupAction=null;return n})(),sj="pendingRedirect",Fd=new Map,Vy=class extends Yd{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Fd.get(this.auth._key());if(!e){try{let r=await aj(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Fd.set(this.auth._key(),e)}return this.bypassAuthState||Fd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function aj(n,e){let t=lj(e),r=uj(n);if(!await r._isAvailable())return!1;let i=await r._get(t)==="true";return await r._remove(t),i}function cj(n,e){Fd.set(n._key(),e)}function uj(n){return qn(n._redirectPersistence)}function lj(n){return Ld(sj,n.config.apiKey,n.name)}async function dj(n,e,t=!1){if(Rt(n.app))return Promise.reject(ki(n));let r=Zd(n),i=bA(r,e),s=await new Vy(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}var hj=600*1e3,jy=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!fj(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!CA(e)){let r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(tn(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=hj&&this.cachedEventUids.clear(),this.cachedEventUids.has(YS(e))}saveEventToCache(e){this.cachedEventUids.add(YS(e)),this.lastProcessedEventTime=Date.now()}};function YS(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function CA({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function fj(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return CA(n);default:return!1}}async function pj(n,e={}){return es(n,"GET","/v1/projects",e)}var gj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mj=/^https?/;async function yj(n){if(n.config.emulator)return;let{authorizedDomains:e}=await pj(n);for(let t of e)try{if(vj(t))return}catch{}bn(n,"unauthorized-domain")}function vj(n){let e=Ay(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!mj.test(t))return!1;if(gj.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var _j=new xi(3e4,6e4);function JS(){let n=Dn().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Ej(n){return new Promise((e,t)=>{function r(){JS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{JS(),t(tn(n,"network-request-failed"))},timeout:_j.get()})}if(Dn().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Dn().gapi?.load)r();else{let i=yA("iframefcb");return Dn()[i]=()=>{gapi.load?r():t(tn(n,"network-request-failed"))},R2(`${N2()}?onload=${i}`).catch(o=>t(o))}}).catch(e=>{throw Vd=null,e})}var Vd=null;function Ij(n){return Vd=Vd||Ej(n),Vd}var wj=new xi(5e3,15e3),Tj="__/auth/iframe",Dj="emulator/auth/iframe",bj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Cj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Sj(n){let e=n.config;H(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?zy(e,Dj):`https://${n.config.authDomain}/${Tj}`,r={apiKey:e.apiKey,appName:n.name,v:Ar},i=Cj.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Ko(r).slice(1)}`}async function Aj(n){let e=await Ij(n),t=Dn().gapi;return H(t,n,"internal-error"),e.open({where:document.body,url:Sj(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:bj,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});let s=tn(n,"network-request-failed"),a=Dn().setTimeout(()=>{o(s)},wj.get());function u(){Dn().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})}))}var Rj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Nj=500,Mj=600,Pj="_blank",kj="http://localhost",Jd=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function xj(n,e,t,r=Nj,i=Mj){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Z(N({},Rj),{width:r.toString(),height:i.toString(),top:o,left:s}),l=qe().toLowerCase();t&&(a=lA(l)?Pj:t),cA(l)&&(e=e||kj,u.scrollbars="yes");let h=Object.entries(u).reduce((m,[y,S])=>`${m}${y}=${S},`,"");if(D2(l)&&a!=="_self")return Oj(e||"",a),new Jd(null);let p=window.open(e||"",a,h);H(p,n,"popup-blocked");try{p.focus()}catch{}return new Jd(p)}function Oj(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var Lj="__/auth/handler",Fj="emulator/auth/handler",Vj=encodeURIComponent("fac");async function ZS(n,e,t,r,i,o){H(n.config.authDomain,n,"auth-domain-config-required"),H(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ar,eventId:i};if(e instanceof hc){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",fS(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof Gd){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=await n._getAppCheckToken(),l=u?`#${Vj}=${encodeURIComponent(u)}`:"";return`${jj(n)}?${Ko(a).slice(1)}${l}`}function jj({config:n}){return n.emulator?zy(n,Fj):`https://${n.authDomain}/${Lj}`}var Sy="webStorageSupport",Uy=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=tv,this._completeRedirectFn=dj,this._overrideRedirectResult=cj}async _openPopup(e,t,r,i){Gn(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");let o=await ZS(e,t,r,Ay(),i);return xj(e,o,nv())}async _openRedirect(e,t,r,i){await this._originValidation(e);let o=await ZS(e,t,r,Ay(),i);return q2(o),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Gn(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){let t=await Aj(e),r=new jy(e);return t.register("authEvent",i=>(H(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Sy,{type:Sy},i=>{let o=i?.[0]?.[Sy];o!==void 0&&t(!!o),bn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=yj(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return gA()||uA()||Qy()}},SA=Uy;var XS="@firebase/auth",eA="1.11.1";var By=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){H(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Uj(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Bj(n){Xt(new ft("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;H(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:mA(n)},l=new xy(r,i,o,u);return M2(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Xt(new ft("auth-internal",e=>{let t=Zd(e.getProvider("auth").getImmediate());return(r=>new By(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),be(XS,eA,Uj(n)),be(XS,eA,"esm2020")}var $j=300,Hj=ry("authIdTokenMaxAge")||$j,tA=null,zj=n=>async e=>{let t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Hj)return;let i=t?.token;tA!==i&&(tA=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function iv(n=Ni()){let e=Qo(n,"auth");if(e.isInitialized())return e.getImmediate();let t=Jy(n,{popupRedirectResolver:SA,persistence:[DA,EA,tv]}),r=ry("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=zj(o.toString());Xy(t,s,()=>s(t.currentUser)),gc(t,a=>s(a))}}let i=ty("auth");return i&&Zy(t,`http://${i}`),t}function qj(){return document.getElementsByTagName("head")?.[0]??document}A2({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=tn("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",qj().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Bj("Browser");function NA(n){return new Y(function(e){var t=gc(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var MA="auth",Li=class{constructor(e){return e}},mc=class{constructor(){return Jo(MA)}};var ov=new j("angularfire2.auth-instances");function xU(n,e){let t=ic(MA,n,e);return t&&new Li(t)}function OU(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Li(r)}}var LU={provide:mc,deps:[[new bt,ov]]},FU={provide:Li,useFactory:xU,deps:[[new bt,ov],Hn]};function Xte(n,...e){return be("angularfire",Rr.full,"auth"),Pt([FU,LU,{provide:ov,useFactory:OU(n),multi:!0,deps:[Ee,Fe,Nr,Pi,[new bt,Zo],...e]}])}var ene=Ue(NA,!0);var tne=Ue(iv,!0);var nne=Ue(rv,!0,2);var rne=Ue(ev,!0,2);var PA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},kA={};var Wn,sv;(function(){var n;function e(w,v){function E(){}E.prototype=v.prototype,w.F=v.prototype,w.prototype=new E,w.prototype.constructor=w,w.D=function(T,I,b){for(var _=Array(arguments.length-2),gt=2;gt<arguments.length;gt++)_[gt-2]=arguments[gt];return v.prototype[I].apply(T,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(w,v,E){E||(E=0);let T=Array(16);if(typeof v=="string")for(var I=0;I<16;++I)T[I]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(I=0;I<16;++I)T[I]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=w.g[0],E=w.g[1],I=w.g[2];let b=w.g[3],_;_=v+(b^E&(I^b))+T[0]+3614090360&4294967295,v=E+(_<<7&4294967295|_>>>25),_=b+(I^v&(E^I))+T[1]+3905402710&4294967295,b=v+(_<<12&4294967295|_>>>20),_=I+(E^b&(v^E))+T[2]+606105819&4294967295,I=b+(_<<17&4294967295|_>>>15),_=E+(v^I&(b^v))+T[3]+3250441966&4294967295,E=I+(_<<22&4294967295|_>>>10),_=v+(b^E&(I^b))+T[4]+4118548399&4294967295,v=E+(_<<7&4294967295|_>>>25),_=b+(I^v&(E^I))+T[5]+1200080426&4294967295,b=v+(_<<12&4294967295|_>>>20),_=I+(E^b&(v^E))+T[6]+2821735955&4294967295,I=b+(_<<17&4294967295|_>>>15),_=E+(v^I&(b^v))+T[7]+4249261313&4294967295,E=I+(_<<22&4294967295|_>>>10),_=v+(b^E&(I^b))+T[8]+1770035416&4294967295,v=E+(_<<7&4294967295|_>>>25),_=b+(I^v&(E^I))+T[9]+2336552879&4294967295,b=v+(_<<12&4294967295|_>>>20),_=I+(E^b&(v^E))+T[10]+4294925233&4294967295,I=b+(_<<17&4294967295|_>>>15),_=E+(v^I&(b^v))+T[11]+2304563134&4294967295,E=I+(_<<22&4294967295|_>>>10),_=v+(b^E&(I^b))+T[12]+1804603682&4294967295,v=E+(_<<7&4294967295|_>>>25),_=b+(I^v&(E^I))+T[13]+4254626195&4294967295,b=v+(_<<12&4294967295|_>>>20),_=I+(E^b&(v^E))+T[14]+2792965006&4294967295,I=b+(_<<17&4294967295|_>>>15),_=E+(v^I&(b^v))+T[15]+1236535329&4294967295,E=I+(_<<22&4294967295|_>>>10),_=v+(I^b&(E^I))+T[1]+4129170786&4294967295,v=E+(_<<5&4294967295|_>>>27),_=b+(E^I&(v^E))+T[6]+3225465664&4294967295,b=v+(_<<9&4294967295|_>>>23),_=I+(v^E&(b^v))+T[11]+643717713&4294967295,I=b+(_<<14&4294967295|_>>>18),_=E+(b^v&(I^b))+T[0]+3921069994&4294967295,E=I+(_<<20&4294967295|_>>>12),_=v+(I^b&(E^I))+T[5]+3593408605&4294967295,v=E+(_<<5&4294967295|_>>>27),_=b+(E^I&(v^E))+T[10]+38016083&4294967295,b=v+(_<<9&4294967295|_>>>23),_=I+(v^E&(b^v))+T[15]+3634488961&4294967295,I=b+(_<<14&4294967295|_>>>18),_=E+(b^v&(I^b))+T[4]+3889429448&4294967295,E=I+(_<<20&4294967295|_>>>12),_=v+(I^b&(E^I))+T[9]+568446438&4294967295,v=E+(_<<5&4294967295|_>>>27),_=b+(E^I&(v^E))+T[14]+3275163606&4294967295,b=v+(_<<9&4294967295|_>>>23),_=I+(v^E&(b^v))+T[3]+4107603335&4294967295,I=b+(_<<14&4294967295|_>>>18),_=E+(b^v&(I^b))+T[8]+1163531501&4294967295,E=I+(_<<20&4294967295|_>>>12),_=v+(I^b&(E^I))+T[13]+2850285829&4294967295,v=E+(_<<5&4294967295|_>>>27),_=b+(E^I&(v^E))+T[2]+4243563512&4294967295,b=v+(_<<9&4294967295|_>>>23),_=I+(v^E&(b^v))+T[7]+1735328473&4294967295,I=b+(_<<14&4294967295|_>>>18),_=E+(b^v&(I^b))+T[12]+2368359562&4294967295,E=I+(_<<20&4294967295|_>>>12),_=v+(E^I^b)+T[5]+4294588738&4294967295,v=E+(_<<4&4294967295|_>>>28),_=b+(v^E^I)+T[8]+2272392833&4294967295,b=v+(_<<11&4294967295|_>>>21),_=I+(b^v^E)+T[11]+1839030562&4294967295,I=b+(_<<16&4294967295|_>>>16),_=E+(I^b^v)+T[14]+4259657740&4294967295,E=I+(_<<23&4294967295|_>>>9),_=v+(E^I^b)+T[1]+2763975236&4294967295,v=E+(_<<4&4294967295|_>>>28),_=b+(v^E^I)+T[4]+1272893353&4294967295,b=v+(_<<11&4294967295|_>>>21),_=I+(b^v^E)+T[7]+4139469664&4294967295,I=b+(_<<16&4294967295|_>>>16),_=E+(I^b^v)+T[10]+3200236656&4294967295,E=I+(_<<23&4294967295|_>>>9),_=v+(E^I^b)+T[13]+681279174&4294967295,v=E+(_<<4&4294967295|_>>>28),_=b+(v^E^I)+T[0]+3936430074&4294967295,b=v+(_<<11&4294967295|_>>>21),_=I+(b^v^E)+T[3]+3572445317&4294967295,I=b+(_<<16&4294967295|_>>>16),_=E+(I^b^v)+T[6]+76029189&4294967295,E=I+(_<<23&4294967295|_>>>9),_=v+(E^I^b)+T[9]+3654602809&4294967295,v=E+(_<<4&4294967295|_>>>28),_=b+(v^E^I)+T[12]+3873151461&4294967295,b=v+(_<<11&4294967295|_>>>21),_=I+(b^v^E)+T[15]+530742520&4294967295,I=b+(_<<16&4294967295|_>>>16),_=E+(I^b^v)+T[2]+3299628645&4294967295,E=I+(_<<23&4294967295|_>>>9),_=v+(I^(E|~b))+T[0]+4096336452&4294967295,v=E+(_<<6&4294967295|_>>>26),_=b+(E^(v|~I))+T[7]+1126891415&4294967295,b=v+(_<<10&4294967295|_>>>22),_=I+(v^(b|~E))+T[14]+2878612391&4294967295,I=b+(_<<15&4294967295|_>>>17),_=E+(b^(I|~v))+T[5]+4237533241&4294967295,E=I+(_<<21&4294967295|_>>>11),_=v+(I^(E|~b))+T[12]+1700485571&4294967295,v=E+(_<<6&4294967295|_>>>26),_=b+(E^(v|~I))+T[3]+2399980690&4294967295,b=v+(_<<10&4294967295|_>>>22),_=I+(v^(b|~E))+T[10]+4293915773&4294967295,I=b+(_<<15&4294967295|_>>>17),_=E+(b^(I|~v))+T[1]+2240044497&4294967295,E=I+(_<<21&4294967295|_>>>11),_=v+(I^(E|~b))+T[8]+1873313359&4294967295,v=E+(_<<6&4294967295|_>>>26),_=b+(E^(v|~I))+T[15]+4264355552&4294967295,b=v+(_<<10&4294967295|_>>>22),_=I+(v^(b|~E))+T[6]+2734768916&4294967295,I=b+(_<<15&4294967295|_>>>17),_=E+(b^(I|~v))+T[13]+1309151649&4294967295,E=I+(_<<21&4294967295|_>>>11),_=v+(I^(E|~b))+T[4]+4149444226&4294967295,v=E+(_<<6&4294967295|_>>>26),_=b+(E^(v|~I))+T[11]+3174756917&4294967295,b=v+(_<<10&4294967295|_>>>22),_=I+(v^(b|~E))+T[2]+718787259&4294967295,I=b+(_<<15&4294967295|_>>>17),_=E+(b^(I|~v))+T[9]+3951481745&4294967295,w.g[0]=w.g[0]+v&4294967295,w.g[1]=w.g[1]+(I+(_<<21&4294967295|_>>>11))&4294967295,w.g[2]=w.g[2]+I&4294967295,w.g[3]=w.g[3]+b&4294967295}r.prototype.v=function(w,v){v===void 0&&(v=w.length);let E=v-this.blockSize,T=this.C,I=this.h,b=0;for(;b<v;){if(I==0)for(;b<=E;)i(this,w,b),b+=this.blockSize;if(typeof w=="string"){for(;b<v;)if(T[I++]=w.charCodeAt(b++),I==this.blockSize){i(this,T),I=0;break}}else for(;b<v;)if(T[I++]=w[b++],I==this.blockSize){i(this,T),I=0;break}}this.h=I,this.o+=v},r.prototype.A=function(){var w=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);w[0]=128;for(var v=1;v<w.length-8;++v)w[v]=0;v=this.o*8;for(var E=w.length-8;E<w.length;++E)w[E]=v&255,v/=256;for(this.v(w),w=Array(16),v=0,E=0;E<4;++E)for(let T=0;T<32;T+=8)w[v++]=this.g[E]>>>T&255;return w};function o(w,v){var E=a;return Object.prototype.hasOwnProperty.call(E,w)?E[w]:E[w]=v(w)}function s(w,v){this.h=v;let E=[],T=!0;for(let I=w.length-1;I>=0;I--){let b=w[I]|0;T&&b==v||(E[I]=b,T=!1)}this.g=E}var a={};function u(w){return-128<=w&&w<128?o(w,function(v){return new s([v|0],v<0?-1:0)}):new s([w|0],w<0?-1:0)}function l(w){if(isNaN(w)||!isFinite(w))return p;if(w<0)return R(l(-w));let v=[],E=1;for(let T=0;w>=E;T++)v[T]=w/E|0,E*=4294967296;return new s(v,0)}function h(w,v){if(w.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(w.charAt(0)=="-")return R(h(w.substring(1),v));if(w.indexOf("-")>=0)throw Error('number format error: interior "-" character');let E=l(Math.pow(v,8)),T=p;for(let b=0;b<w.length;b+=8){var I=Math.min(8,w.length-b);let _=parseInt(w.substring(b,b+I),v);I<8?(I=l(Math.pow(v,I)),T=T.j(I).add(l(_))):(T=T.j(E),T=T.add(l(_)))}return T}var p=u(0),m=u(1),y=u(16777216);n=s.prototype,n.m=function(){if(M(this))return-R(this).m();let w=0,v=1;for(let E=0;E<this.g.length;E++){let T=this.i(E);w+=(T>=0?T:4294967296+T)*v,v*=4294967296}return w},n.toString=function(w){if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(S(this))return"0";if(M(this))return"-"+R(this).toString(w);let v=l(Math.pow(w,6));var E=this;let T="";for(;;){let I=ot(E,v).g;E=O(E,I.j(v));let b=((E.g.length>0?E.g[0]:E.h)>>>0).toString(w);if(E=I,S(E))return b+T;for(;b.length<6;)b="0"+b;T=b+T}},n.i=function(w){return w<0?0:w<this.g.length?this.g[w]:this.h};function S(w){if(w.h!=0)return!1;for(let v=0;v<w.g.length;v++)if(w.g[v]!=0)return!1;return!0}function M(w){return w.h==-1}n.l=function(w){return w=O(this,w),M(w)?-1:S(w)?0:1};function R(w){let v=w.g.length,E=[];for(let T=0;T<v;T++)E[T]=~w.g[T];return new s(E,~w.h).add(m)}n.abs=function(){return M(this)?R(this):this},n.add=function(w){let v=Math.max(this.g.length,w.g.length),E=[],T=0;for(let I=0;I<=v;I++){let b=T+(this.i(I)&65535)+(w.i(I)&65535),_=(b>>>16)+(this.i(I)>>>16)+(w.i(I)>>>16);T=_>>>16,b&=65535,_&=65535,E[I]=_<<16|b}return new s(E,E[E.length-1]&-2147483648?-1:0)};function O(w,v){return w.add(R(v))}n.j=function(w){if(S(this)||S(w))return p;if(M(this))return M(w)?R(this).j(R(w)):R(R(this).j(w));if(M(w))return R(this.j(R(w)));if(this.l(y)<0&&w.l(y)<0)return l(this.m()*w.m());let v=this.g.length+w.g.length,E=[];for(var T=0;T<2*v;T++)E[T]=0;for(T=0;T<this.g.length;T++)for(let I=0;I<w.g.length;I++){let b=this.i(T)>>>16,_=this.i(T)&65535,gt=w.i(I)>>>16,tr=w.i(I)&65535;E[2*T+2*I]+=_*tr,re(E,2*T+2*I),E[2*T+2*I+1]+=b*tr,re(E,2*T+2*I+1),E[2*T+2*I+1]+=_*gt,re(E,2*T+2*I+1),E[2*T+2*I+2]+=b*gt,re(E,2*T+2*I+2)}for(w=0;w<v;w++)E[w]=E[2*w+1]<<16|E[2*w];for(w=v;w<2*v;w++)E[w]=0;return new s(E,0)};function re(w,v){for(;(w[v]&65535)!=w[v];)w[v+1]+=w[v]>>>16,w[v]&=65535,v++}function ue(w,v){this.g=w,this.h=v}function ot(w,v){if(S(v))throw Error("division by zero");if(S(w))return new ue(p,p);if(M(w))return v=ot(R(w),v),new ue(R(v.g),R(v.h));if(M(v))return v=ot(w,R(v)),new ue(R(v.g),v.h);if(w.g.length>30){if(M(w)||M(v))throw Error("slowDivide_ only works with positive integers.");for(var E=m,T=v;T.l(w)<=0;)E=pt(E),T=pt(T);var I=Be(E,1),b=Be(T,1);for(T=Be(T,2),E=Be(E,2);!S(T);){var _=b.add(T);_.l(w)<=0&&(I=I.add(E),b=_),T=Be(T,1),E=Be(E,1)}return v=O(w,I.j(v)),new ue(I,v)}for(I=p;w.l(v)>=0;){for(E=Math.max(1,Math.floor(w.m()/v.m())),T=Math.ceil(Math.log(E)/Math.LN2),T=T<=48?1:Math.pow(2,T-48),b=l(E),_=b.j(v);M(_)||_.l(w)>0;)E-=T,b=l(E),_=b.j(v);S(b)&&(b=m),I=I.add(b),w=O(w,_)}return new ue(I,w)}n.B=function(w){return ot(this,w).h},n.and=function(w){let v=Math.max(this.g.length,w.g.length),E=[];for(let T=0;T<v;T++)E[T]=this.i(T)&w.i(T);return new s(E,this.h&w.h)},n.or=function(w){let v=Math.max(this.g.length,w.g.length),E=[];for(let T=0;T<v;T++)E[T]=this.i(T)|w.i(T);return new s(E,this.h|w.h)},n.xor=function(w){let v=Math.max(this.g.length,w.g.length),E=[];for(let T=0;T<v;T++)E[T]=this.i(T)^w.i(T);return new s(E,this.h^w.h)};function pt(w){let v=w.g.length+1,E=[];for(let T=0;T<v;T++)E[T]=w.i(T)<<1|w.i(T-1)>>>31;return new s(E,w.h)}function Be(w,v){let E=v>>5;v%=32;let T=w.g.length-E,I=[];for(let b=0;b<T;b++)I[b]=v>0?w.i(b+E)>>>v|w.i(b+E+1)<<32-v:w.i(b+E);return new s(I,w.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,sv=kA.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,Wn=kA.Integer=s}).apply(typeof PA<"u"?PA:typeof self<"u"?self:typeof window<"u"?window:{});var eh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Kn={};var av,jU,ts,cv,yc,th,uv,lv,dv;(function(){var n,e=Object.defineProperty;function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof eh=="object"&&eh];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var D=c[g];if(!(D in f))break e;f=f[D]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}i("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(c){return c||function(d){var f=[],g;for(g in d)Object.prototype.hasOwnProperty.call(d,g)&&f.push([g,d[g]]);return f}});var o=o||{},s=this||self;function a(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function u(c,d,f){return c.call.apply(c.bind,arguments)}function l(c,d,f){return l=u,l.apply(null,arguments)}function h(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function p(c,d){function f(){}f.prototype=d.prototype,c.Z=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Ob=function(g,D,C){for(var x=Array(arguments.length-2),ee=2;ee<arguments.length;ee++)x[ee-2]=arguments[ee];return d.prototype[D].apply(g,x)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function y(c){let d=c.length;if(d>0){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function S(c,d){for(let g=1;g<arguments.length;g++){let D=arguments[g];var f=typeof D;if(f=f!="object"?f:D?Array.isArray(D)?"array":f:"null",f=="array"||f=="object"&&typeof D.length=="number"){f=c.length||0;let C=D.length||0;c.length=f+C;for(let x=0;x<C;x++)c[f+x]=D[x]}else c.push(D)}}class M{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return this.h>0?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function R(c){s.setTimeout(()=>{throw c},0)}function O(){var c=w;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class re{constructor(){this.h=this.g=null}add(d,f){let g=ue.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var ue=new M(()=>new ot,c=>c.reset());class ot{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let pt,Be=!1,w=new re,v=()=>{let c=Promise.resolve(void 0);pt=()=>{c.then(E)}};function E(){for(var c;c=O();){try{c.h.call(c.g)}catch(f){R(f)}var d=ue;d.j(c),d.h<100&&(d.h++,c.next=d.g,d.g=c)}Be=!1}function T(){this.u=this.u,this.C=this.C}T.prototype.u=!1,T.prototype.dispose=function(){this.u||(this.u=!0,this.N())},T.prototype[Symbol.dispose]=function(){this.dispose()},T.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function I(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}I.prototype.h=function(){this.defaultPrevented=!0};var b=(function(){if(!s.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};s.addEventListener("test",f,d),s.removeEventListener("test",f,d)}catch{}return c})();function _(c){return/^[\s\xa0]*$/.test(c)}function gt(c,d){I.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,d)}p(gt,I),gt.prototype.init=function(c,d){let f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget,d||(f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement)),this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&gt.Z.h.call(this)},gt.prototype.h=function(){gt.Z.h.call(this);let c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var tr="closure_listenable_"+(Math.random()*1e6|0),dN=0;function hN(c,d,f,g,D){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=D,this.key=++dN,this.da=this.fa=!1}function Uc(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Bc(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function fN(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function xE(c){let d={};for(let f in c)d[f]=c[f];return d}let OE="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function LE(c,d){let f,g;for(let D=1;D<arguments.length;D++){g=arguments[D];for(f in g)c[f]=g[f];for(let C=0;C<OE.length;C++)f=OE[C],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function $c(c){this.src=c,this.g={},this.h=0}$c.prototype.add=function(c,d,f,g,D){let C=c.toString();c=this.g[C],c||(c=this.g[C]=[],this.h++);let x=nf(c,d,g,D);return x>-1?(d=c[x],f||(d.fa=!1)):(d=new hN(d,this.src,C,!!g,D),d.fa=f,c.push(d)),d};function tf(c,d){let f=d.type;if(f in c.g){var g=c.g[f],D=Array.prototype.indexOf.call(g,d,void 0),C;(C=D>=0)&&Array.prototype.splice.call(g,D,1),C&&(Uc(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function nf(c,d,f,g){for(let D=0;D<c.length;++D){let C=c[D];if(!C.da&&C.listener==d&&C.capture==!!f&&C.ha==g)return D}return-1}var rf="closure_lm_"+(Math.random()*1e6|0),of={};function FE(c,d,f,g,D){if(g&&g.once)return jE(c,d,f,g,D);if(Array.isArray(d)){for(let C=0;C<d.length;C++)FE(c,d[C],f,g,D);return null}return f=uf(f),c&&c[tr]?c.J(d,f,a(g)?!!g.capture:!!g,D):VE(c,d,f,!1,g,D)}function VE(c,d,f,g,D,C){if(!d)throw Error("Invalid event type");let x=a(D)?!!D.capture:!!D,ee=af(c);if(ee||(c[rf]=ee=new $c(c)),f=ee.add(d,f,g,x,C),f.proxy)return f;if(g=pN(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)b||(D=x),D===void 0&&(D=!1),c.addEventListener(d.toString(),g,D);else if(c.attachEvent)c.attachEvent(BE(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function pN(){function c(f){return d.call(c.src,c.listener,f)}let d=gN;return c}function jE(c,d,f,g,D){if(Array.isArray(d)){for(let C=0;C<d.length;C++)jE(c,d[C],f,g,D);return null}return f=uf(f),c&&c[tr]?c.K(d,f,a(g)?!!g.capture:!!g,D):VE(c,d,f,!0,g,D)}function UE(c,d,f,g,D){if(Array.isArray(d))for(var C=0;C<d.length;C++)UE(c,d[C],f,g,D);else g=a(g)?!!g.capture:!!g,f=uf(f),c&&c[tr]?(c=c.i,C=String(d).toString(),C in c.g&&(d=c.g[C],f=nf(d,f,g,D),f>-1&&(Uc(d[f]),Array.prototype.splice.call(d,f,1),d.length==0&&(delete c.g[C],c.h--)))):c&&(c=af(c))&&(d=c.g[d.toString()],c=-1,d&&(c=nf(d,f,g,D)),(f=c>-1?d[c]:null)&&sf(f))}function sf(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[tr])tf(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(BE(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=af(d))?(tf(f,c),f.h==0&&(f.src=null,d[rf]=null)):Uc(c)}}}function BE(c){return c in of?of[c]:of[c]="on"+c}function gN(c,d){if(c.da)c=!0;else{d=new gt(d,this);let f=c.listener,g=c.ha||c.src;c.fa&&sf(c),c=f.call(g,d)}return c}function af(c){return c=c[rf],c instanceof $c?c:null}var cf="__closure_events_fn_"+(Math.random()*1e9>>>0);function uf(c){return typeof c=="function"?c:(c[cf]||(c[cf]=function(d){return c.handleEvent(d)}),c[cf])}function Ze(){T.call(this),this.i=new $c(this),this.M=this,this.G=null}p(Ze,T),Ze.prototype[tr]=!0,Ze.prototype.removeEventListener=function(c,d,f,g){UE(this,c,d,f,g)};function st(c,d){var f,g=c.G;if(g)for(f=[];g;g=g.G)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new I(d,c);else if(d instanceof I)d.target=d.target||c;else{var D=d;d=new I(g,c),LE(d,D)}D=!0;let C,x;if(f)for(x=f.length-1;x>=0;x--)C=d.g=f[x],D=Hc(C,g,!0,d)&&D;if(C=d.g=c,D=Hc(C,g,!0,d)&&D,D=Hc(C,g,!1,d)&&D,f)for(x=0;x<f.length;x++)C=d.g=f[x],D=Hc(C,g,!1,d)&&D}Ze.prototype.N=function(){if(Ze.Z.N.call(this),this.i){var c=this.i;for(let d in c.g){let f=c.g[d];for(let g=0;g<f.length;g++)Uc(f[g]);delete c.g[d],c.h--}}this.G=null},Ze.prototype.J=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},Ze.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function Hc(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();let D=!0;for(let C=0;C<d.length;++C){let x=d[C];if(x&&!x.da&&x.capture==f){let ee=x.listener,ke=x.ha||x.src;x.fa&&tf(c.i,x),D=ee.call(ke,g)!==!1&&D}}return D&&!g.defaultPrevented}function mN(c,d){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=l(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(d)>2147483647?-1:s.setTimeout(c,d||0)}function $E(c){c.g=mN(()=>{c.g=null,c.i&&(c.i=!1,$E(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class yN extends T{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:$E(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Rs(c){T.call(this),this.h=c,this.g={}}p(Rs,T);var HE=[];function zE(c){Bc(c.g,function(d,f){this.g.hasOwnProperty(f)&&sf(d)},c),c.g={}}Rs.prototype.N=function(){Rs.Z.N.call(this),zE(this)},Rs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var lf=s.JSON.stringify,vN=s.JSON.parse,_N=class{stringify(c){return s.JSON.stringify(c,void 0)}parse(c){return s.JSON.parse(c,void 0)}};function qE(){}function GE(){}var Ns={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function df(){I.call(this,"d")}p(df,I);function hf(){I.call(this,"c")}p(hf,I);var $r={},WE=null;function zc(){return WE=WE||new Ze}$r.Ia="serverreachability";function KE(c){I.call(this,$r.Ia,c)}p(KE,I);function Ms(c){let d=zc();st(d,new KE(d))}$r.STAT_EVENT="statevent";function QE(c,d){I.call(this,$r.STAT_EVENT,c),this.stat=d}p(QE,I);function at(c){let d=zc();st(d,new QE(d,c))}$r.Ja="timingevent";function YE(c,d){I.call(this,$r.Ja,c),this.size=d}p(YE,I);function Ps(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){c()},d)}function ks(){this.g=!0}ks.prototype.ua=function(){this.g=!1};function EN(c,d,f,g,D,C){c.info(function(){if(c.g)if(C){var x="",ee=C.split("&");for(let ye=0;ye<ee.length;ye++){var ke=ee[ye].split("=");if(ke.length>1){let $e=ke[0];ke=ke[1];let cn=$e.split("_");x=cn.length>=2&&cn[1]=="type"?x+($e+"="+ke+"&"):x+($e+"=redacted&")}}}else x=null;else x=C;return"XMLHTTP REQ ("+g+") [attempt "+D+"]: "+d+`
`+f+`
`+x})}function IN(c,d,f,g,D,C,x){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+D+"]: "+d+`
`+f+`
`+C+" "+x})}function Ji(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+TN(c,f)+(g?" "+g:"")})}function wN(c,d){c.info(function(){return"TIMEOUT: "+d})}ks.prototype.info=function(){};function TN(c,d){if(!c.g)return d;if(!d)return null;try{let C=JSON.parse(d);if(C){for(c=0;c<C.length;c++)if(Array.isArray(C[c])){var f=C[c];if(!(f.length<2)){var g=f[1];if(Array.isArray(g)&&!(g.length<1)){var D=g[0];if(D!="noop"&&D!="stop"&&D!="close")for(let x=1;x<g.length;x++)g[x]=""}}}}return lf(C)}catch{return d}}var qc={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},JE={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ZE;function ff(){}p(ff,qE),ff.prototype.g=function(){return new XMLHttpRequest},ZE=new ff;function xs(c){return encodeURIComponent(String(c))}function DN(c){var d=1;c=c.split(":");let f=[];for(;d>0&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function nr(c,d,f,g){this.j=c,this.i=d,this.l=f,this.S=g||1,this.V=new Rs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new XE}function XE(){this.i=null,this.g="",this.h=!1}var eI={},pf={};function gf(c,d,f){c.M=1,c.A=Wc(an(d)),c.u=f,c.R=!0,tI(c,null)}function tI(c,d){c.F=Date.now(),Gc(c),c.B=an(c.A);var f=c.B,g=c.S;Array.isArray(g)||(g=[String(g)]),pI(f.i,"t",g),c.C=0,f=c.j.L,c.h=new XE,c.g=PI(c.j,f?d:null,!c.u),c.P>0&&(c.O=new yN(l(c.Y,c,c.g),c.P)),d=c.V,f=c.g,g=c.ba;var D="readystatechange";Array.isArray(D)||(D&&(HE[0]=D.toString()),D=HE);for(let C=0;C<D.length;C++){let x=FE(f,D[C],g||d.handleEvent,!1,d.h||d);if(!x)break;d.g[x.key]=x}d=c.J?xE(c.J):{},c.u?(c.v||(c.v="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,d)):(c.v="GET",c.g.ea(c.B,c.v,null,d)),Ms(),EN(c.i,c.v,c.B,c.l,c.S,c.u)}nr.prototype.ba=function(c){c=c.target;let d=this.O;d&&or(c)==3?d.j():this.Y(c)},nr.prototype.Y=function(c){try{if(c==this.g)e:{let ee=or(this.g),ke=this.g.ya(),ye=this.g.ca();if(!(ee<3)&&(ee!=3||this.g&&(this.h.h||this.g.la()||II(this.g)))){this.K||ee!=4||ke==7||(ke==8||ye<=0?Ms(3):Ms(2)),mf(this);var d=this.g.ca();this.X=d;var f=bN(this);if(this.o=d==200,IN(this.i,this.v,this.B,this.l,this.S,ee,d),this.o){if(this.U&&!this.L){t:{if(this.g){var g,D=this.g;if((g=D.g?D.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(g)){var C=g;break t}}C=null}if(c=C)Ji(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,yf(this,c);else{this.o=!1,this.m=3,at(12),Hr(this),Os(this);break e}}if(this.R){c=!0;let $e;for(;!this.K&&this.C<f.length;)if($e=CN(this,f),$e==pf){ee==4&&(this.m=4,at(14),c=!1),Ji(this.i,this.l,null,"[Incomplete Response]");break}else if($e==eI){this.m=4,at(15),Ji(this.i,this.l,f,"[Invalid Chunk]"),c=!1;break}else Ji(this.i,this.l,$e,null),yf(this,$e);if(nI(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ee!=4||f.length!=0||this.h.h||(this.m=1,at(16),c=!1),this.o=this.o&&c,!c)Ji(this.i,this.l,f,"[Invalid Chunked Response]"),Hr(this),Os(this);else if(f.length>0&&!this.W){this.W=!0;var x=this.j;x.g==this&&x.aa&&!x.P&&(x.j.info("Great, no buffering proxy detected. Bytes received: "+f.length),Df(x),x.P=!0,at(11))}}else Ji(this.i,this.l,f,null),yf(this,f);ee==4&&Hr(this),this.o&&!this.K&&(ee==4?AI(this.j,this):(this.o=!1,Gc(this)))}else UN(this.g),d==400&&f.indexOf("Unknown SID")>0?(this.m=3,at(12)):(this.m=0,at(13)),Hr(this),Os(this)}}}catch{}finally{}};function bN(c){if(!nI(c))return c.g.la();let d=II(c.g);if(d==="")return"";let f="",g=d.length,D=or(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return Hr(c),Os(c),"";c.h.i=new s.TextDecoder}for(let C=0;C<g;C++)c.h.h=!0,f+=c.h.i.decode(d[C],{stream:!(D&&C==g-1)});return d.length=0,c.h.g+=f,c.C=0,c.h.g}function nI(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function CN(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?pf:(f=Number(d.substring(f,g)),isNaN(f)?eI:(g+=1,g+f>d.length?pf:(d=d.slice(g,g+f),c.C=g+f,d)))}nr.prototype.cancel=function(){this.K=!0,Hr(this)};function Gc(c){c.T=Date.now()+c.H,rI(c,c.H)}function rI(c,d){if(c.D!=null)throw Error("WatchDog timer not null");c.D=Ps(l(c.aa,c),d)}function mf(c){c.D&&(s.clearTimeout(c.D),c.D=null)}nr.prototype.aa=function(){this.D=null;let c=Date.now();c-this.T>=0?(wN(this.i,this.B),this.M!=2&&(Ms(),at(17)),Hr(this),this.m=2,Os(this)):rI(this,this.T-c)};function Os(c){c.j.I==0||c.K||AI(c.j,c)}function Hr(c){mf(c);var d=c.O;d&&typeof d.dispose=="function"&&d.dispose(),c.O=null,zE(c.V),c.g&&(d=c.g,c.g=null,d.abort(),d.dispose())}function yf(c,d){try{var f=c.j;if(f.I!=0&&(f.g==c||vf(f.h,c))){if(!c.L&&vf(f.h,c)&&f.I==3){try{var g=f.Ba.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var D=g;if(D[0]==0){e:if(!f.v){if(f.g)if(f.g.F+3e3<c.F)Xc(f),Jc(f);else break e;Tf(f),at(18)}}else f.xa=D[1],0<f.xa-f.K&&D[2]<37500&&f.F&&f.A==0&&!f.C&&(f.C=Ps(l(f.Va,f),6e3));sI(f.h)<=1&&f.ta&&(f.ta=void 0)}else qr(f,11)}else if((c.L||f.g==c)&&Xc(f),!_(d))for(D=f.Ba.g.parse(d),d=0;d<D.length;d++){let ye=D[d],$e=ye[0];if(!($e<=f.K))if(f.K=$e,ye=ye[1],f.I==2)if(ye[0]=="c"){f.M=ye[1],f.ba=ye[2];let cn=ye[3];cn!=null&&(f.ka=cn,f.j.info("VER="+f.ka));let Gr=ye[4];Gr!=null&&(f.za=Gr,f.j.info("SVER="+f.za));let sr=ye[5];sr!=null&&typeof sr=="number"&&sr>0&&(g=1.5*sr,f.O=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let ar=c.g;if(ar){let tu=ar.g?ar.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(tu){var C=g.h;C.g||tu.indexOf("spdy")==-1&&tu.indexOf("quic")==-1&&tu.indexOf("h2")==-1||(C.j=C.l,C.g=new Set,C.h&&(_f(C,C.h),C.h=null))}if(g.G){let bf=ar.g?ar.g.getResponseHeader("X-HTTP-Session-Id"):null;bf&&(g.wa=bf,ve(g.J,g.G,bf))}}f.I=3,f.l&&f.l.ra(),f.aa&&(f.T=Date.now()-c.F,f.j.info("Handshake RTT: "+f.T+"ms")),g=f;var x=c;if(g.na=MI(g,g.L?g.ba:null,g.W),x.L){aI(g.h,x);var ee=x,ke=g.O;ke&&(ee.H=ke),ee.D&&(mf(ee),Gc(ee)),g.g=x}else CI(g);f.i.length>0&&Zc(f)}else ye[0]!="stop"&&ye[0]!="close"||qr(f,7);else f.I==3&&(ye[0]=="stop"||ye[0]=="close"?ye[0]=="stop"?qr(f,7):wf(f):ye[0]!="noop"&&f.l&&f.l.qa(ye),f.A=0)}}Ms(4)}catch{}}var SN=class{constructor(c,d){this.g=c,this.map=d}};function iI(c){this.l=c||10,s.PerformanceNavigationTiming?(c=s.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function oI(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function sI(c){return c.h?1:c.g?c.g.size:0}function vf(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function _f(c,d){c.g?c.g.add(d):c.h=d}function aI(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}iI.prototype.cancel=function(){if(this.i=cI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function cI(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.G);return d}return y(c.i)}var uI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function AN(c,d){if(c){c=c.split("&");for(let f=0;f<c.length;f++){let g=c[f].indexOf("="),D,C=null;g>=0?(D=c[f].substring(0,g),C=c[f].substring(g+1)):D=c[f],d(D,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function rr(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let d;c instanceof rr?(this.l=c.l,Ls(this,c.j),this.o=c.o,this.g=c.g,Fs(this,c.u),this.h=c.h,Ef(this,gI(c.i)),this.m=c.m):c&&(d=String(c).match(uI))?(this.l=!1,Ls(this,d[1]||"",!0),this.o=Vs(d[2]||""),this.g=Vs(d[3]||"",!0),Fs(this,d[4]),this.h=Vs(d[5]||"",!0),Ef(this,d[6]||"",!0),this.m=Vs(d[7]||"")):(this.l=!1,this.i=new Us(null,this.l))}rr.prototype.toString=function(){let c=[];var d=this.j;d&&c.push(js(d,lI,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(js(d,lI,!0),"@"),c.push(xs(f).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.u,f!=null&&c.push(":",String(f))),(f=this.h)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(js(f,f.charAt(0)=="/"?MN:NN,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",js(f,kN)),c.join("")},rr.prototype.resolve=function(c){let d=an(this),f=!!c.j;f?Ls(d,c.j):f=!!c.o,f?d.o=c.o:f=!!c.g,f?d.g=c.g:f=c.u!=null;var g=c.h;if(f)Fs(d,c.u);else if(f=!!c.h){if(g.charAt(0)!="/")if(this.g&&!this.h)g="/"+g;else{var D=d.h.lastIndexOf("/");D!=-1&&(g=d.h.slice(0,D+1)+g)}if(D=g,D==".."||D==".")g="";else if(D.indexOf("./")!=-1||D.indexOf("/.")!=-1){g=D.lastIndexOf("/",0)==0,D=D.split("/");let C=[];for(let x=0;x<D.length;){let ee=D[x++];ee=="."?g&&x==D.length&&C.push(""):ee==".."?((C.length>1||C.length==1&&C[0]!="")&&C.pop(),g&&x==D.length&&C.push("")):(C.push(ee),g=!0)}g=C.join("/")}else g=D}return f?d.h=g:f=c.i.toString()!=="",f?Ef(d,gI(c.i)):f=!!c.m,f&&(d.m=c.m),d};function an(c){return new rr(c)}function Ls(c,d,f){c.j=f?Vs(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Fs(c,d){if(d){if(d=Number(d),isNaN(d)||d<0)throw Error("Bad port number "+d);c.u=d}else c.u=null}function Ef(c,d,f){d instanceof Us?(c.i=d,xN(c.i,c.l)):(f||(d=js(d,PN)),c.i=new Us(d,c.l))}function ve(c,d,f){c.i.set(d,f)}function Wc(c){return ve(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function Vs(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function js(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,RN),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function RN(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var lI=/[#\/\?@]/g,NN=/[#\?:]/g,MN=/[#\?]/g,PN=/[#\?@]/g,kN=/#/g;function Us(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function zr(c){c.g||(c.g=new Map,c.h=0,c.i&&AN(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=Us.prototype,n.add=function(c,d){zr(this),this.i=null,c=Zi(this,c);let f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function dI(c,d){zr(c),d=Zi(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function hI(c,d){return zr(c),d=Zi(c,d),c.g.has(d)}n.forEach=function(c,d){zr(this),this.g.forEach(function(f,g){f.forEach(function(D){c.call(d,D,g,this)},this)},this)};function fI(c,d){zr(c);let f=[];if(typeof d=="string")hI(c,d)&&(f=f.concat(c.g.get(Zi(c,d))));else for(c=Array.from(c.g.values()),d=0;d<c.length;d++)f=f.concat(c[d]);return f}n.set=function(c,d){return zr(this),this.i=null,c=Zi(this,c),hI(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=fI(this,c),c.length>0?String(c[0]):d):d};function pI(c,d,f){dI(c,d),f.length>0&&(c.i=null,c.g.set(Zi(c,d),y(f)),c.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(let g=0;g<d.length;g++){var f=d[g];let D=xs(f);f=fI(this,f);for(let C=0;C<f.length;C++){let x=D;f[C]!==""&&(x+="="+xs(f[C])),c.push(x)}}return this.i=c.join("&")};function gI(c){let d=new Us;return d.i=c.i,c.g&&(d.g=new Map(c.g),d.h=c.h),d}function Zi(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function xN(c,d){d&&!c.j&&(zr(c),c.i=null,c.g.forEach(function(f,g){let D=g.toLowerCase();g!=D&&(dI(this,g),pI(this,D,f))},c)),c.j=d}function ON(c,d){let f=new ks;if(s.Image){let g=new Image;g.onload=h(ir,f,"TestLoadImage: loaded",!0,d,g),g.onerror=h(ir,f,"TestLoadImage: error",!1,d,g),g.onabort=h(ir,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=h(ir,f,"TestLoadImage: timeout",!1,d,g),s.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function LN(c,d){let f=new ks,g=new AbortController,D=setTimeout(()=>{g.abort(),ir(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(C=>{clearTimeout(D),C.ok?ir(f,"TestPingServer: ok",!0,d):ir(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(D),ir(f,"TestPingServer: error",!1,d)})}function ir(c,d,f,g,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),g(f)}catch{}}function FN(){this.g=new _N}function Kc(c){this.i=c.Sb||null,this.h=c.ab||!1}p(Kc,qE),Kc.prototype.g=function(){return new Qc(this.i,this.h)};function Qc(c,d){Ze.call(this),this.H=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Qc,Ze),n=Qc.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=d,this.readyState=1,$s(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let d={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(d.body=c),(this.H||s).fetch(new Request(this.D,d)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Bs(this)),this.readyState=0},n.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,$s(this)),this.g&&(this.readyState=3,$s(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;mI(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function mI(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}n.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.B.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Bs(this):$s(this),this.readyState==3&&mI(this)}},n.Oa=function(c){this.g&&(this.response=this.responseText=c,Bs(this))},n.Na=function(c){this.g&&(this.response=c,Bs(this))},n.ga=function(){this.g&&Bs(this)};function Bs(c){c.readyState=4,c.l=null,c.j=null,c.B=null,$s(c)}n.setRequestHeader=function(c,d){this.A.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function $s(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Qc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function yI(c){let d="";return Bc(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function If(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=yI(f),typeof c=="string"?f!=null&&xs(f):ve(c,d,f))}function De(c){Ze.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(De,Ze);var VN=/^https?$/i,jN=["POST","PUT"];n=De.prototype,n.Fa=function(c){this.H=c},n.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ZE.g(),this.g.onreadystatechange=m(l(this.Ca,this));try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(C){vI(this,C);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var D in g)f.set(D,g[D]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let C of g.keys())f.set(C,g.get(C));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(C=>C.toLowerCase()=="content-type"),D=s.FormData&&c instanceof s.FormData,!(Array.prototype.indexOf.call(jN,d,void 0)>=0)||g||D||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[C,x]of f)this.g.setRequestHeader(C,x);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(C){vI(this,C)}};function vI(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.o=5,_I(c),Yc(c)}function _I(c){c.A||(c.A=!0,st(c,"complete"),st(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,st(this,"complete"),st(this,"abort"),Yc(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yc(this,!0)),De.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?EI(this):this.Xa())},n.Xa=function(){EI(this)};function EI(c){if(c.h&&typeof o<"u"){if(c.v&&or(c)==4)setTimeout(c.Ca.bind(c),0);else if(st(c,"readystatechange"),or(c)==4){c.h=!1;try{let C=c.ca();e:switch(C){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=C===0){let x=String(c.D).match(uI)[1]||null;!x&&s.self&&s.self.location&&(x=s.self.location.protocol.slice(0,-1)),g=!VN.test(x?x.toLowerCase():"")}f=g}if(f)st(c,"complete"),st(c,"success");else{c.o=6;try{var D=or(c)>2?c.g.statusText:""}catch{D=""}c.l=D+" ["+c.ca()+"]",_I(c)}}finally{Yc(c)}}}}function Yc(c,d){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);let f=c.g;c.g=null,d||st(c,"ready");try{f.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function or(c){return c.g?c.g.readyState:0}n.ca=function(){try{return or(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),vN(d)}};function II(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function UN(c){let d={};c=(c.g&&or(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(_(c[g]))continue;var f=DN(c[g]);let D=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let C=d[D]||[];d[D]=C,C.push(f)}fN(d,function(g){return g.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Hs(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function wI(c){this.za=0,this.i=[],this.j=new ks,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Hs("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Hs("baseRetryDelayMs",5e3,c),this.Za=Hs("retryDelaySeedMs",1e4,c),this.Ta=Hs("forwardChannelMaxRetries",2,c),this.va=Hs("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new iI(c&&c.concurrentRequestLimit),this.Ba=new FN,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=wI.prototype,n.ka=8,n.I=1,n.connect=function(c,d,f,g){at(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.J=MI(this,null,this.W),Zc(this)};function wf(c){if(TI(c),c.I==3){var d=c.V++,f=an(c.J);if(ve(f,"SID",c.M),ve(f,"RID",d),ve(f,"TYPE","terminate"),zs(c,f),d=new nr(c,c.j,d),d.M=2,d.A=Wc(an(f)),f=!1,s.navigator&&s.navigator.sendBeacon)try{f=s.navigator.sendBeacon(d.A.toString(),"")}catch{}!f&&s.Image&&(new Image().src=d.A,f=!0),f||(d.g=PI(d.j,null),d.g.ea(d.A)),d.F=Date.now(),Gc(d)}NI(c)}function Jc(c){c.g&&(Df(c),c.g.cancel(),c.g=null)}function TI(c){Jc(c),c.v&&(s.clearTimeout(c.v),c.v=null),Xc(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&s.clearTimeout(c.m),c.m=null)}function Zc(c){if(!oI(c.h)&&!c.m){c.m=!0;var d=c.Ea;pt||v(),Be||(pt(),Be=!0),w.add(d,c),c.D=0}}function BN(c,d){return sI(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=d.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=Ps(l(c.Ea,c,d),RI(c,c.D)),c.D++,!0)}n.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;let D=new nr(this,this.j,c),C=this.o;if(this.U&&(C?(C=xE(C),LE(C,this.U)):C=this.U),this.u!==null||this.R||(D.J=C,C=null),this.S)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,d>4096){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=bI(this,D,d),f=an(this.J),ve(f,"RID",c),ve(f,"CVER",22),this.G&&ve(f,"X-HTTP-Session-Id",this.G),zs(this,f),C&&(this.R?d="headers="+xs(yI(C))+"&"+d:this.u&&If(f,this.u,C)),_f(this.h,D),this.Ra&&ve(f,"TYPE","init"),this.S?(ve(f,"$req",d),ve(f,"SID","null"),D.U=!0,gf(D,f,null)):gf(D,f,d),this.I=2}}else this.I==3&&(c?DI(this,c):this.i.length==0||oI(this.h)||DI(this))};function DI(c,d){var f;d?f=d.l:f=c.V++;let g=an(c.J);ve(g,"SID",c.M),ve(g,"RID",f),ve(g,"AID",c.K),zs(c,g),c.u&&c.o&&If(g,c.u,c.o),f=new nr(c,c.j,f,c.D+1),c.u===null&&(f.J=c.o),d&&(c.i=d.G.concat(c.i)),d=bI(c,f,1e3),f.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),_f(c.h,f),gf(f,g,d)}function zs(c,d){c.H&&Bc(c.H,function(f,g){ve(d,g,f)}),c.l&&Bc({},function(f,g){ve(d,g,f)})}function bI(c,d,f){f=Math.min(c.i.length,f);let g=c.l?l(c.l.Ka,c.l,c):null;e:{var D=c.i;let ee=-1;for(;;){let ke=["count="+f];ee==-1?f>0?(ee=D[0].g,ke.push("ofs="+ee)):ee=0:ke.push("ofs="+ee);let ye=!0;for(let $e=0;$e<f;$e++){var C=D[$e].g;let cn=D[$e].map;if(C-=ee,C<0)ee=Math.max(0,D[$e].g-100),ye=!1;else try{C="req"+C+"_"||"";try{var x=cn instanceof Map?cn:Object.entries(cn);for(let[Gr,sr]of x){let ar=sr;a(sr)&&(ar=lf(sr)),ke.push(C+Gr+"="+encodeURIComponent(ar))}}catch(Gr){throw ke.push(C+"type="+encodeURIComponent("_badmap")),Gr}}catch{g&&g(cn)}}if(ye){x=ke.join("&");break e}}x=void 0}return c=c.i.splice(0,f),d.G=c,x}function CI(c){if(!c.g&&!c.v){c.Y=1;var d=c.Da;pt||v(),Be||(pt(),Be=!0),w.add(d,c),c.A=0}}function Tf(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=Ps(l(c.Da,c),RI(c,c.A)),c.A++,!0)}n.Da=function(){if(this.v=null,SI(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=Ps(l(this.Wa,this),c)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,at(10),Jc(this),SI(this))};function Df(c){c.B!=null&&(s.clearTimeout(c.B),c.B=null)}function SI(c){c.g=new nr(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var d=an(c.na);ve(d,"RID","rpc"),ve(d,"SID",c.M),ve(d,"AID",c.K),ve(d,"CI",c.F?"0":"1"),!c.F&&c.ia&&ve(d,"TO",c.ia),ve(d,"TYPE","xmlhttp"),zs(c,d),c.u&&c.o&&If(d,c.u,c.o),c.O&&(c.g.H=c.O);var f=c.g;c=c.ba,f.M=1,f.A=Wc(an(d)),f.u=null,f.R=!0,tI(f,c)}n.Va=function(){this.C!=null&&(this.C=null,Jc(this),Tf(this),at(19))};function Xc(c){c.C!=null&&(s.clearTimeout(c.C),c.C=null)}function AI(c,d){var f=null;if(c.g==d){Xc(c),Df(c),c.g=null;var g=2}else if(vf(c.h,d))f=d.G,aI(c.h,d),g=1;else return;if(c.I!=0){if(d.o)if(g==1){f=d.u?d.u.length:0,d=Date.now()-d.F;var D=c.D;g=zc(),st(g,new YE(g,f)),Zc(c)}else CI(c);else if(D=d.m,D==3||D==0&&d.X>0||!(g==1&&BN(c,d)||g==2&&Tf(c)))switch(f&&f.length>0&&(d=c.h,d.i=d.i.concat(f)),D){case 1:qr(c,5);break;case 4:qr(c,10);break;case 3:qr(c,6);break;default:qr(c,2)}}}function RI(c,d){let f=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(f*=2),f*d}function qr(c,d){if(c.j.info("Error code "+d),d==2){var f=l(c.bb,c),g=c.Ua;let D=!g;g=new rr(g||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||Ls(g,"https"),Wc(g),D?ON(g.toString(),f):LN(g.toString(),f)}else at(2);c.I=0,c.l&&c.l.pa(d),NI(c),TI(c)}n.bb=function(c){c?(this.j.info("Successfully pinged google.com"),at(2)):(this.j.info("Failed to ping google.com"),at(1))};function NI(c){if(c.I=0,c.ja=[],c.l){let d=cI(c.h);(d.length!=0||c.i.length!=0)&&(S(c.ja,d),S(c.ja,c.i),c.h.i.length=0,y(c.i),c.i.length=0),c.l.oa()}}function MI(c,d,f){var g=f instanceof rr?an(f):new rr(f);if(g.g!="")d&&(g.g=d+"."+g.g),Fs(g,g.u);else{var D=s.location;g=D.protocol,d=d?d+"."+D.hostname:D.hostname,D=+D.port;let C=new rr(null);g&&Ls(C,g),d&&(C.g=d),D&&Fs(C,D),f&&(C.h=f),g=C}return f=c.G,d=c.wa,f&&d&&ve(g,f,d),ve(g,"VER",c.ka),zs(c,g),g}function PI(c,d,f){if(d&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Aa&&!c.ma?new De(new Kc({ab:f})):new De(c.ma),d.Fa(c.L),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function kI(){}n=kI.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function eu(){}eu.prototype.g=function(c,d){return new It(c,d)};function It(c,d){Ze.call(this),this.g=new wI(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.sa&&(c?c["X-WebChannel-Client-Profile"]=d.sa:c={"X-WebChannel-Client-Profile":d.sa}),this.g.U=c,(c=d&&d.Qb)&&!_(c)&&(this.g.u=c),this.A=d&&d.supportsCrossDomainXhr||!1,this.v=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!_(d)&&(this.g.G=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Xi(this)}p(It,Ze),It.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},It.prototype.close=function(){wf(this.g)},It.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.v&&(f={},f.__data__=lf(c),c=f);d.i.push(new SN(d.Ya++,c)),d.I==3&&Zc(d)},It.prototype.N=function(){this.g.l=null,delete this.j,wf(this.g),delete this.g,It.Z.N.call(this)};function xI(c){df.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}p(xI,df);function OI(){hf.call(this),this.status=1}p(OI,hf);function Xi(c){this.g=c}p(Xi,kI),Xi.prototype.ra=function(){st(this.g,"a")},Xi.prototype.qa=function(c){st(this.g,new xI(c))},Xi.prototype.pa=function(c){st(this.g,new OI)},Xi.prototype.oa=function(){st(this.g,"b")},eu.prototype.createWebChannel=eu.prototype.g,It.prototype.send=It.prototype.o,It.prototype.open=It.prototype.m,It.prototype.close=It.prototype.close,dv=Kn.createWebChannelTransport=function(){return new eu},lv=Kn.getStatEventTarget=function(){return zc()},uv=Kn.Event=$r,th=Kn.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},qc.NO_ERROR=0,qc.TIMEOUT=8,qc.HTTP_ERROR=6,yc=Kn.ErrorCode=qc,JE.COMPLETE="complete",cv=Kn.EventType=JE,GE.EventType=Ns,Ns.OPEN="a",Ns.CLOSE="b",Ns.ERROR="c",Ns.MESSAGE="d",Ze.prototype.listen=Ze.prototype.J,ts=Kn.WebChannel=GE,jU=Kn.FetchXmlHttpFactory=Kc,De.prototype.listenOnce=De.prototype.K,De.prototype.getLastError=De.prototype.Ha,De.prototype.getLastErrorCode=De.prototype.ya,De.prototype.getStatus=De.prototype.ca,De.prototype.getResponseJson=De.prototype.La,De.prototype.getResponseText=De.prototype.la,De.prototype.send=De.prototype.ea,De.prototype.setWithCredentials=De.prototype.Fa,av=Kn.XhrIo=De}).apply(typeof eh<"u"?eh:typeof self<"u"?self:typeof window<"u"?window:{});var xA="@firebase/firestore",OA="4.9.2";var Ge=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ge.UNAUTHENTICATED=new Ge(null),Ge.GOOGLE_CREDENTIALS=new Ge("google-credentials-uid"),Ge.FIRST_PARTY=new Ge("first-party-uid"),Ge.MOCK_USER=new Ge("mock-user");var bs="12.3.0";var Bi=new wn("@firebase/firestore");function ns(){return Bi.logLevel}function F(n,...e){if(Bi.logLevel<=ne.DEBUG){let t=e.map(nE);Bi.debug(`Firestore (${bs}): ${n}`,...t)}}function Qn(n,...e){if(Bi.logLevel<=ne.ERROR){let t=e.map(nE);Bi.error(`Firestore (${bs}): ${n}`,...t)}}function ls(n,...e){if(Bi.logLevel<=ne.WARN){let t=e.map(nE);Bi.warn(`Firestore (${bs}): ${n}`,...t)}}function nE(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function $(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,DR(n,r,t)}function DR(n,e,t){let r=`FIRESTORE (${bs}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Qn(r),new Error(r)}function ge(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||DR(e,i,r)}function G(n,e){return n}var A={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},L=class extends At{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var nn=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var ch=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},yv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ge.UNAUTHENTICATED))}shutdown(){}},vv=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},_v=class{constructor(e){this.t=e,this.currentUser=Ge.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ge(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new nn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new nn,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{F("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(F("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new nn)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(F("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ge(typeof r.accessToken=="string",31837,{l:r}),new ch(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ge(e===null||typeof e=="string",2055,{h:e}),new Ge(e)}},Ev=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Ge.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},Iv=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new Ev(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Ge.FIRST_PARTY))}shutdown(){}invalidateToken(){}},uh=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},wv=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Rt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ge(this.o===void 0,3512);let r=o=>{o.error!=null&&F("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,F("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{F("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):F("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new uh(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ge(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new uh(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function UU(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Tc=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=UU(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function oe(n,e){return n<e?-1:n>e?1:0}function Tv(n,e){let t=Math.min(n.length,e.length);for(let r=0;r<t;r++){let i=n.charAt(r),o=e.charAt(r);if(i!==o)return hv(i)===hv(o)?oe(i,o):hv(i)?1:-1}return oe(n.length,e.length)}var BU=55296,$U=57343;function hv(n){let e=n.charCodeAt(0);return e>=BU&&e<=$U}function ds(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var LA="__name__",lh=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&$(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&$(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return oe(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):Tv(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Wn.fromString(e.substring(4,e.length-2))}},we=class n extends lh{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new L(A.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},HU=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Mt=class n extends lh{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return HU.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===LA}static keyField(){return new n([LA])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new L(A.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new L(A.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new L(A.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new L(A.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var B=class n{constructor(e){this.path=e}static fromPath(e){return new n(we.fromString(e))}static fromName(e){return new n(we.fromString(e).popFirst(5))}static empty(){return new n(we.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&we.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return we.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new we(e.slice()))}};function bR(n,e,t){if(!t)throw new L(A.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function zU(n,e,t,r){if(e===!0&&r===!0)throw new L(A.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function FA(n){if(!B.isDocumentKey(n))throw new L(A.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function VA(n){if(B.isDocumentKey(n))throw new L(A.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function CR(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Hh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":$(12329,{type:typeof n})}function rn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new L(A.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Hh(n);throw new L(A.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Me(n,e){let t={typeString:n};return e&&(t.value=e),t}function xc(n,e){if(!CR(n))throw new L(A.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new L(A.INVALID_ARGUMENT,t);return!0}var jA=-62135596800,UA=1e6,Pe=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*UA);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new L(A.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new L(A.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<jA)throw new L(A.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new L(A.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/UA}_compareTo(e){return this.seconds===e.seconds?oe(this.nanoseconds,e.nanoseconds):oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(xc(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-jA;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Pe._jsonSchemaVersion="firestore/timestamp/1.0",Pe._jsonSchema={type:Me("string",Pe._jsonSchemaVersion),seconds:Me("number"),nanoseconds:Me("number")};var Q=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Pe(0,0))}static max(){return new n(new Pe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Dc=-1,Dv=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};Dv.UNKNOWN_ID=-1;function qU(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Q.fromTimestamp(r===1e9?new Pe(t+1,0):new Pe(t,r));return new $i(i,B.empty(),e)}function GU(n){return new $i(n.readTime,n.key,Dc)}var $i=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Q.min(),B.empty(),Dc)}static max(){return new n(Q.max(),B.empty(),Dc)}};function WU(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=B.comparator(n.documentKey,e.documentKey),t!==0?t:oe(n.largestBatchId,e.largestBatchId))}var KU="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",bv=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function Cs(n){if(n.code!==A.FAILED_PRECONDITION||n.message!==KU)throw n;F("LocalStore","Unexpectedly lost primary lease")}var P=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&$(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function QU(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ss(n){return n.name==="IndexedDbTransactionError"}var rE=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ue&&this.ue(t),t}}n.ce=-1;return n})(),iE=-1;function zh(n){return n==null}function bc(n){return n===0&&1/n==-1/0}function YU(n){return typeof n=="number"&&Number.isInteger(n)&&!bc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var SR="";function JU(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=BA(e)),e=ZU(n.get(t),e);return BA(e)}function ZU(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case SR:t+="";break;default:t+=o}}return t}function BA(n){return n+SR+""}var XU="remoteDocuments",AR="owner";var RR="mutationQueues";var NR="mutations";var MR="documentMutations",eB="remoteDocumentsV14";var PR="remoteDocumentGlobal";var kR="targets";var xR="targetDocuments";var OR="targetGlobal",LR="collectionParents";var FR="clientMetadata";var VR="bundles";var jR="namedQueries";var tB="indexConfiguration";var nB="indexState";var rB="indexEntries";var UR="documentOverlays";var iB="globals";var oB=[RR,NR,MR,XU,kR,AR,OR,xR,FR,PR,LR,VR,jR],yne=[...oB,UR],sB=[RR,NR,MR,eB,kR,AR,OR,xR,FR,PR,LR,VR,jR,UR],aB=sB,cB=[...aB,tB,nB,rB];var vne=[...cB,iB];function $A(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Br(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function BR(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ce=class n{constructor(e,t){this.comparator=e,this.root=t||Cn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Cn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Cn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ss(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ss(this.root,e,this.comparator,!1)}getReverseIterator(){return new ss(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ss(this.root,e,this.comparator,!0)}},ss=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Cn=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw $(43730,{key:this.key,value:this.value});if(this.right.isRed())throw $(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw $(27949);return e+(this.isRed()?0:1)}};Cn.EMPTY=null,Cn.RED=!0,Cn.BLACK=!1;Cn.EMPTY=new class{constructor(){this.size=0}get key(){throw $(57766)}get value(){throw $(16141)}get color(){throw $(16727)}get left(){throw $(29726)}get right(){throw $(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new Cn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var We=class n{constructor(e){this.comparator=e,this.data=new Ce(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new dh(this.data.getIterator())}getIteratorFrom(e){return new dh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},dh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var jt=class n{constructor(e){this.fields=e,e.sort(Mt.comparator)}static empty(){return new n([])}unionWith(e){let t=new We(Mt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ds(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var hh=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var it=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new hh("Invalid base64 string: "+o):o}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};it.EMPTY_BYTE_STRING=new it("");var uB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yn(n){if(ge(!!n,39018),typeof n=="string"){let e=0,t=uB.exec(n);if(ge(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ie(n.seconds),nanos:Ie(n.nanos)}}function Ie(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Jn(n){return typeof n=="string"?it.fromBase64String(n):it.fromUint8Array(n)}var $R="server_timestamp",HR="__type__",zR="__previous_value__",qR="__local_write_time__";function oE(n){return(n?.mapValue?.fields||{})[HR]?.stringValue===$R}function qh(n){let e=n.mapValue.fields[zR];return oE(e)?qh(e):e}function Cc(n){let e=Yn(n.mapValue.fields[qR].timestampValue);return new Pe(e.seconds,e.nanos)}var Cv=class{constructor(e,t,r,i,o,s,a,u,l,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},fh="(default)",ph=class n{constructor(e,t){this.projectId=e,this.database=t||fh}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===fh}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var sE="__type__",GR="__max__",nh={mapValue:{fields:{__type__:{stringValue:GR}}}},aE="__vector__",hs="value";function Vr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?oE(n)?4:KR(n)?9007199254740991:WR(n)?10:11:$(28295,{value:n})}function Nn(n,e){if(n===e)return!0;let t=Vr(n);if(t!==Vr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Cc(n).isEqual(Cc(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Yn(i.timestampValue),a=Yn(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return Jn(i.bytesValue).isEqual(Jn(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return Ie(i.geoPointValue.latitude)===Ie(o.geoPointValue.latitude)&&Ie(i.geoPointValue.longitude)===Ie(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return Ie(i.integerValue)===Ie(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ie(i.doubleValue),a=Ie(o.doubleValue);return s===a?bc(s)===bc(a):isNaN(s)&&isNaN(a)}return!1})(n,e);case 9:return ds(n.arrayValue.values||[],e.arrayValue.values||[],Nn);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if($A(s)!==$A(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!Nn(s[u],a[u])))return!1;return!0})(n,e);default:return $(52216,{left:n})}}function Sc(n,e){return(n.values||[]).find(t=>Nn(t,e))!==void 0}function fs(n,e){if(n===e)return 0;let t=Vr(n),r=Vr(e);if(t!==r)return oe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return oe(n.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=Ie(o.integerValue||o.doubleValue),u=Ie(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1})(n,e);case 3:return HA(n.timestampValue,e.timestampValue);case 4:return HA(Cc(n),Cc(e));case 5:return Tv(n.stringValue,e.stringValue);case 6:return(function(o,s){let a=Jn(o),u=Jn(s);return a.compareTo(u)})(n.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=oe(a[l],u[l]);if(h!==0)return h}return oe(a.length,u.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=oe(Ie(o.latitude),Ie(s.latitude));return a!==0?a:oe(Ie(o.longitude),Ie(s.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return zA(n.arrayValue,e.arrayValue);case 10:return(function(o,s){let a=o.fields||{},u=s.fields||{},l=a[hs]?.arrayValue,h=u[hs]?.arrayValue,p=oe(l?.values?.length||0,h?.values?.length||0);return p!==0?p:zA(l,h)})(n.mapValue,e.mapValue);case 11:return(function(o,s){if(o===nh.mapValue&&s===nh.mapValue)return 0;if(o===nh.mapValue)return 1;if(s===nh.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=Tv(u[p],h[p]);if(m!==0)return m;let y=fs(a[u[p]],l[h[p]]);if(y!==0)return y}return oe(u.length,h.length)})(n.mapValue,e.mapValue);default:throw $(23264,{he:t})}}function HA(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return oe(n,e);let t=Yn(n),r=Yn(e),i=oe(t.seconds,r.seconds);return i!==0?i:oe(t.nanos,r.nanos)}function zA(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=fs(t[i],r[i]);if(o)return o}return oe(t.length,r.length)}function ps(n){return Sv(n)}function Sv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=Yn(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Jn(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return B.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=Sv(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Sv(t.fields[s])}`;return i+"}"})(n.mapValue):$(61005,{value:n})}function oh(n){switch(Vr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=qh(n);return e?16+oh(e):16;case 5:return 2*n.stringValue.length;case 6:return Jn(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+oh(o),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Br(r.fields,(o,s)=>{i+=o.length+oh(s)}),i})(n.mapValue);default:throw $(13486,{value:n})}}function qA(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Av(n){return!!n&&"integerValue"in n}function cE(n){return!!n&&"arrayValue"in n}function GA(n){return!!n&&"nullValue"in n}function WA(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function sh(n){return!!n&&"mapValue"in n}function WR(n){return(n?.mapValue?.fields||{})[sE]?.stringValue===aE}function _c(n){if(n.geoPointValue)return{geoPointValue:N({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:N({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Br(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=_c(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=_c(n.arrayValue.values[t]);return e}return N({},n)}function KR(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===GR}var Ene={mapValue:{fields:{[sE]:{stringValue:aE},[hs]:{arrayValue:{}}}}};var Nt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!sh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=_c(t)}setAll(e){let t=Mt.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=_c(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());sh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Nn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];sh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Br(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(_c(this.value))}};function QR(n){let e=[];return Br(n.fields,(t,r)=>{let i=new Mt([t]);if(sh(r)){let o=QR(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new jt(e)}var on=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,Q.min(),Q.min(),Q.min(),Nt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Q.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Q.min(),Q.min(),Nt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Q.min(),Q.min(),Nt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Q.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Q.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var gs=class{constructor(e,t){this.position=e,this.inclusive=t}};function KA(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=B.comparator(B.fromName(s.referenceValue),t.key):r=fs(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function QA(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Nn(n.position[t],e.position[t]))return!1;return!0}var ms=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function lB(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var gh=class{},Ne=class n extends gh{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Nv(e,t,r):t==="array-contains"?new kv(e,r):t==="in"?new xv(e,r):t==="not-in"?new Ov(e,r):t==="array-contains-any"?new Lv(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Mv(e,r):new Pv(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(fs(t,this.value)):t!==null&&Vr(this.value)===Vr(t)&&this.matchesComparison(fs(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return $(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},sn=class n extends gh{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new n(e,t)}matches(e){return YR(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function YR(n){return n.op==="and"}function JR(n){return dB(n)&&YR(n)}function dB(n){for(let e of n.filters)if(e instanceof sn)return!1;return!0}function Rv(n){if(n instanceof Ne)return n.field.canonicalString()+n.op.toString()+ps(n.value);if(JR(n))return n.filters.map(e=>Rv(e)).join(",");{let e=n.filters.map(t=>Rv(t)).join(",");return`${n.op}(${e})`}}function ZR(n,e){return n instanceof Ne?(function(r,i){return i instanceof Ne&&r.op===i.op&&r.field.isEqual(i.field)&&Nn(r.value,i.value)})(n,e):n instanceof sn?(function(r,i){return i instanceof sn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&ZR(s,i.filters[a]),!0):!1})(n,e):void $(19439)}function XR(n){return n instanceof Ne?(function(t){return`${t.field.canonicalString()} ${t.op} ${ps(t.value)}`})(n):n instanceof sn?(function(t){return t.op.toString()+" {"+t.getFilters().map(XR).join(" ,")+"}"})(n):"Filter"}var Nv=class extends Ne{constructor(e,t,r){super(e,t,r),this.key=B.fromName(r.referenceValue)}matches(e){let t=B.comparator(e.key,this.key);return this.matchesComparison(t)}},Mv=class extends Ne{constructor(e,t){super(e,"in",t),this.keys=e0("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Pv=class extends Ne{constructor(e,t){super(e,"not-in",t),this.keys=e0("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function e0(n,e){return(e.arrayValue?.values||[]).map(t=>B.fromName(t.referenceValue))}var kv=class extends Ne{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return cE(t)&&Sc(t.arrayValue,this.value)}},xv=class extends Ne{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Sc(this.value.arrayValue,t)}},Ov=class extends Ne{constructor(e,t){super(e,"not-in",t)}matches(e){if(Sc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Sc(this.value.arrayValue,t)}},Lv=class extends Ne{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!cE(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Sc(this.value.arrayValue,r))}};var Fv=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Te=null}};function YA(n,e=null,t=[],r=[],i=null,o=null,s=null){return new Fv(n,e,t,r,i,o,s)}function uE(n){let e=G(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Rv(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),zh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ps(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ps(r)).join(",")),e.Te=t}return e.Te}function lE(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!lB(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!ZR(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!QA(n.startAt,e.startAt)&&QA(n.endAt,e.endAt)}function Vv(n){return B.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Hi=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function hB(n,e,t,r,i,o,s,a){return new Hi(n,e,t,r,i,o,s,a)}function dE(n){return new Hi(n)}function JA(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function t0(n){return n.collectionGroup!==null}function Ec(n){let e=G(n);if(e.Ie===null){e.Ie=[];let t=new Set;for(let o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new We(Mt.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new ms(o,r))}),t.has(Mt.keyField().canonicalString())||e.Ie.push(new ms(Mt.keyField(),r))}return e.Ie}function Sn(n){let e=G(n);return e.Ee||(e.Ee=fB(e,Ec(n))),e.Ee}function fB(n,e){if(n.limitType==="F")return YA(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new ms(i.field,o)});let t=n.endAt?new gs(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new gs(n.startAt.position,n.startAt.inclusive):null;return YA(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function jv(n,e){let t=n.filters.concat([e]);return new Hi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Uv(n,e,t){return new Hi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Gh(n,e){return lE(Sn(n),Sn(e))&&n.limitType===e.limitType}function n0(n){return`${uE(Sn(n))}|lt:${n.limitType}`}function rs(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>XR(i)).join(", ")}]`),zh(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>ps(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>ps(i)).join(",")),`Target(${r})`})(Sn(n))}; limitType=${n.limitType})`}function Wh(n,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):B.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,i){for(let o of Ec(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,u){let l=KA(s,a,u);return s.inclusive?l<=0:l<0})(r.startAt,Ec(r),i)||r.endAt&&!(function(s,a,u){let l=KA(s,a,u);return s.inclusive?l>=0:l>0})(r.endAt,Ec(r),i))})(n,e)}function pB(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function r0(n){return(e,t)=>{let r=!1;for(let i of Ec(n)){let o=gB(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function gB(n,e,t){let r=n.field.isKeyField()?B.comparator(e.key,t.key):(function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?fs(u,l):$(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return $(19790,{direction:n.dir})}}var Zn=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Br(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return BR(this.inner)}size(){return this.innerSize}};var mB=new Ce(B.comparator);function Xn(){return mB}var i0=new Ce(B.comparator);function vc(...n){let e=i0;for(let t of n)e=e.insert(t.key,t);return e}function o0(n){let e=i0;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Fi(){return Ic()}function s0(){return Ic()}function Ic(){return new Zn(n=>n.toString(),(n,e)=>n.isEqual(e))}var yB=new Ce(B.comparator),vB=new We(B.comparator);function se(...n){let e=vB;for(let t of n)e=e.add(t);return e}var _B=new We(oe);function EB(){return _B}function hE(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bc(e)?"-0":e}}function a0(n){return{integerValue:""+n}}function IB(n,e){return YU(e)?a0(e):hE(n,e)}var ys=class{constructor(){this._=void 0}};function wB(n,e,t){return n instanceof zi?(function(i,o){let s={fields:{[HR]:{stringValue:$R},[qR]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&oE(o)&&(o=qh(o)),o&&(s.fields[zR]=o),{mapValue:s}})(t,e):n instanceof qi?u0(n,e):n instanceof Gi?l0(n,e):(function(i,o){let s=c0(i,o),a=ZA(s)+ZA(i.Ae);return Av(s)&&Av(i.Ae)?a0(a):hE(i.serializer,a)})(n,e)}function TB(n,e,t){return n instanceof qi?u0(n,e):n instanceof Gi?l0(n,e):t}function c0(n,e){return n instanceof vs?(function(r){return Av(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var zi=class extends ys{},qi=class extends ys{constructor(e){super(),this.elements=e}};function u0(n,e){let t=d0(e);for(let r of n.elements)t.some(i=>Nn(i,r))||t.push(r);return{arrayValue:{values:t}}}var Gi=class extends ys{constructor(e){super(),this.elements=e}};function l0(n,e){let t=d0(e);for(let r of n.elements)t=t.filter(i=>!Nn(i,r));return{arrayValue:{values:t}}}var vs=class extends ys{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function ZA(n){return Ie(n.integerValue||n.doubleValue)}function d0(n){return cE(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var Bv=class{constructor(e,t){this.field=e,this.transform=t}};function DB(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof qi&&i instanceof qi||r instanceof Gi&&i instanceof Gi?ds(r.elements,i.elements,Nn):r instanceof vs&&i instanceof vs?Nn(r.Ae,i.Ae):r instanceof zi&&i instanceof zi})(n.transform,e.transform)}var $v=class{constructor(e,t){this.version=e,this.transformResults=t}},An=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function ah(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var _s=class{};function h0(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Ac(n.key,An.none()):new Wi(n.key,n.data,An.none());{let t=n.data,r=Nt.empty(),i=new We(Mt.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Mn(n.key,r,new jt(i.toArray()),An.none())}}function bB(n,e,t){n instanceof Wi?(function(i,o,s){let a=i.value.clone(),u=eR(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(n,e,t):n instanceof Mn?(function(i,o,s){if(!ah(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=eR(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(f0(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()})(n,e,t):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,t)}function wc(n,e,t,r){return n instanceof Wi?(function(o,s,a,u){if(!ah(o.precondition,s))return a;let l=o.value.clone(),h=tR(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(n,e,t,r):n instanceof Mn?(function(o,s,a,u){if(!ah(o.precondition,s))return a;let l=tR(o.fieldTransforms,u,s),h=s.data;return h.setAll(f0(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))})(n,e,t,r):(function(o,s,a){return ah(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(n,e,t)}function CB(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=c0(r.transform,i||null);o!=null&&(t===null&&(t=Nt.empty()),t.set(r.field,o))}return t||null}function XA(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ds(r,i,(o,s)=>DB(o,s))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Wi=class extends _s{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Mn=class extends _s{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function f0(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function eR(n,e,t){let r=new Map;ge(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,TB(s,a,t[i]))}return r}function tR(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,wB(o,s,e))}return r}var Ac=class extends _s{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Hv=class extends _s{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var zv=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&bB(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=wc(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=wc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=s0();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=h0(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(Q.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),se())}isEqual(e){return this.batchId===e.batchId&&ds(this.mutations,e.mutations,(t,r)=>XA(t,r))&&ds(this.baseMutations,e.baseMutations,(t,r)=>XA(t,r))}},qv=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ge(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return yB})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var Gv=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Wv=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Ae,ae;function SB(n){switch(n){case A.OK:return $(64938);case A.CANCELLED:case A.UNKNOWN:case A.DEADLINE_EXCEEDED:case A.RESOURCE_EXHAUSTED:case A.INTERNAL:case A.UNAVAILABLE:case A.UNAUTHENTICATED:return!1;case A.INVALID_ARGUMENT:case A.NOT_FOUND:case A.ALREADY_EXISTS:case A.PERMISSION_DENIED:case A.FAILED_PRECONDITION:case A.ABORTED:case A.OUT_OF_RANGE:case A.UNIMPLEMENTED:case A.DATA_LOSS:return!0;default:return $(15467,{code:n})}}function p0(n){if(n===void 0)return Qn("GRPC error has no .code"),A.UNKNOWN;switch(n){case Ae.OK:return A.OK;case Ae.CANCELLED:return A.CANCELLED;case Ae.UNKNOWN:return A.UNKNOWN;case Ae.DEADLINE_EXCEEDED:return A.DEADLINE_EXCEEDED;case Ae.RESOURCE_EXHAUSTED:return A.RESOURCE_EXHAUSTED;case Ae.INTERNAL:return A.INTERNAL;case Ae.UNAVAILABLE:return A.UNAVAILABLE;case Ae.UNAUTHENTICATED:return A.UNAUTHENTICATED;case Ae.INVALID_ARGUMENT:return A.INVALID_ARGUMENT;case Ae.NOT_FOUND:return A.NOT_FOUND;case Ae.ALREADY_EXISTS:return A.ALREADY_EXISTS;case Ae.PERMISSION_DENIED:return A.PERMISSION_DENIED;case Ae.FAILED_PRECONDITION:return A.FAILED_PRECONDITION;case Ae.ABORTED:return A.ABORTED;case Ae.OUT_OF_RANGE:return A.OUT_OF_RANGE;case Ae.UNIMPLEMENTED:return A.UNIMPLEMENTED;case Ae.DATA_LOSS:return A.DATA_LOSS;default:return $(39323,{code:n})}}(ae=Ae||(Ae={}))[ae.OK=0]="OK",ae[ae.CANCELLED=1]="CANCELLED",ae[ae.UNKNOWN=2]="UNKNOWN",ae[ae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ae[ae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ae[ae.NOT_FOUND=5]="NOT_FOUND",ae[ae.ALREADY_EXISTS=6]="ALREADY_EXISTS",ae[ae.PERMISSION_DENIED=7]="PERMISSION_DENIED",ae[ae.UNAUTHENTICATED=16]="UNAUTHENTICATED",ae[ae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ae[ae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ae[ae.ABORTED=10]="ABORTED",ae[ae.OUT_OF_RANGE=11]="OUT_OF_RANGE",ae[ae.UNIMPLEMENTED=12]="UNIMPLEMENTED",ae[ae.INTERNAL=13]="INTERNAL",ae[ae.UNAVAILABLE=14]="UNAVAILABLE",ae[ae.DATA_LOSS=15]="DATA_LOSS";var AB=null;function RB(){return new TextEncoder}var NB=new Wn([4294967295,4294967295],0);function nR(n){let e=RB().encode(n),t=new sv;return t.update(e),new Uint8Array(t.digest())}function rR(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Wn([t,r],0),new Wn([i,o],0)]}var Kv=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Vi(`Invalid padding: ${t}`);if(r<0)throw new Vi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Vi(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Vi(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Wn.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(Wn.fromNumber(r)));return i.compare(NB)===1&&(i=new Wn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let t=nR(e),[r,i]=rR(t);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);if(!this.we(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.ge===0)return;let t=nR(e),[r,i]=rR(t);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);this.Se(s)}}Se(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Vi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var mh=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Rc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Q.min(),i,new Ce(oe),Xn(),se())}},Rc=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,se(),se(),se())}};var as=class{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}},yh=class{constructor(e,t){this.targetId=e,this.Ce=t}},vh=class{constructor(e,t,r=it.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},_h=class{constructor(){this.ve=0,this.Fe=iR(),this.Me=it.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=se(),t=se(),r=se();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:$(38017,{changeType:o})}}),new Rc(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=iR()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ge(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},Qv=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=Xn(),this.Je=rh(),this.He=rh(),this.Ye=new Ce(oe)}Ze(e){for(let t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{let r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:$(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){let t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){let o=i.target;if(Vv(o))if(r===0){let s=new B(o.path);this.et(t,s,on.newNoDocument(s,Q.min()))}else ge(r===1,20013,{expectedCount:r});else{let s=this._t(t);if(s!==r){let a=this.ut(e),u=a?this.ct(a,e,s):1;if(u!==0){this.it(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,l)}AB?.lt((function(h,p,m,y,S){let M={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},R=p.unchangedNames;return R&&(M.bloomFilter={applied:S===0,hashCount:R?.hashCount??0,bitmapLength:R?.bits?.bitmap?.length??0,padding:R?.bits?.padding??0,mightContain:O=>y?.mightContain(O)??!1}),M})(s,e.Ce,this.Ge.ht(),a,u))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=Jn(r).toUint8Array()}catch(u){if(u instanceof hh)return ls("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Kv(s,i,o)}catch(u){return ls(u instanceof Vi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.ge===0?null:a}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){let r=this.Ge.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Ge.ht(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.et(t,o,null),i++)}),i}Tt(e){let t=new Map;this.ze.forEach((o,s)=>{let a=this.ot(s);if(a){if(o.current&&Vv(a.target)){let u=new B(a.target.path);this.It(u).has(s)||this.Et(s,u)||this.et(s,u,on.newNoDocument(u,e))}o.Be&&(t.set(s,o.ke()),o.qe())}});let r=se();this.He.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.ot(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.je.forEach((o,s)=>s.setReadTime(e));let i=new mh(e,t,this.Ye,this.je,r);return this.je=Xn(),this.Je=rh(),this.He=rh(),this.Ye=new Ce(oe),i}Xe(e,t){if(!this.rt(e))return;let r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new _h,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new We(oe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new We(oe),this.Je=this.Je.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||F("WatchChangeAggregator","Detected inactive target",e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new _h),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function rh(){return new Ce(B.comparator)}function iR(){return new Ce(B.comparator)}var MB={asc:"ASCENDING",desc:"DESCENDING"},PB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kB={and:"AND",or:"OR"},Yv=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Jv(n,e){return n.useProto3Json||zh(e)?e:{value:e}}function Eh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function g0(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function xB(n,e){return Eh(n,e.toTimestamp())}function Rn(n){return ge(!!n,49232),Q.fromTimestamp((function(t){let r=Yn(t);return new Pe(r.seconds,r.nanos)})(n))}function fE(n,e){return Zv(n,e).canonicalString()}function Zv(n,e){let t=(function(i){return new we(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function m0(n){let e=we.fromString(n);return ge(I0(e),10190,{key:e.toString()}),e}function Xv(n,e){return fE(n.databaseId,e.path)}function fv(n,e){let t=m0(e);if(t.get(1)!==n.databaseId.projectId)throw new L(A.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new L(A.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new B(v0(t))}function y0(n,e){return fE(n.databaseId,e)}function OB(n){let e=m0(n);return e.length===4?we.emptyPath():v0(e)}function e_(n){return new we(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function v0(n){return ge(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function oR(n,e,t){return{name:Xv(n,e),fields:t.value.mapValue.fields}}function LB(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:$(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(l,h){return l.useProto3Json?(ge(h===void 0||typeof h=="string",58123),it.fromBase64String(h||"")):(ge(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),it.fromUint8Array(h||new Uint8Array))})(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(l){let h=l.code===void 0?A.UNKNOWN:p0(l.code);return new L(h,l.message||"")})(s);t=new vh(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=fv(n,r.document.name),o=Rn(r.document.updateTime),s=r.document.createTime?Rn(r.document.createTime):Q.min(),a=new Nt({mapValue:{fields:r.document.fields}}),u=on.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new as(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=fv(n,r.document),o=r.readTime?Rn(r.readTime):Q.min(),s=on.newNoDocument(i,o),a=r.removedTargetIds||[];t=new as([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=fv(n,r.document),o=r.removedTargetIds||[];t=new as([],o,i,null)}else{if(!("filter"in e))return $(11601,{Rt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new Wv(i,o),a=r.targetId;t=new yh(a,s)}}return t}function FB(n,e){let t;if(e instanceof Wi)t={update:oR(n,e.key,e.value)};else if(e instanceof Ac)t={delete:Xv(n,e.key)};else if(e instanceof Mn)t={update:oR(n,e.key,e.data),updateMask:GB(e.fieldMask)};else{if(!(e instanceof Hv))return $(16599,{Vt:e.type});t={verify:Xv(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let a=s.transform;if(a instanceof zi)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof qi)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Gi)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof vs)return{fieldPath:s.field.canonicalString(),increment:a.Ae};throw $(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:xB(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:$(27497)})(n,e.precondition)),t}function VB(n,e){return n&&n.length>0?(ge(e!==void 0,14353),n.map(t=>(function(i,o){let s=i.updateTime?Rn(i.updateTime):Rn(o);return s.isEqual(Q.min())&&(s=Rn(o)),new $v(s,i.transformResults||[])})(t,e))):[]}function jB(n,e){return{documents:[y0(n,e.path)]}}function UB(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=y0(n,i);let o=(function(l){if(l.length!==0)return E0(sn.create(l,"and"))})(e.filters);o&&(t.structuredQuery.where=o);let s=(function(l){if(l.length!==0)return l.map(h=>(function(m){return{field:is(m.field),direction:HB(m.dir)}})(h))})(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=Jv(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{ft:t,parent:i}}function BB(n){let e=OB(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){ge(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=(function(p){let m=_0(p);return m instanceof sn&&JR(m)?m.getFilters():[m]})(t.where));let s=[];t.orderBy&&(s=(function(p){return p.map(m=>(function(S){return new ms(os(S.field),(function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(S.direction))})(m))})(t.orderBy));let a=null;t.limit&&(a=(function(p){let m;return m=typeof p=="object"?p.value:p,zh(m)?null:m})(t.limit));let u=null;t.startAt&&(u=(function(p){let m=!!p.before,y=p.values||[];return new gs(y,m)})(t.startAt));let l=null;return t.endAt&&(l=(function(p){let m=!p.before,y=p.values||[];return new gs(y,m)})(t.endAt)),hB(e,i,s,o,a,"F",u,l)}function $B(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return $(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function _0(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=os(t.unaryFilter.field);return Ne.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=os(t.unaryFilter.field);return Ne.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=os(t.unaryFilter.field);return Ne.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=os(t.unaryFilter.field);return Ne.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return $(61313);default:return $(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ne.create(os(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return $(58110);default:return $(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return sn.create(t.compositeFilter.filters.map(r=>_0(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return $(1026)}})(t.compositeFilter.op))})(n):$(30097,{filter:n})}function HB(n){return MB[n]}function zB(n){return PB[n]}function qB(n){return kB[n]}function is(n){return{fieldPath:n.canonicalString()}}function os(n){return Mt.fromServerFormat(n.fieldPath)}function E0(n){return n instanceof Ne?(function(t){if(t.op==="=="){if(WA(t.value))return{unaryFilter:{field:is(t.field),op:"IS_NAN"}};if(GA(t.value))return{unaryFilter:{field:is(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(WA(t.value))return{unaryFilter:{field:is(t.field),op:"IS_NOT_NAN"}};if(GA(t.value))return{unaryFilter:{field:is(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:is(t.field),op:zB(t.op),value:t.value}}})(n):n instanceof sn?(function(t){let r=t.getFilters().map(i=>E0(i));return r.length===1?r[0]:{compositeFilter:{op:qB(t.op),filters:r}}})(n):$(54877,{filter:n})}function GB(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function I0(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Nc=class n{constructor(e,t,r,i,o=Q.min(),s=Q.min(),a=it.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var t_=class{constructor(e){this.yt=e}};function WB(n){let e=BB({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Uv(e,e.limit,"L"):e}var Ih=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Ie(e.integerValue));else if("doubleValue"in e){let r=Ie(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),bc(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=Yn(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Jn(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?KR(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):WR(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):$(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){let r=e.fields||{};this.Ft(t,55);for(let i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){let r=e.fields||{};this.Ft(t,53);let i=hs,o=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(Ie(o)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){let r=e.values||[];this.Ft(t,50);for(let i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),B.fromName(e).path.forEach(r=>{this.Ft(t,60),this.Ut(r,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};Ih.Kt=new Ih;var n_=class{constructor(){this.Cn=new r_}addToCollectionParentIndex(e,t){return this.Cn.add(t),P.resolve()}getCollectionParents(e,t){return P.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return P.resolve()}deleteFieldIndex(e,t){return P.resolve()}deleteAllFieldIndexes(e){return P.resolve()}createTargetIndexes(e,t){return P.resolve()}getDocumentsMatchingTarget(e,t){return P.resolve(null)}getIndexType(e,t){return P.resolve(0)}getFieldIndexes(e,t){return P.resolve([])}getNextCollectionGroupToUpdate(e){return P.resolve(null)}getMinOffset(e,t){return P.resolve($i.min())}getMinOffsetFromCollectionGroup(e,t){return P.resolve($i.min())}updateCollectionGroup(e,t,r){return P.resolve()}updateIndexEntries(e,t){return P.resolve()}},r_=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new We(we.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new We(we.comparator)).toArray()}};var Ine=new Uint8Array(0);var sR={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},w0=41943040,Vt=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Vt.DEFAULT_COLLECTION_PERCENTILE=10,Vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vt.DEFAULT=new Vt(w0,Vt.DEFAULT_COLLECTION_PERCENTILE,Vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vt.DISABLED=new Vt(-1,0,0);var Mc=class n{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new n(0)}static cr(){return new n(-1)}};var aR="LruGarbageCollector",KB=1048576;function cR([n,e],[t,r]){let i=oe(n,t);return i===0?oe(e,r):i}var i_=class{constructor(e){this.Ir=e,this.buffer=new We(cR),this.Er=0}dr(){return++this.Er}Ar(e){let t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();cR(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},o_=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){F(aR,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ss(t)?F(aR,"Ignoring IndexedDB error during garbage collection: ",t):await Cs(t)}await this.Vr(3e5)})}},s_=class{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return P.resolve(rE.ce);let r=new i_(t);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(F("LruGarbageCollector","Garbage collection skipped; disabled"),P.resolve(sR)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(F("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),sR):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(F("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),ns()<=ne.DEBUG&&F("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),P.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function QB(n,e){return new s_(n,e)}var a_=class{constructor(){this.changes=new Zn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,on.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?P.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var c_=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var u_=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&wc(r.mutation,i,jt.empty(),Pe.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,se()).next(()=>r))}getLocalViewOfDocuments(e,t,r=se()){let i=Fi();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=vc();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Fi();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,se()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Xn(),s=Ic(),a=(function(){return Ic()})();return t.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Mn)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),wc(h.mutation,l,h.mutation.getFieldMask(),Pe.now())):s.set(l.key,jt.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>a.set(l,new c_(h,s.get(l)??null))),a))}recalculateAndSaveOverlays(e,t){let r=Ic(),i=new Ce((s,a)=>s-a),o=se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let h=r.get(u)||jt.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||se()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=s0();h.forEach(m=>{if(!o.has(m)){let y=h0(t.get(m),r.get(m));y!==null&&p.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return P.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(s){return B.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):t0(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):P.resolve(Fi()),a=Dc,u=o;return s.next(l=>P.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?P.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,se())).next(h=>({batchId:a,changes:o0(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new B(t)).next(r=>{let i=vc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=vc();return this.indexManager.getCollectionParents(e,o).next(a=>P.forEach(a,u=>{let l=(function(p,m){return new Hi(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,on.newInvalidDocument(h)))});let a=vc();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&wc(h.mutation,l,jt.empty(),Pe.now()),Wh(t,l)&&(a=a.insert(u,l))}),a})}};var l_=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return P.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Rn(i.createTime)}})(t)),P.resolve()}getNamedQuery(e,t){return P.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:WB(i.bundledQuery),readTime:Rn(i.readTime)}})(t)),P.resolve()}};var d_=class{constructor(){this.overlays=new Ce(B.comparator),this.qr=new Map}getOverlay(e,t){return P.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Fi();return P.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.St(e,t,o)}),P.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),P.resolve()}getOverlaysForCollection(e,t,r){let i=Fi(),o=t.length+1,s=new B(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return P.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Ce((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=Fi(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Fi(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return P.resolve(a)}St(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Gv(t,r));let o=this.qr.get(t);o===void 0&&(o=se(),this.qr.set(t,o)),this.qr.set(t,o.add(r.key))}};var h_=class{constructor(){this.sessionToken=it.EMPTY_BYTE_STRING}getSessionToken(e){return P.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,P.resolve()}};var Pc=class{constructor(){this.Qr=new We(Re.$r),this.Ur=new We(Re.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){let r=new Re(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Gr(new Re(e,t))}zr(e,t){e.forEach(r=>this.removeReference(r,t))}jr(e){let t=new B(new we([])),r=new Re(t,e),i=new Re(t,e+1),o=[];return this.Ur.forEachInRange([r,i],s=>{this.Gr(s),o.push(s.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let t=new B(new we([])),r=new Re(t,e),i=new Re(t,e+1),o=se();return this.Ur.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Re(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Re=class{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return B.comparator(e.key,t.key)||oe(e.Yr,t.Yr)}static Kr(e,t){return oe(e.Yr,t.Yr)||B.comparator(e.key,t.key)}};var f_=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new We(Re.$r)}checkEmpty(e){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new zv(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Zr=this.Zr.add(new Re(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return P.resolve(s)}lookupMutationBatch(e,t){return P.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.ei(r),o=i<0?0:i;return P.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?iE:this.tr-1)}getAllMutationBatches(e){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Re(t,0),i=new Re(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],s=>{let a=this.Xr(s.Yr);o.push(a)}),P.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new We(oe);return t.forEach(i=>{let o=new Re(i,0),s=new Re(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,s],a=>{r=r.add(a.Yr)})}),P.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;B.isDocumentKey(o)||(o=o.child(""));let s=new Re(new B(o),0),a=new We(oe);return this.Zr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Yr)),!0)},s),P.resolve(this.ti(a))}ti(e){let t=[];return e.forEach(r=>{let i=this.Xr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ge(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return P.forEach(t.mutations,i=>{let o=new Re(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,t){let r=new Re(t,0),i=this.Zr.firstAfterOrEqual(r);return P.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,P.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var p_=class{constructor(e){this.ri=e,this.docs=(function(){return new Ce(B.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return P.resolve(r?r.document.mutableCopy():on.newInvalidDocument(t))}getEntries(e,t){let r=Xn();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():on.newInvalidDocument(i))}),P.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Xn(),s=t.path,a=new B(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||WU(GU(h),r)<=0||(i.has(h.key)||Wh(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return P.resolve(o)}getAllFromCollectionGroup(e,t,r,i){$(9500)}ii(e,t){return P.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new g_(this)}getSize(e){return P.resolve(this.size)}},g_=class extends a_{constructor(e){super(),this.Nr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),P.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}};var m_=class{constructor(e){this.persistence=e,this.si=new Zn(t=>uE(t),lE),this.lastRemoteSnapshotVersion=Q.min(),this.highestTargetId=0,this.oi=0,this._i=new Pc,this.targetCount=0,this.ai=Mc.ur()}forEachTarget(e,t){return this.si.forEach((r,i)=>t(i)),P.resolve()}getLastRemoteSnapshotVersion(e){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return P.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),P.resolve()}Pr(e){this.si.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ai=new Mc(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,P.resolve()}updateTargetData(e,t){return this.Pr(t),P.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,P.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.si.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.si.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),P.waitFor(o).next(()=>i)}getTargetCount(e){return P.resolve(this.targetCount)}getTargetData(e,t){let r=this.si.get(t)||null;return P.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),P.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),P.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),P.resolve()}getMatchingKeysForTargetId(e,t){let r=this._i.Hr(t);return P.resolve(r)}containsKey(e,t){return P.resolve(this._i.containsKey(t))}};var wh=class{constructor(e,t){this.ui={},this.overlays={},this.ci=new rE(0),this.li=!1,this.li=!0,this.hi=new h_,this.referenceDelegate=e(this),this.Pi=new m_(this),this.indexManager=new n_,this.remoteDocumentCache=(function(i){return new p_(i)})(r=>this.referenceDelegate.Ti(r)),this.serializer=new t_(t),this.Ii=new l_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new d_,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new f_(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){F("MemoryPersistence","Starting transaction:",e);let i=new y_(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ai(e,t){return P.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,t)))}},y_=class extends bv{constructor(e){super(),this.currentSequenceNumber=e}},v_=class n{constructor(e){this.persistence=e,this.Ri=new Pc,this.Vi=null}static mi(e){return new n(e)}get fi(){if(this.Vi)return this.Vi;throw $(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),P.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),P.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),P.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(i=>this.fi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.fi,r=>{let i=B.fromPath(r);return this.gi(e,i).next(o=>{o||t.removeEntry(i,Q.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return P.or([()=>P.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}},Th=class n{constructor(e,t){this.persistence=e,this.pi=new Zn(r=>JU(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=QB(this,t)}static mi(e,t){return new n(e,t)}Ei(){}di(e){return P.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){let t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}pr(e,t){return P.forEach(this.pi,(r,i)=>this.br(e,r,i).next(o=>o?P.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,s=>this.br(e,s,t).next(a=>{a||(r++,o.removeEntry(s,Q.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),P.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),P.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),P.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),P.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=oh(e.data.value)),t}br(e,t,r){return P.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.pi.get(t);return P.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var __=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=se(),i=se();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var E_=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var I_=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return dS()?8:QU(qe())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ys(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ws(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new E_;return this.Ss(e,t,s).next(a=>{if(o.result=a,this.Vs)return this.bs(e,t,s,a.size)})}).next(()=>o.result)}bs(e,t,r,i){return r.documentReadCount<this.fs?(ns()<=ne.DEBUG&&F("QueryEngine","SDK will not create cache indexes for query:",rs(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),P.resolve()):(ns()<=ne.DEBUG&&F("QueryEngine","Query:",rs(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(ns()<=ne.DEBUG&&F("QueryEngine","The SDK decides to create cache indexes for query:",rs(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Sn(t))):P.resolve())}ys(e,t){if(JA(t))return P.resolve(null);let r=Sn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Uv(t,null,"F"),r=Sn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=se(...o);return this.ps.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.Ds(t,a);return this.Cs(t,l,s,u.readTime)?this.ys(e,Uv(t,null,"F")):this.vs(e,l,t,u)}))})))}ws(e,t,r,i){return JA(t)||i.isEqual(Q.min())?P.resolve(null):this.ps.getDocuments(e,r).next(o=>{let s=this.Ds(t,o);return this.Cs(t,s,r,i)?P.resolve(null):(ns()<=ne.DEBUG&&F("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),rs(t)),this.vs(e,s,t,qU(i,Dc)).next(a=>a))})}Ds(e,t){let r=new We(r0(e));return t.forEach((i,o)=>{Wh(e,o)&&(r=r.add(o))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,t,r){return ns()<=ne.DEBUG&&F("QueryEngine","Using full collection scan to execute query:",rs(t)),this.ps.getDocumentsMatchingQuery(e,t,$i.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var pE="LocalStore",YB=3e8,w_=class{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new Ce(oe),this.xs=new Zn(o=>uE(o),lE),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new u_(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}};function JB(n,e,t,r){return new w_(n,e,t,r)}async function T0(n,e){let t=G(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=se();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({Ls:l,removedBatchIds:s,addedBatchIds:a}))})})}function ZB(n,e){let t=G(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(a,u,l,h){let p=l.batch,m=p.keys(),y=P.resolve();return m.forEach(S=>{y=y.next(()=>h.getEntry(u,S)).next(M=>{let R=l.docVersions.get(S);ge(R!==null,48541),M.version.compareTo(R)<0&&(p.applyToRemoteDocument(M,l),M.isValidDocument()&&(M.setReadTime(l.commitVersion),h.addEntry(M)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))})(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let u=se();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function D0(n){let e=G(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function XB(n,e){let t=G(n),r=e.snapshotVersion,i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(t.Pi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.Pi.addMatchingKeys(o,h.addedDocuments,p)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(it.EMPTY_BYTE_STRING,Q.min()).withLastLimboFreeSnapshotVersion(Q.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),(function(M,R,O){return M.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=YB?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0})(m,y,h)&&a.push(t.Pi.updateTargetData(o,y))});let u=Xn(),l=se();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(e$(o,s,e.documentUpdates).next(h=>{u=h.ks,l=h.qs})),!r.isEqual(Q.min())){let h=t.Pi.getLastRemoteSnapshotVersion(o).next(p=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return P.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.Ms=i,o))}function e$(n,e,t){let r=se(),i=se();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Xn();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(Q.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):F(pE,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{ks:s,qs:i}})}function t$(n,e){let t=G(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=iE),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function n$(n,e){let t=G(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Pi.getTargetData(r,e).next(o=>o?(i=o,P.resolve(i)):t.Pi.allocateTargetId(r).next(s=>(i=new Nc(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r})}async function T_(n,e,t){let r=G(n),i=r.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!Ss(s))throw s;F(pE,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function uR(n,e,t){let r=G(n),i=Q.min(),o=se();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(u,l,h){let p=G(u),m=p.xs.get(h);return m!==void 0?P.resolve(p.Ms.get(m)):p.Pi.getTargetData(l,h)})(r,s,Sn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(s,e,t?i:Q.min(),t?o:se())).next(a=>(r$(r,pB(e),a),{documents:a,Qs:o})))}function r$(n,e,t){let r=n.Os.get(e)||Q.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Os.set(e,r)}var Dh=class{constructor(){this.activeTargetIds=EB()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var D_=class{constructor(){this.Mo=new Dh,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Dh,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var b_=class{Oo(e){}shutdown(){}};var lR="ConnectivityMonitor",bh=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){F(lR,"Network connectivity changed: AVAILABLE");for(let e of this.qo)e(0)}ko(){F(lR,"Network connectivity changed: UNAVAILABLE");for(let e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var ih=null;function C_(){return ih===null?ih=(function(){return 268435456+Math.round(2147483648*Math.random())})():ih++,"0x"+ih.toString(16)}var pv="RestConnection",i$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},S_=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===fh?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,o){let s=C_(),a=this.zo(e,t.toUriEncodedString());F(pv,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,o);let{host:l}=new URL(a),h=Cr(l);return this.Jo(e,a,u,r,h).then(p=>(F(pv,`Received RPC '${e}' ${s}: `,p),p),p=>{throw ls(pv,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Ho(e,t,r,i,o,s){return this.Go(e,t,r,i,o)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+bs})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}zo(e,t){let r=i$[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}};var A_=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}};var rt="WebChannelConnection",R_=class extends S_{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,o){let s=C_();return new Promise((a,u)=>{let l=new av;l.setWithCredentials(!0),l.listenOnce(cv.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case yc.NO_ERROR:let p=l.getResponseJson();F(rt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case yc.TIMEOUT:F(rt,`RPC '${e}' ${s} timed out`),u(new L(A.DEADLINE_EXCEEDED,"Request time out"));break;case yc.HTTP_ERROR:let m=l.getStatus();if(F(rt,`RPC '${e}' ${s} failed with status:`,m,"response text:",l.getResponseText()),m>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let S=y?.error;if(S&&S.status&&S.message){let M=(function(O){let re=O.toLowerCase().replace(/_/g,"-");return Object.values(A).indexOf(re)>=0?re:A.UNKNOWN})(S.status);u(new L(M,S.message))}else u(new L(A.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new L(A.UNAVAILABLE,"Connection failed."));break;default:$(9055,{l_:e,streamId:s,h_:l.getLastErrorCode(),P_:l.getLastError()})}}finally{F(rt,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);F(rt,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",h,r,15)})}T_(e,t,r){let i=C_(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=dv(),a=lv(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=o.join("");F(rt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u);this.I_(p);let m=!1,y=!1,S=new A_({Yo:R=>{y?F(rt,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(m||(F(rt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),F(rt,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},Zo:()=>p.close()}),M=(R,O,re)=>{R.listen(O,ue=>{try{re(ue)}catch(ot){setTimeout(()=>{throw ot},0)}})};return M(p,ts.EventType.OPEN,()=>{y||(F(rt,`RPC '${e}' stream ${i} transport opened.`),S.o_())}),M(p,ts.EventType.CLOSE,()=>{y||(y=!0,F(rt,`RPC '${e}' stream ${i} transport closed`),S.a_(),this.E_(p))}),M(p,ts.EventType.ERROR,R=>{y||(y=!0,ls(rt,`RPC '${e}' stream ${i} transport errored. Name:`,R.name,"Message:",R.message),S.a_(new L(A.UNAVAILABLE,"The operation could not be completed")))}),M(p,ts.EventType.MESSAGE,R=>{if(!y){let O=R.data[0];ge(!!O,16349);let re=O,ue=re?.error||re[0]?.error;if(ue){F(rt,`RPC '${e}' stream ${i} received error:`,ue);let ot=ue.status,pt=(function(v){let E=Ae[v];if(E!==void 0)return p0(E)})(ot),Be=ue.message;pt===void 0&&(pt=A.INTERNAL,Be="Unknown error status: "+ot+" with message "+ue.message),y=!0,S.a_(new L(pt,Be)),p.close()}else F(rt,`RPC '${e}' stream ${i} received:`,O),S.u_(O)}}),M(a,uv.STAT_EVENT,R=>{R.stat===th.PROXY?F(rt,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===th.NOPROXY&&F(rt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.__()},0),S}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}};function gv(){return typeof document<"u"?document:null}function Kh(n){return new Yv(n,!0)}var Ch=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&F("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};var dR="PersistentStream",Sh=class{constructor(e,t,r,i,o,s,a,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Ch(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===A.RESOURCE_EXHAUSTED?(Qn(t.toString()),Qn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===A.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;let e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{let i=new L(A.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){let r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return F(dR,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(F(dR,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},N_=class extends Sh{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=LB(this.serializer,e),r=(function(o){if(!("targetChange"in o))return Q.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?Q.min():s.readTime?Rn(s.readTime):Q.min()})(e);return this.listener.H_(t,r)}Y_(e){let t={};t.database=e_(this.serializer),t.addTarget=(function(o,s){let a,u=s.target;if(a=Vv(u)?{documents:jB(o,u)}:{query:UB(o,u).ft},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=g0(o,s.resumeToken);let l=Jv(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(Q.min())>0){a.readTime=Eh(o,s.snapshotVersion.toTimestamp());let l=Jv(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let r=$B(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){let t={};t.database=e_(this.serializer),t.removeTarget=e,this.q_(t)}},M_=class extends Sh{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ge(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ge(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ge(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let t=VB(e.writeResults,e.commitTime),r=Rn(e.commitTime);return this.listener.na(r,t)}ra(){let e={};e.database=e_(this.serializer),this.q_(e)}ea(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>FB(this.serializer,r))};this.q_(t)}};var P_=class{},k_=class extends P_{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new L(A.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Go(e,Zv(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===A.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new L(A.UNKNOWN,o.toString())})}Ho(e,t,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Ho(e,Zv(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===A.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new L(A.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}},x_=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Qn(t),this.aa=!1):F("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var Ki="RemoteStore",O_=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(s=>{r.enqueueAndForget(async()=>{Qi(this)&&(F(Ki,"Restarting streams for network reachability change."),await(async function(u){let l=G(u);l.Ea.add(4),await Oc(l),l.Ra.set("Unknown"),l.Ea.delete(4),await Qh(l)})(this))})}),this.Ra=new x_(r,i)}};async function Qh(n){if(Qi(n))for(let e of n.da)await e(!0)}async function Oc(n){for(let e of n.da)await e(!1)}function b0(n,e){let t=G(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),vE(t)?yE(t):As(t).O_()&&mE(t,e))}function gE(n,e){let t=G(n),r=As(t);t.Ia.delete(e),r.O_()&&C0(t,e),t.Ia.size===0&&(r.O_()?r.L_():Qi(t)&&t.Ra.set("Unknown"))}function mE(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Q.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}As(n).Y_(e)}function C0(n,e){n.Va.Ue(e),As(n).Z_(e)}function yE(n){n.Va=new Qv({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),As(n).start(),n.Ra.ua()}function vE(n){return Qi(n)&&!As(n).x_()&&n.Ia.size>0}function Qi(n){return G(n).Ea.size===0}function S0(n){n.Va=void 0}async function o$(n){n.Ra.set("Online")}async function s$(n){n.Ia.forEach((e,t)=>{mE(n,e)})}async function a$(n,e){S0(n),vE(n)?(n.Ra.ha(e),yE(n)):n.Ra.set("Unknown")}async function c$(n,e,t){if(n.Ra.set("Online"),e instanceof vh&&e.state===2&&e.cause)try{await(async function(i,o){let s=o.cause;for(let a of o.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.Ia.delete(a),i.Va.removeTarget(a))})(n,e)}catch(r){F(Ki,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ah(n,r)}else if(e instanceof as?n.Va.Ze(e):e instanceof yh?n.Va.st(e):n.Va.tt(e),!t.isEqual(Q.min()))try{let r=await D0(n.localStore);t.compareTo(r)>=0&&await(function(o,s){let a=o.Va.Tt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Ia.get(l);h&&o.Ia.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.Ia.get(u);if(!h)return;o.Ia.set(u,h.withResumeToken(it.EMPTY_BYTE_STRING,h.snapshotVersion)),C0(o,u);let p=new Nc(h.target,u,l,h.sequenceNumber);mE(o,p)}),o.remoteSyncer.applyRemoteEvent(a)})(n,t)}catch(r){F(Ki,"Failed to raise snapshot:",r),await Ah(n,r)}}async function Ah(n,e,t){if(!Ss(e))throw e;n.Ea.add(1),await Oc(n),n.Ra.set("Offline"),t||(t=()=>D0(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{F(Ki,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Qh(n)})}function A0(n,e){return e().catch(t=>Ah(n,t,e))}async function Yh(n){let e=G(n),t=jr(e),r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:iE;for(;u$(e);)try{let i=await t$(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,l$(e,i)}catch(i){await Ah(e,i)}R0(e)&&N0(e)}function u$(n){return Qi(n)&&n.Ta.length<10}function l$(n,e){n.Ta.push(e);let t=jr(n);t.O_()&&t.X_&&t.ea(e.mutations)}function R0(n){return Qi(n)&&!jr(n).x_()&&n.Ta.length>0}function N0(n){jr(n).start()}async function d$(n){jr(n).ra()}async function h$(n){let e=jr(n);for(let t of n.Ta)e.ea(t.mutations)}async function f$(n,e,t){let r=n.Ta.shift(),i=qv.from(r,e,t);await A0(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Yh(n)}async function p$(n,e){e&&jr(n).X_&&await(async function(r,i){if((function(s){return SB(s)&&s!==A.ABORTED})(i.code)){let o=r.Ta.shift();jr(r).B_(),await A0(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Yh(r)}})(n,e),R0(n)&&N0(n)}async function hR(n,e){let t=G(n);t.asyncQueue.verifyOperationInProgress(),F(Ki,"RemoteStore received new credentials");let r=Qi(t);t.Ea.add(3),await Oc(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Qh(t)}async function g$(n,e){let t=G(n);e?(t.Ea.delete(2),await Qh(t)):e||(t.Ea.add(2),await Oc(t),t.Ra.set("Unknown"))}function As(n){return n.ma||(n.ma=(function(t,r,i){let o=G(t);return o.sa(),new N_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Xo:o$.bind(null,n),t_:s$.bind(null,n),r_:a$.bind(null,n),H_:c$.bind(null,n)}),n.da.push(async e=>{e?(n.ma.B_(),vE(n)?yE(n):n.Ra.set("Unknown")):(await n.ma.stop(),S0(n))})),n.ma}function jr(n){return n.fa||(n.fa=(function(t,r,i){let o=G(t);return o.sa(),new M_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:d$.bind(null,n),r_:p$.bind(null,n),ta:h$.bind(null,n),na:f$.bind(null,n)}),n.da.push(async e=>{e?(n.fa.B_(),await Yh(n)):(await n.fa.stop(),n.Ta.length>0&&(F(Ki,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}var L_=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new nn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new L(A.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function _E(n,e){if(Qn("AsyncQueue",`${e}: ${n}`),Ss(n))return new L(A.UNAVAILABLE,`${e}: ${n}`);throw n}var Rh=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||B.comparator(t.key,r.key):(t,r)=>B.comparator(t.key,r.key),this.keyedMap=vc(),this.sortedSet=new Ce(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Nh=class{constructor(){this.ga=new Ce(B.comparator)}track(e){let t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):$(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}},Es=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Rh.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var F_=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}},V_=class{constructor(){this.queries=fR(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=G(t),o=i.queries;i.queries=fR(),o.forEach((s,a)=>{for(let u of a.Sa)u.onError(r)})})(this,new L(A.ABORTED,"Firestore shutting down"))}};function fR(){return new Zn(n=>n0(n),Gh)}async function M0(n,e){let t=G(n),r=3,i=e.query,o=t.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new F_,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await t.onListen(i,!0);break;case 1:o.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(s){let a=_E(s,`Initialization of query '${rs(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&EE(t)}async function P0(n,e){let t=G(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function m$(n,e){let t=G(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.Sa)a.Fa(i)&&(r=!0);s.wa=i}}r&&EE(t)}function y$(n,e,t){let r=G(n),i=r.queries.get(e);if(i)for(let o of i.Sa)o.onError(t);r.queries.delete(e)}function EE(n){n.Ca.forEach(e=>{e.next()})}var j_,pR;(pR=j_||(j_={})).Ma="default",pR.Cache="cache";var Mh=class{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Es(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Es.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==j_.Cache}};var Ph=class{constructor(e){this.key=e}},kh=class{constructor(e){this.key=e}},U_=class{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=se(),this.mutatedKeys=se(),this.eu=r0(e),this.tu=new Rh(this.eu)}get nu(){return this.Ya}ru(e,t){let r=t?t.iu:new Nh,i=t?t.tu:this.tu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),y=Wh(this.query,p)?p:null,S=!!m&&this.mutatedKeys.has(m.key),M=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),R=!1;m&&y?m.data.isEqual(y.data)?S!==M&&(r.track({type:3,doc:y}),R=!0):this.su(m,y)||(r.track({type:2,doc:y}),R=!0,(u&&this.eu(y,u)>0||l&&this.eu(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),R=!0):m&&!y&&(r.track({type:1,doc:m}),R=!0,(u||l)&&(a=!0)),R&&(y?(s=s.add(y),o=M?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{tu:s,iu:r,Cs:a,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let s=e.iu.ya();s.sort((h,p)=>(function(y,S){let M=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $(20277,{Rt:R})}};return M(y)-M(S)})(h.type,p.type)||this.eu(h.doc,p.doc)),this.ou(r),i=i??!1;let a=t&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,l=u!==this.Za;return this.Za=u,s.length!==0||l?{snapshot:new Es(this.query,e.tu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Nh,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=se(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});let t=[];return e.forEach(r=>{this.Xa.has(r)||t.push(new kh(r))}),this.Xa.forEach(r=>{e.has(r)||t.push(new Ph(r))}),t}cu(e){this.Ya=e.Qs,this.Xa=se();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Es.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},IE="SyncEngine",B_=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},$_=class{constructor(e){this.key=e,this.hu=!1}},H_=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new Zn(a=>n0(a),Gh),this.Iu=new Map,this.Eu=new Set,this.du=new Ce(B.comparator),this.Au=new Map,this.Ru=new Pc,this.Vu={},this.mu=new Map,this.fu=Mc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};async function v$(n,e,t=!0){let r=V0(n),i,o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await k0(r,e,t,!0),i}async function _$(n,e){let t=V0(n);await k0(t,e,!0,!1)}async function k0(n,e,t,r){let i=await n$(n.localStore,Sn(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=await E$(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&b0(n.remoteStore,i),a}async function E$(n,e,t,r,i){n.pu=(p,m,y)=>(async function(M,R,O,re){let ue=R.view.ru(O);ue.Cs&&(ue=await uR(M.localStore,R.query,!1).then(({documents:w})=>R.view.ru(w,ue)));let ot=re&&re.targetChanges.get(R.targetId),pt=re&&re.targetMismatches.get(R.targetId)!=null,Be=R.view.applyChanges(ue,M.isPrimaryClient,ot,pt);return mR(M,R.targetId,Be.au),Be.snapshot})(n,p,m,y);let o=await uR(n.localStore,e,!0),s=new U_(e,o.Qs),a=s.ru(o.documents),u=Rc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);mR(n,t,l.au);let h=new B_(e,t,s);return n.Tu.set(e,h),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),l.snapshot}async function I$(n,e,t){let r=G(n),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(s=>!Gh(s,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await T_(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&gE(r.remoteStore,i.targetId),z_(r,i.targetId)}).catch(Cs)):(z_(r,i.targetId),await T_(r.localStore,i.targetId,!0))}async function w$(n,e){let t=G(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),gE(t.remoteStore,r.targetId))}async function T$(n,e,t){let r=N$(n);try{let i=await(function(s,a){let u=G(s),l=Pe.now(),h=a.reduce((y,S)=>y.add(S.key),se()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let S=Xn(),M=se();return u.Ns.getEntries(y,h).next(R=>{S=R,S.forEach((O,re)=>{re.isValidDocument()||(M=M.add(O))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,S)).next(R=>{p=R;let O=[];for(let re of a){let ue=CB(re,p.get(re.key).overlayedDocument);ue!=null&&O.push(new Mn(re.key,ue,QR(ue.value.mapValue),An.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,O,a)}).next(R=>{m=R;let O=R.applyToLocalDocumentSet(p,M);return u.documentOverlayCache.saveOverlays(y,R.batchId,O)})}).then(()=>({batchId:m.batchId,changes:o0(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,u){let l=s.Vu[s.currentUser.toKey()];l||(l=new Ce(oe)),l=l.insert(a,u),s.Vu[s.currentUser.toKey()]=l})(r,i.batchId,t),await Lc(r,i.changes),await Yh(r.remoteStore)}catch(i){let o=_E(i,"Failed to persist write");t.reject(o)}}async function x0(n,e){let t=G(n);try{let r=await XB(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Au.get(o);s&&(ge(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?ge(s.hu,14607):i.removedDocuments.size>0&&(ge(s.hu,42227),s.hu=!1))}),await Lc(t,r,e)}catch(r){await Cs(r)}}function gR(n,e,t){let r=G(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Tu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(s,a){let u=G(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.Sa)m.va(a)&&(l=!0)}),l&&EE(u)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function D$(n,e,t){let r=G(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Au.get(e),o=i&&i.key;if(o){let s=new Ce(B.comparator);s=s.insert(o,on.newNoDocument(o,Q.min()));let a=se().add(o),u=new mh(Q.min(),new Map,new Ce(oe),s,a);await x0(r,u),r.du=r.du.remove(o),r.Au.delete(e),wE(r)}else await T_(r.localStore,e,!1).then(()=>z_(r,e,t)).catch(Cs)}async function b$(n,e){let t=G(n),r=e.batch.batchId;try{let i=await ZB(t.localStore,e);L0(t,r,null),O0(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Lc(t,i)}catch(i){await Cs(i)}}async function C$(n,e,t){let r=G(n);try{let i=await(function(s,a){let u=G(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(ge(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})})(r.localStore,e);L0(r,e,t),O0(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Lc(r,i)}catch(i){await Cs(i)}}function O0(n,e){(n.mu.get(e)||[]).forEach(t=>{t.resolve()}),n.mu.delete(e)}function L0(n,e,t){let r=G(n),i=r.Vu[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function z_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(r=>{n.Ru.containsKey(r)||F0(n,r)})}function F0(n,e){n.Eu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(gE(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),wE(n))}function mR(n,e,t){for(let r of t)r instanceof Ph?(n.Ru.addReference(r.key,e),S$(n,r)):r instanceof kh?(F(IE,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||F0(n,r.key)):$(19791,{wu:r})}function S$(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(F(IE,"New document in limbo: "+t),n.Eu.add(r),wE(n))}function wE(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Eu.values().next().value;n.Eu.delete(e);let t=new B(we.fromString(e)),r=n.fu.next();n.Au.set(r,new $_(t)),n.du=n.du.insert(t,r),b0(n.remoteStore,new Nc(Sn(dE(t.path)),r,"TargetPurposeLimboResolution",rE.ce))}}async function Lc(n,e,t){let r=G(n),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((a,u)=>{s.push(r.pu(u,e,t).then(l=>{if((l||t)&&r.isPrimaryClient){let h=l?!l.fromCache:t?.targetChanges.get(u.targetId)?.current;r.sharedClientState.updateQueryState(u.targetId,h?"current":"not-current")}if(l){i.push(l);let h=__.As(u.targetId,l);o.push(h)}}))}),await Promise.all(s),r.Pu.H_(i),await(async function(u,l){let h=G(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>P.forEach(l,m=>P.forEach(m.Es,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>P.forEach(m.ds,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!Ss(p))throw p;F(pE,"Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=h.Ms.get(m),S=y.snapshotVersion,M=y.withLastLimboFreeSnapshotVersion(S);h.Ms=h.Ms.insert(m,M)}}})(r.localStore,o))}async function A$(n,e){let t=G(n);if(!t.currentUser.isEqual(e)){F(IE,"User change. New user:",e.toKey());let r=await T0(t.localStore,e);t.currentUser=e,(function(o,s){o.mu.forEach(a=>{a.forEach(u=>{u.reject(new L(A.CANCELLED,s))})}),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Lc(t,r.Ls)}}function R$(n,e){let t=G(n),r=t.Au.get(e);if(r&&r.hu)return se().add(r.key);{let i=se(),o=t.Iu.get(e);if(!o)return i;for(let s of o){let a=t.Tu.get(s);i=i.unionWith(a.view.nu)}return i}}function V0(n){let e=G(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=x0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=R$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=D$.bind(null,e),e.Pu.H_=m$.bind(null,e.eventManager),e.Pu.yu=y$.bind(null,e.eventManager),e}function N$(n){let e=G(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=b$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=C$.bind(null,e),e}var j0=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Kh(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,r){return null}Mu(t,r){return null}vu(t){return JB(this.persistence,new I_,t.initialUser,this.serializer)}Cu(t){return new wh(v_.mi,this.serializer)}Du(t){return new D_}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return n.provider={build:()=>new n},n})(),q_=class extends j0{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ge(this.persistence.referenceDelegate instanceof Th,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new o_(r,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes!==void 0?Vt.withCacheSize(this.cacheSizeBytes):Vt.DEFAULT;return new wh(r=>Th.mi(r,t),this.serializer)}};var M$=(()=>{class n{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>gR(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=A$.bind(null,this.syncEngine),await g$(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new V_})()}createDatastore(t){let r=Kh(t.databaseInfo.databaseId),i=(function(s){return new R_(s)})(t.databaseInfo);return(function(s,a,u,l){return new k_(s,a,u,l)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,o,s,a,u){return new O_(i,o,s,a,u)})(this.localStore,this.datastore,t.asyncQueue,r=>gR(this.syncEngine,r,0),(function(){return bh.v()?new bh:new b_})())}createSyncEngine(t,r){return(function(o,s,a,u,l,h,p){let m=new H_(o,s,a,u,l,h);return p&&(m.gu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){await(async function(r){let i=G(r);F(Ki,"RemoteStore shutting down."),i.Ea.add(5),await Oc(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}return n.provider={build:()=>new n},n})();var xh=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Qn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Ur="FirestoreClient",G_=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ge.UNAUTHENTICATED,this.clientId=Tc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{F(Ur,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(F(Ur,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new nn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=_E(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function mv(n,e){n.asyncQueue.verifyOperationInProgress(),F(Ur,"Initializing OfflineComponentProvider");let t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await T0(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function yR(n,e){n.asyncQueue.verifyOperationInProgress();let t=await P$(n);F(Ur,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>hR(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>hR(e.remoteStore,i)),n._onlineComponents=e}async function P$(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){F(Ur,"Using user provided OfflineComponentProvider");try{await mv(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===A.FAILED_PRECONDITION||i.code===A.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;ls("Error using user provided cache. Falling back to memory cache: "+t),await mv(n,new j0)}}else F(Ur,"Using default OfflineComponentProvider"),await mv(n,new q_(void 0));return n._offlineComponents}async function U0(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(F(Ur,"Using user provided OnlineComponentProvider"),await yR(n,n._uninitializedComponentsProvider._online)):(F(Ur,"Using default OnlineComponentProvider"),await yR(n,new M$))),n._onlineComponents}function k$(n){return U0(n).then(e=>e.syncEngine)}async function B0(n){let e=await U0(n),t=e.eventManager;return t.onListen=v$.bind(null,e.syncEngine),t.onUnlisten=I$.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=_$.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=w$.bind(null,e.syncEngine),t}function x$(n,e,t={}){let r=new nn;return n.asyncQueue.enqueueAndForget(async()=>(function(o,s,a,u,l){let h=new xh({next:m=>{h.Nu(),s.enqueueAndForget(()=>P0(o,p));let y=m.docs.has(a);!y&&m.fromCache?l.reject(new L(A.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&u&&u.source==="server"?l.reject(new L(A.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Mh(dE(a.path),h,{includeMetadataChanges:!0,qa:!0});return M0(o,p)})(await B0(n),n.asyncQueue,e,t,r)),r.promise}function O$(n,e,t={}){let r=new nn;return n.asyncQueue.enqueueAndForget(async()=>(function(o,s,a,u,l){let h=new xh({next:m=>{h.Nu(),s.enqueueAndForget(()=>P0(o,p)),m.fromCache&&u.source==="server"?l.reject(new L(A.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Mh(a,h,{includeMetadataChanges:!0,qa:!0});return M0(o,p)})(await B0(n),n.asyncQueue,e,t,r)),r.promise}function $0(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var vR=new Map;var H0="firestore.googleapis.com",_R=!0,Oh=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new L(A.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=H0,this.ssl=_R}else this.host=e.host,this.ssl=e.ssl??_R;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=w0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<KB)throw new L(A.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}zU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$0(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new L(A.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new L(A.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new L(A.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Is=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Oh({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new L(A.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new L(A.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Oh(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new yv;switch(r.type){case"firstParty":return new Iv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new L(A.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=vR.get(t);r&&(F("ComponentProvider","Removing Datastore"),vR.delete(t),r.terminate())})(this),Promise.resolve()}};function z0(n,e,t,r={}){n=rn(n,Is);let i=Cr(e),o=n._getSettings(),s=Z(N({},o),{emulatorOptions:n._getEmulatorOptions()}),a=`${e}:${t}`;i&&(Sd(`https://${a}`),Ad("Firestore",!0)),o.host!==H0&&o.host!==a&&ls("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=Z(N({},o),{host:a,ssl:i,emulatorOptions:r});if(!In(u,s)&&(n._setSettings(u),r.mockUserToken)){let l,h;if(typeof r.mockUserToken=="string")l=r.mockUserToken,h=Ge.MOCK_USER;else{l=oS(r.mockUserToken,n._app?.options.projectId);let p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new L(A.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Ge(p)}n._authCredentials=new vv(new ch(l,h))}}var ws=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Ke=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(xc(t,n._jsonSchema))return new n(e,r||null,new B(we.fromString(t.referencePath)))}};Ke._jsonSchemaVersion="firestore/documentReference/1.0",Ke._jsonSchema={type:Me("string",Ke._jsonSchemaVersion),referencePath:Me("string")};var xr=class n extends ws{constructor(e,t,r){super(e,t,dE(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ke(this.firestore,null,new B(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function q0(n,e,...t){if(n=je(n),bR("collection","path",e),n instanceof Is){let r=we.fromString(e,...t);return VA(r),new xr(n,null,r)}{if(!(n instanceof Ke||n instanceof xr))throw new L(A.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(we.fromString(e,...t));return VA(r),new xr(n.firestore,null,r)}}function TE(n,e,...t){if(n=je(n),arguments.length===1&&(e=Tc.newId()),bR("doc","path",e),n instanceof Is){let r=we.fromString(e,...t);return FA(r),new Ke(n,null,new B(r))}{if(!(n instanceof Ke||n instanceof xr))throw new L(A.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(we.fromString(e,...t));return FA(r),new Ke(n.firestore,n instanceof xr?n.converter:null,new B(r))}}var ER="AsyncQueue",Lh=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Ch(this,"async_queue_retry"),this._c=()=>{let r=gv();r&&F(ER,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let t=gv();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=gv();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let t=new nn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ss(e))throw e;F(ER,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){let t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Qn("INTERNAL UNHANDLED ERROR: ",IR(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let i=L_.createAndSchedule(this,e,t,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&$(47125,{Pc:IR(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function IR(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}var er=class extends Is{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Lh,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Lh(e),this._firestoreClient=void 0,await e}}};function G0(n,e){let t=typeof n=="object"?n:Ni(),r=typeof n=="string"?n:e||fh,i=Qo(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=iS("firestore");o&&z0(i,...o)}return i}function DE(n){if(n._terminated)throw new L(A.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||L$(n),n._firestoreClient}function L$(n){let e=n._freezeSettings(),t=(function(i,o,s,a){return new Cv(i,o,s,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,$0(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new G_(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){let o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}})(n._componentsProvider))}var Or=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(it.fromBase64String(e))}catch(t){throw new L(A.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(it.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(xc(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Or._jsonSchemaVersion="firestore/bytes/1.0",Or._jsonSchema={type:Me("string",Or._jsonSchemaVersion),bytes:Me("string")};var Ts=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new L(A.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Ds=class{constructor(e){this._methodName=e}};var Lr=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new L(A.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new L(A.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return oe(this._lat,e._lat)||oe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(xc(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Lr._jsonSchemaVersion="firestore/geoPoint/1.0",Lr._jsonSchema={type:Me("string",Lr._jsonSchemaVersion),latitude:Me("number"),longitude:Me("number")};var Fr=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(xc(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new L(A.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Fr._jsonSchemaVersion="firestore/vectorValue/1.0",Fr._jsonSchema={type:Me("string",Fr._jsonSchemaVersion),vectorValues:Me("object")};var F$=/^__.*__$/,W_=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Mn(e,this.data,this.fieldMask,t,this.fieldTransforms):new Wi(e,this.data,t,this.fieldTransforms)}},Fh=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Mn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function W0(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $(40011,{Ac:n})}}var K_=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new n(N(N({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){let t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){let t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return jh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(W0(this.Ac)&&F$.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}},Q_=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Kh(e)}Cc(e,t,r,i=!1){return new K_({Ac:e,methodName:t,Dc:r,path:Mt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Jh(n){let e=n._freezeSettings(),t=Kh(n._databaseId);return new Q_(n._databaseId,!!e.ignoreUndefinedProperties,t)}function K0(n,e,t,r,i,o={}){let s=n.Cc(o.merge||o.mergeFields?2:0,e,t,i);bE("Data must be an object, but it was:",s,r);let a=Q0(r,s),u,l;if(o.merge)u=new jt(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=J_(e,p,t);if(!s.contains(m))throw new L(A.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);J0(h,m)||h.push(m)}u=new jt(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new W_(new Nt(a),u,l)}var Vh=class n extends Ds{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};var Y_=class n extends Ds{_toFieldTransform(e){return new Bv(e.path,new zi)}isEqual(e){return e instanceof n}};function V$(n,e,t,r){let i=n.Cc(1,e,t);bE("Data must be an object, but it was:",i,r);let o=[],s=Nt.empty();Br(r,(u,l)=>{let h=CE(e,u,t);l=je(l);let p=i.yc(h);if(l instanceof Vh)o.push(h);else{let m=Fc(l,p);m!=null&&(o.push(h),s.set(h,m))}});let a=new jt(o);return new Fh(s,a,i.fieldTransforms)}function j$(n,e,t,r,i,o){let s=n.Cc(1,e,t),a=[J_(e,r,t)],u=[i];if(o.length%2!=0)throw new L(A.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(J_(e,o[m])),u.push(o[m+1]);let l=[],h=Nt.empty();for(let m=a.length-1;m>=0;--m)if(!J0(l,a[m])){let y=a[m],S=u[m];S=je(S);let M=s.yc(y);if(S instanceof Vh)l.push(y);else{let R=Fc(S,M);R!=null&&(l.push(y),h.set(y,R))}}let p=new jt(l);return new Fh(h,p,s.fieldTransforms)}function U$(n,e,t,r=!1){return Fc(t,n.Cc(r?4:3,e))}function Fc(n,e){if(Y0(n=je(n)))return bE("Unsupported field value:",e,n),Q0(n,e);if(n instanceof Ds)return(function(r,i){if(!W0(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let a of r){let u=Fc(a,i.wc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}})(n,e)}return(function(r,i){if((r=je(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return IB(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Pe.fromDate(r);return{timestampValue:Eh(i.serializer,o)}}if(r instanceof Pe){let o=new Pe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Eh(i.serializer,o)}}if(r instanceof Lr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Or)return{bytesValue:g0(i.serializer,r._byteString)};if(r instanceof Ke){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:fE(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Fr)return(function(s,a){return{mapValue:{fields:{[sE]:{stringValue:aE},[hs]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.Sc("VectorValues must only contain numeric values.");return hE(a.serializer,l)})}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${Hh(r)}`)})(n,e)}function Q0(n,e){let t={};return BR(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Br(n,(r,i)=>{let o=Fc(i,e.mc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function Y0(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Pe||n instanceof Lr||n instanceof Or||n instanceof Ke||n instanceof Ds||n instanceof Fr)}function bE(n,e,t){if(!Y0(t)||!CR(t)){let r=Hh(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function J_(n,e,t){if((e=je(e))instanceof Ts)return e._internalPath;if(typeof e=="string")return CE(n,e);throw jh("Field path arguments must be of type string or ",n,!1,void 0,t)}var B$=new RegExp("[~\\*/\\[\\]]");function CE(n,e,t){if(e.search(B$)>=0)throw jh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ts(...e.split("."))._internalPath}catch{throw jh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function jh(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new L(A.INVALID_ARGUMENT,a+n+u)}function J0(n,e){return n.some(t=>t.isEqual(e))}var Uh=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ke(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Z_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(SE("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Z_=class extends Uh{data(){return super.data()}};function SE(n,e){return typeof e=="string"?CE(n,e):e instanceof Ts?e._internalPath:e._delegate._internalPath}function $$(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new L(A.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var kc=class{},X_=class extends kc{};function Z0(n,e,...t){let r=[];e instanceof kc&&r.push(e),r=r.concat(t),(function(o){let s=o.filter(u=>u instanceof eE).length,a=o.filter(u=>u instanceof Bh).length;if(s>1||s>0&&a>0)throw new L(A.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)n=i._apply(n);return n}var Bh=class n extends X_{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return eN(e._query,t),new ws(e.firestore,e.converter,jv(e._query,t))}_parse(e){let t=Jh(e.firestore);return(function(o,s,a,u,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new L(A.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){TR(p,h);let S=[];for(let M of p)S.push(wR(u,o,M));m={arrayValue:{values:S}}}else m=wR(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||TR(p,h),m=U$(a,s,p,h==="in"||h==="not-in");return Ne.create(l,h,m)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function X0(n,e,t){let r=e,i=SE("where",n);return Bh._create(i,r,t)}var eE=class n extends kc{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:sn.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)eN(s,u),s=jv(s,u)})(e._query,t),new ws(e.firestore,e.converter,jv(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function wR(n,e,t){if(typeof(t=je(t))=="string"){if(t==="")throw new L(A.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!t0(e)&&t.indexOf("/")!==-1)throw new L(A.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(we.fromString(t));if(!B.isDocumentKey(r))throw new L(A.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return qA(n,new B(r))}if(t instanceof Ke)return qA(n,t._key);throw new L(A.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Hh(t)}.`)}function TR(n,e){if(!Array.isArray(n)||n.length===0)throw new L(A.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function eN(n,e){let t=(function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new L(A.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new L(A.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var tE=class{convertValue(e,t="none"){switch(Vr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ie(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Jn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw $(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Br(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){let t=e.fields?.[hs].arrayValue?.values?.map(r=>Ie(r.doubleValue));return new Fr(t)}convertGeoPoint(e){return new Lr(Ie(e.latitude),Ie(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=qh(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Cc(e));default:return null}}convertTimestamp(e){let t=Yn(e);return new Pe(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=we.fromString(e);ge(I0(r),9688,{name:e});let i=new ph(r.get(1),r.get(3)),o=new B(r.popFirst(5));return i.isEqual(t)||Qn(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function tN(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var ji=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Ui=class n extends Uh{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new cs(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(SE("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new L(A.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Ui._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ui._jsonSchema={type:Me("string",Ui._jsonSchemaVersion),bundleSource:Me("string","DocumentSnapshot"),bundleName:Me("string"),bundle:Me("string")};var cs=class extends Ui{data(e={}){return super.data(e)}},us=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new ji(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new cs(this._firestore,this._userDataWriter,r.key,r,new ji(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new L(A.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new cs(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ji(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new cs(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ji(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:H$(a.type),doc:u,oldIndex:l,newIndex:h}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new L(A.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Tc.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function H$(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $(61501,{type:n})}}function nN(n){n=rn(n,Ke);let e=rn(n.firestore,er);return x$(DE(e),n._key).then(t=>z$(e,n,t))}us._jsonSchemaVersion="firestore/querySnapshot/1.0",us._jsonSchema={type:Me("string",us._jsonSchemaVersion),bundleSource:Me("string","QuerySnapshot"),bundleName:Me("string"),bundle:Me("string")};var $h=class extends tE{constructor(e){super(),this.firestore=e}convertBytes(e){return new Or(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ke(this.firestore,null,t)}};function rN(n){n=rn(n,ws);let e=rn(n.firestore,er),t=DE(e),r=new $h(e);return $$(n._query),O$(t,n._query).then(i=>new us(e,r,n,i))}function Zh(n,e,t){n=rn(n,Ke);let r=rn(n.firestore,er),i=tN(n.converter,e,t);return Xh(r,[K0(Jh(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,An.none())])}function iN(n,e,t,...r){n=rn(n,Ke);let i=rn(n.firestore,er),o=Jh(i),s;return s=typeof(e=je(e))=="string"||e instanceof Ts?j$(o,"updateDoc",n._key,e,t,r):V$(o,"updateDoc",n._key,e),Xh(i,[s.toMutation(n._key,An.exists(!0))])}function oN(n){return Xh(rn(n.firestore,er),[new Ac(n._key,An.none())])}function sN(n,e){let t=rn(n.firestore,er),r=TE(n),i=tN(n.converter,e);return Xh(t,[K0(Jh(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,An.exists(!1))]).then(()=>r)}function Xh(n,e){return(function(r,i){let o=new nn;return r.asyncQueue.enqueueAndForget(async()=>T$(await k$(r),i,o)),o.promise})(DE(n),e)}function z$(n,e,t){let r=t.docs.get(e._key),i=new $h(n);return new Ui(n,i,e._key,r,new ji(t.hasPendingWrites,t.fromCache),e.converter)}function AE(){return new Y_("serverTimestamp")}(function(e,t=!0){(function(i){bs=i})(Ar),Xt(new ft("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new er(new _v(r.getProvider("auth-internal")),new wv(s,r.getProvider("app-check-internal")),(function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new L(A.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ph(l.options.projectId,h)})(s,i),s);return o=N({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),be(xA,OA,e),be(xA,OA,"esm2020")})();var Yi=class{constructor(e){return e}},aN="firestore",RE=class{constructor(){return Jo(aN)}};var NE=new j("angularfire2.firestore-instances");function q$(n,e){let t=ic(aN,n,e);return t&&new Yi(t)}function G$(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Yi(r)}}var W$={provide:RE,deps:[[new bt,NE]]},K$={provide:Yi,useFactory:q$,deps:[[new bt,NE],Hn]};function Rre(n,...e){return be("angularfire",Rr.full,"fst"),Pt([K$,W$,{provide:NE,useFactory:G$(n),multi:!0,deps:[Ee,Fe,Nr,Pi,[new bt,mc],[new bt,Zo],...e]}])}var ME=Ue(sN,!0,2);var Vc=Ue(q0,!0,2);var PE=Ue(oN,!0,2);var Ut=Ue(TE,!0,2);var jc=Ue(nN,!0);var kE=Ue(rN,!0);var Nre=Ue(G0,!0);var cN=Ue(Z0,!0,2);var ef=Ue(iN,!0,2);var uN=Ue(X0,!0,2);var lN=class n{constructor(e,t){this.firestore=e;this.auth=t}async crearRuta(e){let t=this.auth.currentUser;if(!t)throw new Error("No hay usuario autenticado");let r=Vc(this.firestore,"routes"),i=new Date;return(await ME(r,{usuarioId:t.uid,nombreBase:e.nombreBase,nombrePersonalizado:e.nombrePersonalizado,creadaEn:i,actualizadaEn:i})).id}async obtenerMisRutas(){let e=this.auth.currentUser;if(!e)return console.warn("obtenerMisRutas: no hay usuario actual"),[];let t=Vc(this.firestore,"routes"),r=cN(t,uN("usuarioId","==",e.uid)),o=(await kE(r)).docs.map(s=>N({id:s.id},s.data()));return console.log("Rutas obtenidas desde Firestore:",o),o}async actualizarRuta(e,t){let r=Ut(this.firestore,"routes",e);await ef(r,Z(N({},t),{actualizadaEn:new Date}))}async eliminarRuta(e){let t=Ut(this.firestore,"routes",e);await PE(t)}async agregarDireccion(e,t){let r=Vc(this.firestore,`routes/${e}/stops`),i=new Date;return(await ME(r,Z(N({},t),{creadaEn:i,actualizadaEn:i}))).id}async obtenerRutaPorId(e){let t=Ut(this.firestore,"routes",e),r=await jc(t);return r.exists()?N({id:r.id},r.data()):null}async obtenerDireccionesOrdenadas(e){let t=Vc(this.firestore,`routes/${e}/stops`),i=(await kE(t)).docs.map(o=>{let s=o.data();return(s.indiceOrden===void 0||s.indiceOrden===null)&&(s.indiceOrden=9999),N({id:o.id},s)});return i.sort((o,s)=>(o.indiceOrden??9999)-(s.indiceOrden??9999)),i}async actualizarDireccion(e,t,r){let i=Ut(this.firestore,`routes/${e}/stops/${t}`);await ef(i,Z(N({},r),{actualizadaEn:new Date}))}async eliminarDireccion(e,t){let r=Ut(this.firestore,`routes/${e}/stops/${t}`);await PE(r)}async reordenarDirecciones(e,t){let r=t.map((i,o)=>{let s=Ut(this.firestore,`routes/${e}/stops/${i.id}`);return ef(s,{indiceOrden:o})});await Promise.all(r)}limpiarFecha(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())}aDate(e){return e?e instanceof Date?e:e.toDate?e.toDate():null:null}async obtenerUnaRuta(e){let t=Ut(this.firestore,`routes/${e}`),r=await jc(t);return r.exists()?N({id:e},r.data()):null}direccionActivaEnFecha(e,t){let r=this.limpiarFecha(t);if(e.fechaBaja){let i=this.aDate(e.fechaBaja);if(i&&i<=r)return!1}if(e.fechaAlta){let i=this.aDate(e.fechaAlta);if(i&&i>r)return!1}return!0}async registrarSalto(e,t,r=""){let i=new Date().toISOString().split("T")[0],o=Ut(this.firestore,`routes/${e}/historial/${i}/direcciones/${t.id}`);await Zh(o,{entregado:!1,hora:AE(),razonSalto:r||null,cliente:t.cliente,direccion:t.direccion,cantidadDiarios:t.cantidadDiarios,notas:t.notas||null,lat:t.lat||null,lng:t.lng||null})}direccionSeEntregaEsteDia(e,t){let r=t.getDay(),o=["domingo","lunes","martes","miercoles","jueves","viernes","sabado"][r];return e.dias[o]===!0}async registrarEntrega(e,t,r){let i=new Date().toISOString().split("T")[0],o=r;o||(o=await this.obtenerDireccion(e,t));let s=Ut(this.firestore,`routes/${e}/historial/${i}/direcciones/${t}`);await Zh(s,{entregado:!0,hora:AE(),razonSalto:null,cliente:o?.cliente||null,direccion:o?.direccion||null,cantidadDiarios:o?.cantidadDiarios||null,notas:o?.notas||null,lat:o?.lat||null,lng:o?.lng||null})}async obtenerDireccion(e,t){let r=Ut(this.firestore,`routes/${e}/stops/${t}`),i=await jc(r);return i.exists()?N({id:i.id},i.data()):null}async obtenerDireccionesParaReparto(e,t){return(await this.obtenerDireccionesOrdenadas(e)).filter(i=>this.direccionActivaEnFecha(i,t)&&this.direccionSeEntregaEsteDia(i,t))}async esDiaDeEntrega(e,t=new Date){if(!e.dias)return!0;let r=t.getDay(),i=await this.esFestivo(t),o=[e.dias.domingo,e.dias.lunes,e.dias.martes,e.dias.miercoles,e.dias.jueves,e.dias.viernes,e.dias.sabado];return i?e.dias.festivos===!0:r===1&&e.dias.guardarFinSemanaParaLunes?!0:o[r]===!0}async esFestivo(e=new Date){let t=e.toISOString().split("T")[0],r=Ut(this.firestore,`festivos/${t}`);return(await jc(r)).exists()}static \u0275fac=function(t){return new(t||n)(K(Yi),K(Li))};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})};export{N as a,Z as b,Y as c,et as d,Oe as e,_e as f,_M as g,EM as h,un as i,Pn as j,ln as k,V as l,po as m,Bu as n,U as o,go as p,j as q,K as r,k as s,Pt as t,Kw as u,Qw as v,Fe as w,Er as x,dt as y,Ee as z,hi as A,Wt as B,Tl as C,Dl as D,Og as E,rk as F,bD as G,WD as H,vn as I,em as J,Sa as K,ko as L,ab as M,cb as N,xo as O,lb as P,Oo as Q,fb as R,pb as S,am as T,cm as U,Fl as V,gb as W,mb as X,Zx as Y,_b as Z,Eb as _,eO as $,wb as aa,yO as ba,Tb as ca,um as da,Db as ea,Cb as fa,IO as ga,Sb as ha,bO as ia,SO as ja,mm as ka,ym as la,t1 as ma,jn as na,Gb as oa,a1 as pa,Wb as qa,E1 as ra,br as sa,qm as ta,Td as ua,aF as va,See as wa,Aee as xa,O2 as ya,Li as za,Xte as Aa,ene as Ba,tne as Ca,nne as Da,rne as Ea,Yi as Fa,Rre as Ga,Vc as Ha,kE as Ia,Nre as Ja,cN as Ka,uN as La,lN as Ma};
