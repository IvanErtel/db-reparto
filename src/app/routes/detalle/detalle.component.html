<div class="detalle-ruta">

  <button (click)="volver()">⬅ Volver</button>

  <h1>{{ ruta()?.nombrePersonalizado }}</h1>
  <p class="base">Zona base: {{ ruta()?.nombreBase }}</p>

  <button class="btn-agregar" (click)="agregarDireccion()">
    ➕ Agregar dirección
  </button>

  <h2>Direcciones cargadas</h2>

  <!-- Loader -->
  <div *ngIf="cargandoDirecciones()">Cargando direcciones...</div>

  <!-- Lista con Drag & Drop -->
  <ul
    *ngIf="!cargandoDirecciones() && direcciones().length > 0"
    cdkDropList
    (cdkDropListDropped)="reordenar($event)"
  >
    <li
      *ngFor="let d of direcciones(); let i = index"
      cdkDrag
      (click)="editarDireccion(d.id!)"
    >

      <div class="drag-handle" cdkDragHandle>☰</div>

      <div class="contenido">
        <strong>{{ d.cliente }}</strong>
        <div>{{ d.direccion }}</div>
        <div class="detalle">({{ d.cantidadDiarios }} diarios)</div>
      </div>

    </li>
  </ul>

  <!-- Vacío -->
  <p *ngIf="!cargandoDirecciones() && direcciones().length === 0">
    Esta ruta todavía no tiene direcciones.
  </p>

</div>
