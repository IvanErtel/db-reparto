<div class="detalle-ruta">

  <button class="btn-volver" (click)="volver()">‚¨Ö Volver</button>

  <h1>{{ ruta()?.nombrePersonalizado }}</h1>
  <p class="base">Zona base: <strong>{{ ruta()?.nombreBase }}</strong></p>

  <button class="btn-agregar" (click)="agregarDireccion()">
    ‚ûï Agregar direcci√≥n
  </button>

  <div class="filtro-dia">
  <label>D√≠a de reparto:
    <select [(ngModel)]="diaSeleccionado" (change)="filtrarPorDia()">
      <option value="todos">Todos</option>
      <option value="lunes">Lunes</option>
      <option value="martes">Martes</option>
      <option value="miercoles">Mi√©rcoles</option>
      <option value="jueves">Jueves</option>
      <option value="viernes">Viernes</option>
      <option value="sabado">S√°bado</option>
      <option value="domingo">Domingo</option>
      <option value="festivos">Festivos</option>
    </select>
  </label>
</div>

  <h2>Direcciones cargadas</h2>

  <div *ngIf="cargandoDirecciones()" class="loading">
    Cargando direcciones...
  </div>

  <div class="lista" *ngIf="!cargandoDirecciones() && direcciones().length > 0">

    <div class="card" *ngFor="let d of direcciones()" (click)="abrirDetalle(d)"
>

      <div class="cliente">{{ d.cliente }}</div>

      <div class="direccion">
        üìç {{ d.direccion }}
      </div>

      <div class="info">
        üì∞ {{ d.cantidadDiarios }} diarios
      </div>

    </div>

  </div>

  <p class="sin-datos"
     *ngIf="!cargandoDirecciones() && direcciones().length === 0">
    Esta ruta todav√≠a no tiene direcciones.
  </p>

  <!-- MODAL DETALLE -->
<div class="modal-fondo" *ngIf="modalAbierto()">
  <div class="modal-contenido">

    <h2>{{ detalleSeleccionado()?.cliente }}</h2>

    <p><strong>Direcci√≥n:</strong> {{ detalleSeleccionado()?.direccion }}</p>
    <p><strong>Diarios:</strong> {{ detalleSeleccionado()?.cantidadDiarios }}</p>

    <p><strong>D√≠as:</strong></p>
    <ul>
      <li *ngIf="detalleSeleccionado()?.dias.lunes">Lunes</li>
      <li *ngIf="detalleSeleccionado()?.dias.martes">Martes</li>
      <li *ngIf="detalleSeleccionado()?.dias.miercoles">Mi√©rcoles</li>
      <li *ngIf="detalleSeleccionado()?.dias.jueves">Jueves</li>
      <li *ngIf="detalleSeleccionado()?.dias.viernes">Viernes</li>
      <li *ngIf="detalleSeleccionado()?.dias.sabado">S√°bado</li>
      <li *ngIf="detalleSeleccionado()?.dias.domingo">Domingo</li>
      <li *ngIf="detalleSeleccionado()?.dias.festivos">Festivos</li>
    </ul>

    <p *ngIf="detalleSeleccionado()?.notas">
      <strong>Notas:</strong><br>{{ detalleSeleccionado()?.notas }}
    </p>

    <div class="acciones-modal">
      <button class="btn-editar"
              (click)="editarDireccion(detalleSeleccionado()!.id!)">
        Editar
      </button>

      <button class="btn-cerrar"
              (click)="cerrarModal()">
        Cerrar
      </button>
    </div>

  </div>
</div>

</div>
